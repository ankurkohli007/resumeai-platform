var ug=b=>{throw TypeError(b)};var bu=(b,t,i)=>t.has(b)||ug("Cannot "+i);var Xt=(b,t,i)=>(bu(b,t,"read from private field"),i?i.call(b):t.get(b)),Ai=(b,t,i)=>t.has(b)?ug("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(b):t.set(b,i),Be=(b,t,i,s)=>(bu(b,t,"write to private field"),s?s.call(b,i):t.set(b,i),i),Si=(b,t,i)=>(bu(b,t,"access private method"),i);var hg=(b,t,i,s)=>({set _(r){Be(b,t,r,i)},get _(){return Xt(b,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var yu={exports:{}},qa={};var dg;function Z0(){if(dg)return qa;dg=1;var b=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:b,type:s,key:c,ref:r!==void 0?r:null,props:o}}return qa.Fragment=t,qa.jsx=i,qa.jsxs=i,qa}var fg;function W0(){return fg||(fg=1,yu.exports=Z0()),yu.exports}var B=W0(),vu={exports:{}},dt={};var pg;function J0(){if(pg)return dt;pg=1;var b=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function x(D,I,K){this.props=D,this.context=I,this.refs=E,this.updater=K||w}x.prototype.isReactComponent={},x.prototype.setState=function(D,I){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,I,"setState")},x.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function C(){}C.prototype=x.prototype;function T(D,I,K){this.props=D,this.context=I,this.refs=E,this.updater=K||w}var R=T.prototype=new C;R.constructor=T,S(R,x.prototype),R.isPureReactComponent=!0;var k=Array.isArray;function N(){}var L={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function $(D,I,K){var W=K.ref;return{$$typeof:b,type:D,key:I,ref:W!==void 0?W:null,props:K}}function tt(D,I){return $(D.type,I,D.props)}function Q(D){return typeof D=="object"&&D!==null&&D.$$typeof===b}function ct(D){var I={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(K){return I[K]})}var _t=/\/+/g;function ut(D,I){return typeof D=="object"&&D!==null&&D.key!=null?ct(""+D.key):I.toString(36)}function Mt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(I){D.status==="pending"&&(D.status="fulfilled",D.value=I)},function(I){D.status==="pending"&&(D.status="rejected",D.reason=I)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function z(D,I,K,W,rt){var ht=typeof D;(ht==="undefined"||ht==="boolean")&&(D=null);var lt=!1;if(D===null)lt=!0;else switch(ht){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(D.$$typeof){case b:case t:lt=!0;break;case g:return lt=D._init,z(lt(D._payload),I,K,W,rt)}}if(lt)return rt=rt(D),lt=W===""?"."+ut(D,0):W,k(rt)?(K="",lt!=null&&(K=lt.replace(_t,"$&/")+"/"),z(rt,I,K,"",function(Tn){return Tn})):rt!=null&&(Q(rt)&&(rt=tt(rt,K+(rt.key==null||D&&D.key===rt.key?"":(""+rt.key).replace(_t,"$&/")+"/")+lt)),I.push(rt)),1;lt=0;var Jt=W===""?".":W+":";if(k(D))for(var jt=0;jt<D.length;jt++)W=D[jt],ht=Jt+ut(W,jt),lt+=z(W,I,K,ht,rt);else if(jt=A(D),typeof jt=="function")for(D=jt.call(D),jt=0;!(W=D.next()).done;)W=W.value,ht=Jt+ut(W,jt++),lt+=z(W,I,K,ht,rt);else if(ht==="object"){if(typeof D.then=="function")return z(Mt(D),I,K,W,rt);throw I=String(D),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return lt}function G(D,I,K){if(D==null)return D;var W=[],rt=0;return z(D,W,"","",function(ht){return I.call(K,ht,rt++)}),W}function Z(D){if(D._status===-1){var I=D._result;I=I(),I.then(function(K){(D._status===0||D._status===-1)&&(D._status=1,D._result=K)},function(K){(D._status===0||D._status===-1)&&(D._status=2,D._result=K)}),D._status===-1&&(D._status=0,D._result=I)}if(D._status===1)return D._result.default;throw D._result}var mt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},vt={map:G,forEach:function(D,I,K){G(D,function(){I.apply(this,arguments)},K)},count:function(D){var I=0;return G(D,function(){I++}),I},toArray:function(D){return G(D,function(I){return I})||[]},only:function(D){if(!Q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return dt.Activity=m,dt.Children=vt,dt.Component=x,dt.Fragment=i,dt.Profiler=r,dt.PureComponent=T,dt.StrictMode=s,dt.Suspense=d,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,dt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return L.H.useMemoCache(D)}},dt.cache=function(D){return function(){return D.apply(null,arguments)}},dt.cacheSignal=function(){return null},dt.cloneElement=function(D,I,K){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var W=S({},D.props),rt=D.key;if(I!=null)for(ht in I.key!==void 0&&(rt=""+I.key),I)!Y.call(I,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&I.ref===void 0||(W[ht]=I[ht]);var ht=arguments.length-2;if(ht===1)W.children=K;else if(1<ht){for(var lt=Array(ht),Jt=0;Jt<ht;Jt++)lt[Jt]=arguments[Jt+2];W.children=lt}return $(D.type,rt,W)},dt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},dt.createElement=function(D,I,K){var W,rt={},ht=null;if(I!=null)for(W in I.key!==void 0&&(ht=""+I.key),I)Y.call(I,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(rt[W]=I[W]);var lt=arguments.length-2;if(lt===1)rt.children=K;else if(1<lt){for(var Jt=Array(lt),jt=0;jt<lt;jt++)Jt[jt]=arguments[jt+2];rt.children=Jt}if(D&&D.defaultProps)for(W in lt=D.defaultProps,lt)rt[W]===void 0&&(rt[W]=lt[W]);return $(D,ht,rt)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(D){return{$$typeof:u,render:D}},dt.isValidElement=Q,dt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:Z}},dt.memo=function(D,I){return{$$typeof:f,type:D,compare:I===void 0?null:I}},dt.startTransition=function(D){var I=L.T,K={};L.T=K;try{var W=D(),rt=L.S;rt!==null&&rt(K,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(N,mt)}catch(ht){mt(ht)}finally{I!==null&&K.types!==null&&(I.types=K.types),L.T=I}},dt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},dt.use=function(D){return L.H.use(D)},dt.useActionState=function(D,I,K){return L.H.useActionState(D,I,K)},dt.useCallback=function(D,I){return L.H.useCallback(D,I)},dt.useContext=function(D){return L.H.useContext(D)},dt.useDebugValue=function(){},dt.useDeferredValue=function(D,I){return L.H.useDeferredValue(D,I)},dt.useEffect=function(D,I){return L.H.useEffect(D,I)},dt.useEffectEvent=function(D){return L.H.useEffectEvent(D)},dt.useId=function(){return L.H.useId()},dt.useImperativeHandle=function(D,I,K){return L.H.useImperativeHandle(D,I,K)},dt.useInsertionEffect=function(D,I){return L.H.useInsertionEffect(D,I)},dt.useLayoutEffect=function(D,I){return L.H.useLayoutEffect(D,I)},dt.useMemo=function(D,I){return L.H.useMemo(D,I)},dt.useOptimistic=function(D,I){return L.H.useOptimistic(D,I)},dt.useReducer=function(D,I,K){return L.H.useReducer(D,I,K)},dt.useRef=function(D){return L.H.useRef(D)},dt.useState=function(D){return L.H.useState(D)},dt.useSyncExternalStore=function(D,I,K){return L.H.useSyncExternalStore(D,I,K)},dt.useTransition=function(){return L.H.useTransition()},dt.version="19.2.3",dt}var gg;function Yu(){return gg||(gg=1,vu.exports=J0()),vu.exports}var pi=Yu(),Au={exports:{}},Va={},Su={exports:{}},_u={};var mg;function ty(){return mg||(mg=1,(function(b){function t(z,G){var Z=z.length;z.push(G);t:for(;0<Z;){var mt=Z-1>>>1,vt=z[mt];if(0<r(vt,G))z[mt]=G,z[Z]=vt,Z=mt;else break t}}function i(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var G=z[0],Z=z.pop();if(Z!==G){z[0]=Z;t:for(var mt=0,vt=z.length,D=vt>>>1;mt<D;){var I=2*(mt+1)-1,K=z[I],W=I+1,rt=z[W];if(0>r(K,Z))W<vt&&0>r(rt,K)?(z[mt]=rt,z[W]=Z,mt=W):(z[mt]=K,z[I]=Z,mt=I);else if(W<vt&&0>r(rt,Z))z[mt]=rt,z[W]=Z,mt=W;else break t}}return G}function r(z,G){var Z=z.sortIndex-G.sortIndex;return Z!==0?Z:z.id-G.id}if(b.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;b.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();b.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,m=null,y=3,A=!1,w=!1,S=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R(z){for(var G=i(f);G!==null;){if(G.callback===null)s(f);else if(G.startTime<=z)s(f),G.sortIndex=G.expirationTime,t(d,G);else break;G=i(f)}}function k(z){if(S=!1,R(z),!w)if(i(d)!==null)w=!0,N||(N=!0,ct());else{var G=i(f);G!==null&&Mt(k,G.startTime-z)}}var N=!1,L=-1,Y=5,$=-1;function tt(){return E?!0:!(b.unstable_now()-$<Y)}function Q(){if(E=!1,N){var z=b.unstable_now();$=z;var G=!0;try{t:{w=!1,S&&(S=!1,C(L),L=-1),A=!0;var Z=y;try{e:{for(R(z),m=i(d);m!==null&&!(m.expirationTime>z&&tt());){var mt=m.callback;if(typeof mt=="function"){m.callback=null,y=m.priorityLevel;var vt=mt(m.expirationTime<=z);if(z=b.unstable_now(),typeof vt=="function"){m.callback=vt,R(z),G=!0;break e}m===i(d)&&s(d),R(z)}else s(d);m=i(d)}if(m!==null)G=!0;else{var D=i(f);D!==null&&Mt(k,D.startTime-z),G=!1}}break t}finally{m=null,y=Z,A=!1}G=void 0}}finally{G?ct():N=!1}}}var ct;if(typeof T=="function")ct=function(){T(Q)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,ut=_t.port2;_t.port1.onmessage=Q,ct=function(){ut.postMessage(null)}}else ct=function(){x(Q,0)};function Mt(z,G){L=x(function(){z(b.unstable_now())},G)}b.unstable_IdlePriority=5,b.unstable_ImmediatePriority=1,b.unstable_LowPriority=4,b.unstable_NormalPriority=3,b.unstable_Profiling=null,b.unstable_UserBlockingPriority=2,b.unstable_cancelCallback=function(z){z.callback=null},b.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<z?Math.floor(1e3/z):5},b.unstable_getCurrentPriorityLevel=function(){return y},b.unstable_next=function(z){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var Z=y;y=G;try{return z()}finally{y=Z}},b.unstable_requestPaint=function(){E=!0},b.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=y;y=z;try{return G()}finally{y=Z}},b.unstable_scheduleCallback=function(z,G,Z){var mt=b.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?mt+Z:mt):Z=mt,z){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=Z+vt,z={id:g++,callback:G,priorityLevel:z,startTime:Z,expirationTime:vt,sortIndex:-1},Z>mt?(z.sortIndex=Z,t(f,z),i(d)===null&&z===i(f)&&(S?(C(L),L=-1):S=!0,Mt(k,Z-mt))):(z.sortIndex=vt,t(d,z),w||A||(w=!0,N||(N=!0,ct()))),z},b.unstable_shouldYield=tt,b.unstable_wrapCallback=function(z){var G=y;return function(){var Z=y;y=G;try{return z.apply(this,arguments)}finally{y=Z}}}})(_u)),_u}var bg;function ey(){return bg||(bg=1,Su.exports=ty()),Su.exports}var wu={exports:{}},we={};var yg;function iy(){if(yg)return we;yg=1;var b=Yu();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:d,containerInfo:f,implementation:g}}var c=b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return we.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,we.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},we.flushSync=function(d){var f=c.T,g=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=f,s.p=g,s.d.f()}},we.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},we.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},we.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,m=u(g,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},we.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},we.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,m=u(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},we.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},we.requestFormReset=function(d){s.d.r(d)},we.unstable_batchedUpdates=function(d,f){return d(f)},we.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},we.useFormStatus=function(){return c.H.useHostTransitionStatus()},we.version="19.2.3",we}var vg;function ny(){if(vg)return wu.exports;vg=1;function b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(t){console.error(t)}}return b(),wu.exports=iy(),wu.exports}var Ag;function sy(){if(Ag)return Va;Ag=1;var b=ey(),t=Yu(),i=ny();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,l=n;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return d(h),e;if(p===l)return d(h),n;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=p;else{for(var v=!1,_=h.child;_;){if(_===a){v=!0,a=h,l=p;break}if(_===l){v=!0,l=h,a=p;break}_=_.sibling}if(!v){for(_=p.child;_;){if(_===a){v=!0,a=p,l=h;break}if(_===l){v=!0,l=p,a=h;break}_=_.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function ct(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var _t=Symbol.for("react.client.reference");function ut(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===_t?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case N:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case T:return e.displayName||"Context";case C:return(e._context.displayName||"Context")+".Consumer";case R:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return n=e.displayName||null,n!==null?n:ut(e.type)||"Memo";case Y:n=e._payload,e=e._init;try{return ut(e(n))}catch{}}return null}var Mt=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},mt=[],vt=-1;function D(e){return{current:e}}function I(e){0>vt||(e.current=mt[vt],mt[vt]=null,vt--)}function K(e,n){vt++,mt[vt]=e.current,e.current=n}var W=D(null),rt=D(null),ht=D(null),lt=D(null);function Jt(e,n){switch(K(ht,n),K(rt,e),K(W,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Lp(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Lp(n),e=kp(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(W),K(W,e)}function jt(){I(W),I(rt),I(ht)}function Tn(e){e.memoizedState!==null&&K(lt,e);var n=W.current,a=kp(n,e.type);n!==a&&(K(rt,e),K(W,a))}function $i(e){rt.current===e&&(I(W),I(rt)),lt.current===e&&(I(lt),ja._currentValue=Z)}var Cn,Zs;function Ci(e){if(Cn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Cn=n&&n[1]||"",Zs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+e+Zs}var Jl=!1;function to(e,n){if(!e||Jl)return"";Jl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var j=H}Reflect.construct(e,[],X)}else{try{X.call()}catch(H){j=H}e.call(X.prototype)}}else{try{throw Error()}catch(H){j=H}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&j&&typeof H.stack=="string")return[H.stack,j.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),v=p[0],_=p[1];if(v&&_){var M=v.split(`
`),U=_.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===U.length)for(l=M.length-1,h=U.length-1;1<=l&&0<=h&&M[l]!==U[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==U[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==U[h]){var q=`
`+M[l].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=l&&0<=h);break}}}finally{Jl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ci(a):""}function Mm(e,n){switch(e.tag){case 26:case 27:case 5:return Ci(e.type);case 16:return Ci("Lazy");case 13:return e.child!==n&&n!==null?Ci("Suspense Fallback"):Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return to(e.type,!1);case 11:return to(e.type.render,!1);case 1:return to(e.type,!0);case 31:return Ci("Activity");default:return""}}function ch(e){try{var n="",a=null;do n+=Mm(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var eo=Object.prototype.hasOwnProperty,io=b.unstable_scheduleCallback,no=b.unstable_cancelCallback,Dm=b.unstable_shouldYield,Rm=b.unstable_requestPaint,Fe=b.unstable_now,Nm=b.unstable_getCurrentPriorityLevel,uh=b.unstable_ImmediatePriority,hh=b.unstable_UserBlockingPriority,fr=b.unstable_NormalPriority,Om=b.unstable_LowPriority,dh=b.unstable_IdlePriority,Lm=b.log,km=b.unstable_setDisableYieldValue,Ws=null,Ue=null;function Qi(e){if(typeof Lm=="function"&&km(e),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Ws,e)}catch{}}var je=Math.clz32?Math.clz32:Pm,Bm=Math.log,zm=Math.LN2;function Pm(e){return e>>>=0,e===0?32:31-(Bm(e)/zm|0)|0}var pr=256,gr=262144,mr=4194304;function Mn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function br(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,p=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~p,l!==0?h=Mn(l):(v&=_,v!==0?h=Mn(v):a||(a=_&~e,a!==0&&(h=Mn(a))))):(_=l&~p,_!==0?h=Mn(_):v!==0?h=Mn(v):a||(a=l&~e,a!==0&&(h=Mn(a)))),h===0?0:n!==0&&n!==h&&(n&p)===0&&(p=h&-h,a=n&-n,p>=a||p===32&&(a&4194048)!==0)?n:h}function Js(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Fm(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fh(){var e=mr;return mr<<=1,(mr&62914560)===0&&(mr=4194304),e}function so(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ta(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Um(e,n,a,l,h,p){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,M=e.expirationTimes,U=e.hiddenUpdates;for(a=v&~a;0<a;){var q=31-je(a),X=1<<q;_[q]=0,M[q]=-1;var j=U[q];if(j!==null)for(U[q]=null,q=0;q<j.length;q++){var H=j[q];H!==null&&(H.lane&=-536870913)}a&=~X}l!==0&&ph(e,l,0),p!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=p&~(v&~n))}function ph(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-je(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function gh(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-je(a),h=1<<l;h&n|e[l]&n&&(e[l]|=n),a&=~h}}function mh(e,n){var a=n&-n;return a=(a&42)!==0?1:ao(a),(a&(e.suspendedLanes|n))!==0?0:a}function ao(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ro(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bh(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:ng(e.type))}function yh(e,n){var a=G.p;try{return G.p=e,n()}finally{G.p=a}}var Zi=Math.random().toString(36).slice(2),me="__reactFiber$"+Zi,Me="__reactProps$"+Zi,ts="__reactContainer$"+Zi,lo="__reactEvents$"+Zi,jm="__reactListeners$"+Zi,Hm="__reactHandles$"+Zi,vh="__reactResources$"+Zi,ea="__reactMarker$"+Zi;function oo(e){delete e[me],delete e[Me],delete e[lo],delete e[jm],delete e[Hm]}function es(e){var n=e[me];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ts]||a[me]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Hp(e);e!==null;){if(a=e[me])return a;e=Hp(e)}return n}e=a,a=e.parentNode}return null}function is(e){if(e=e[me]||e[ts]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ia(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function ns(e){var n=e[vh];return n||(n=e[vh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function de(e){e[ea]=!0}var Ah=new Set,Sh={};function Dn(e,n){ss(e,n),ss(e+"Capture",n)}function ss(e,n){for(Sh[e]=n,e=0;e<n.length;e++)Ah.add(n[e])}var Im=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_h={},wh={};function Gm(e){return eo.call(wh,e)?!0:eo.call(_h,e)?!1:Im.test(e)?wh[e]=!0:(_h[e]=!0,!1)}function yr(e,n,a){if(Gm(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function vr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Mi(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Ze(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function qm(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,p.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function co(e){if(!e._valueTracker){var n=xh(e)?"checked":"value";e._valueTracker=qm(e,n,""+e[n])}}function Eh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=xh(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function Ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vm=/[\n"\\]/g;function We(e){return e.replace(Vm,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function uo(e,n,a,l,h,p,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ze(n)):e.value!==""+Ze(n)&&(e.value=""+Ze(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?ho(e,v,Ze(n)):a!=null?ho(e,v,Ze(a)):l!=null&&e.removeAttribute("value"),h==null&&p!=null&&(e.defaultChecked=!!p),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Ze(_):e.removeAttribute("name")}function Th(e,n,a,l,h,p,v,_){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),n!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){co(e);return}a=a!=null?""+Ze(a):"",n=n!=null?""+Ze(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),co(e)}function ho(e,n,a){n==="number"&&Ar(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function as(e,n,a,l){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ze(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Ch(e,n,a){if(n!=null&&(n=""+Ze(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ze(a):""}function Mh(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(Mt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ze(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),co(e)}function rs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Xm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dh(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||Xm.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Rh(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Dh(e,h,l)}else for(var p in n)n.hasOwnProperty(p)&&Dh(e,p,n[p])}function fo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ym=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Km=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sr(e){return Km.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Di(){}var po=null;function go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ls=null,os=null;function Nh(e){var n=is(e);if(n&&(e=n.stateNode)){var a=e[Me]||null;t:switch(e=n.stateNode,n.type){case"input":if(uo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+We(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var h=l[Me]||null;if(!h)throw Error(s(90));uo(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&Eh(l)}break t;case"textarea":Ch(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&as(e,!!a.multiple,n,!1)}}}var mo=!1;function Oh(e,n,a){if(mo)return e(n,a);mo=!0;try{var l=e(n);return l}finally{if(mo=!1,(ls!==null||os!==null)&&(ol(),ls&&(n=ls,e=os,os=ls=null,Nh(n),e)))for(n=0;n<e.length;n++)Nh(e[n])}}function na(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Me]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bo=!1;if(Ri)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){bo=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{bo=!1}var Wi=null,yo=null,_r=null;function Lh(){if(_r)return _r;var e,n=yo,a=n.length,l,h="value"in Wi?Wi.value:Wi.textContent,p=h.length;for(e=0;e<a&&n[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&n[a-l]===h[p-l];l++);return _r=h.slice(e,1<l?1-l:void 0)}function wr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function xr(){return!0}function kh(){return!1}function De(e){function n(a,l,h,p,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(p):p[_]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?xr:kh,this.isPropagationStopped=kh,this}return m(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),n}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Er=De(Rn),aa=m({},Rn,{view:0,detail:0}),$m=De(aa),vo,Ao,ra,Tr=m({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ra&&(ra&&e.type==="mousemove"?(vo=e.screenX-ra.screenX,Ao=e.screenY-ra.screenY):Ao=vo=0,ra=e),vo)},movementY:function(e){return"movementY"in e?e.movementY:Ao}}),Bh=De(Tr),Qm=m({},Tr,{dataTransfer:0}),Zm=De(Qm),Wm=m({},aa,{relatedTarget:0}),So=De(Wm),Jm=m({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),tb=De(Jm),eb=m({},Rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ib=De(eb),nb=m({},Rn,{data:0}),zh=De(nb),sb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ab={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=rb[e])?!!n[e]:!1}function _o(){return lb}var ob=m({},aa,{key:function(e){if(e.key){var n=sb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=wr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ab[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(e){return e.type==="keypress"?wr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cb=De(ob),ub=m({},Tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ph=De(ub),hb=m({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),db=De(hb),fb=m({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pb=De(fb),gb=m({},Tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mb=De(gb),bb=m({},Rn,{newState:0,oldState:0}),yb=De(bb),vb=[9,13,27,32],wo=Ri&&"CompositionEvent"in window,la=null;Ri&&"documentMode"in document&&(la=document.documentMode);var Ab=Ri&&"TextEvent"in window&&!la,Fh=Ri&&(!wo||la&&8<la&&11>=la),Uh=" ",jh=!1;function Hh(e,n){switch(e){case"keyup":return vb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ih(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function Sb(e,n){switch(e){case"compositionend":return Ih(n);case"keypress":return n.which!==32?null:(jh=!0,Uh);case"textInput":return e=n.data,e===Uh&&jh?null:e;default:return null}}function _b(e,n){if(cs)return e==="compositionend"||!wo&&Hh(e,n)?(e=Lh(),_r=yo=Wi=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Fh&&n.locale!=="ko"?null:n.data;default:return null}}var wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!wb[e.type]:n==="textarea"}function qh(e,n,a,l){ls?os?os.push(l):os=[l]:ls=l,n=gl(n,"onChange"),0<n.length&&(a=new Er("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var oa=null,ca=null;function xb(e){Cp(e,0)}function Cr(e){var n=ia(e);if(Eh(n))return e}function Vh(e,n){if(e==="change")return n}var Xh=!1;if(Ri){var xo;if(Ri){var Eo="oninput"in document;if(!Eo){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),Eo=typeof Yh.oninput=="function"}xo=Eo}else xo=!1;Xh=xo&&(!document.documentMode||9<document.documentMode)}function Kh(){oa&&(oa.detachEvent("onpropertychange",$h),ca=oa=null)}function $h(e){if(e.propertyName==="value"&&Cr(ca)){var n=[];qh(n,ca,e,go(e)),Oh(xb,n)}}function Eb(e,n,a){e==="focusin"?(Kh(),oa=n,ca=a,oa.attachEvent("onpropertychange",$h)):e==="focusout"&&Kh()}function Tb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cr(ca)}function Cb(e,n){if(e==="click")return Cr(n)}function Mb(e,n){if(e==="input"||e==="change")return Cr(n)}function Db(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var He=typeof Object.is=="function"?Object.is:Db;function ua(e,n){if(He(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!eo.call(n,h)||!He(e[h],n[h]))return!1}return!0}function Qh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zh(e,n){var a=Qh(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Qh(a)}}function Wh(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Wh(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Jh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ar(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Ar(e.document)}return n}function To(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Rb=Ri&&"documentMode"in document&&11>=document.documentMode,us=null,Co=null,ha=null,Mo=!1;function td(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mo||us==null||us!==Ar(l)||(l=us,"selectionStart"in l&&To(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ha&&ua(ha,l)||(ha=l,l=gl(Co,"onSelect"),0<l.length&&(n=new Er("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=us)))}function Nn(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var hs={animationend:Nn("Animation","AnimationEnd"),animationiteration:Nn("Animation","AnimationIteration"),animationstart:Nn("Animation","AnimationStart"),transitionrun:Nn("Transition","TransitionRun"),transitionstart:Nn("Transition","TransitionStart"),transitioncancel:Nn("Transition","TransitionCancel"),transitionend:Nn("Transition","TransitionEnd")},Do={},ed={};Ri&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function On(e){if(Do[e])return Do[e];if(!hs[e])return e;var n=hs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in ed)return Do[e]=n[a];return e}var id=On("animationend"),nd=On("animationiteration"),sd=On("animationstart"),Nb=On("transitionrun"),Ob=On("transitionstart"),Lb=On("transitioncancel"),ad=On("transitionend"),rd=new Map,Ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ro.push("scrollEnd");function hi(e,n){rd.set(e,n),Dn(n,[e])}var Mr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Je=[],ds=0,No=0;function Dr(){for(var e=ds,n=No=ds=0;n<e;){var a=Je[n];Je[n++]=null;var l=Je[n];Je[n++]=null;var h=Je[n];Je[n++]=null;var p=Je[n];if(Je[n++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}p!==0&&ld(a,h,p)}}function Rr(e,n,a,l){Je[ds++]=e,Je[ds++]=n,Je[ds++]=a,Je[ds++]=l,No|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Oo(e,n,a,l){return Rr(e,n,a,l),Nr(e)}function Ln(e,n){return Rr(e,null,null,n),Nr(e)}function ld(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,p=e.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(h=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,h&&n!==null&&(h=31-je(a),e=p.hiddenUpdates,l=e[h],l===null?e[h]=[n]:l.push(n),n.lane=a|536870912),p):null}function Nr(e){if(50<La)throw La=0,Hc=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var fs={};function kb(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ie(e,n,a,l){return new kb(e,n,a,l)}function Lo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ni(e,n){var a=e.alternate;return a===null?(a=Ie(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function od(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Or(e,n,a,l,h,p){var v=0;if(l=e,typeof e=="function")Lo(e)&&(v=1);else if(typeof e=="string")v=U0(e,a,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case $:return e=Ie(31,a,n,h),e.elementType=$,e.lanes=p,e;case S:return kn(a.children,h,p,n);case E:v=8,h|=24;break;case x:return e=Ie(12,a,n,h|2),e.elementType=x,e.lanes=p,e;case k:return e=Ie(13,a,n,h),e.elementType=k,e.lanes=p,e;case N:return e=Ie(19,a,n,h),e.elementType=N,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:v=10;break t;case C:v=9;break t;case R:v=11;break t;case L:v=14;break t;case Y:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=Ie(v,a,n,h),n.elementType=e,n.type=l,n.lanes=p,n}function kn(e,n,a,l){return e=Ie(7,e,l,n),e.lanes=a,e}function ko(e,n,a){return e=Ie(6,e,null,n),e.lanes=a,e}function cd(e){var n=Ie(18,null,null,0);return n.stateNode=e,n}function Bo(e,n,a){return n=Ie(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ud=new WeakMap;function ti(e,n){if(typeof e=="object"&&e!==null){var a=ud.get(e);return a!==void 0?a:(n={value:e,source:n,stack:ch(n)},ud.set(e,n),n)}return{value:e,source:n,stack:ch(n)}}var ps=[],gs=0,Lr=null,da=0,ei=[],ii=0,Ji=null,mi=1,bi="";function Oi(e,n){ps[gs++]=da,ps[gs++]=Lr,Lr=e,da=n}function hd(e,n,a){ei[ii++]=mi,ei[ii++]=bi,ei[ii++]=Ji,Ji=e;var l=mi;e=bi;var h=32-je(l)-1;l&=~(1<<h),a+=1;var p=32-je(n)+h;if(30<p){var v=h-h%5;p=(l&(1<<v)-1).toString(32),l>>=v,h-=v,mi=1<<32-je(n)+h|a<<h|l,bi=p+e}else mi=1<<p|a<<h|l,bi=e}function zo(e){e.return!==null&&(Oi(e,1),hd(e,1,0))}function Po(e){for(;e===Lr;)Lr=ps[--gs],ps[gs]=null,da=ps[--gs],ps[gs]=null;for(;e===Ji;)Ji=ei[--ii],ei[ii]=null,bi=ei[--ii],ei[ii]=null,mi=ei[--ii],ei[ii]=null}function dd(e,n){ei[ii++]=mi,ei[ii++]=bi,ei[ii++]=Ji,mi=n.id,bi=n.overflow,Ji=e}var be=null,Gt=null,Et=!1,tn=null,ni=!1,Fo=Error(s(519));function en(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fa(ti(n,e)),Fo}function fd(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[me]=e,n[Me]=l,a){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(a=0;a<Ba.length;a++)St(Ba[a],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":St("invalid",n),Th(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":St("invalid",n);break;case"textarea":St("invalid",n),Mh(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Np(n.textContent,a)?(l.popover!=null&&(St("beforetoggle",n),St("toggle",n)),l.onScroll!=null&&St("scroll",n),l.onScrollEnd!=null&&St("scrollend",n),l.onClick!=null&&(n.onclick=Di),n=!0):n=!1,n||en(e,!0)}function pd(e){for(be=e.return;be;)switch(be.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:be=be.return}}function ms(e){if(e!==be)return!1;if(!Et)return pd(e),Et=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||iu(e.type,e.memoizedProps)),a=!a),a&&Gt&&en(e),pd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Gt=jp(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Gt=jp(e)}else n===27?(n=Gt,mn(e.type)?(e=lu,lu=null,Gt=e):Gt=n):Gt=be?ai(e.stateNode.nextSibling):null;return!0}function Bn(){Gt=be=null,Et=!1}function Uo(){var e=tn;return e!==null&&(Le===null?Le=e:Le.push.apply(Le,e),tn=null),e}function fa(e){tn===null?tn=[e]:tn.push(e)}var jo=D(null),zn=null,Li=null;function nn(e,n,a){K(jo,n._currentValue),n._currentValue=a}function ki(e){e._currentValue=jo.current,I(jo)}function Ho(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function Io(e,n,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var p=h.dependencies;if(p!==null){var v=h.child;p=p.firstContext;t:for(;p!==null;){var _=p;p=h;for(var M=0;M<n.length;M++)if(_.context===n[M]){p.lanes|=a,_=p.alternate,_!==null&&(_.lanes|=a),Ho(p.return,a,e),l||(v=null);break t}p=_.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,p=v.alternate,p!==null&&(p.lanes|=a),Ho(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function bs(e,n,a,l){e=null;for(var h=n,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=h.type;He(h.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(h===lt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ja):e=[ja])}h=h.return}e!==null&&Io(n,e,a,l),n.flags|=262144}function kr(e){for(e=e.firstContext;e!==null;){if(!He(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pn(e){zn=e,Li=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ye(e){return gd(zn,e)}function Br(e,n){return zn===null&&Pn(e),gd(e,n)}function gd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Li===null){if(e===null)throw Error(s(308));Li=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Li=Li.next=n;return a}var Bb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},zb=b.unstable_scheduleCallback,Pb=b.unstable_NormalPriority,ne={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Go(){return{controller:new Bb,data:new Map,refCount:0}}function pa(e){e.refCount--,e.refCount===0&&zb(Pb,function(){e.controller.abort()})}var ga=null,qo=0,ys=0,vs=null;function Fb(e,n){if(ga===null){var a=ga=[];qo=0,ys=Yc(),vs={status:"pending",value:void 0,then:function(l){a.push(l)}}}return qo++,n.then(md,md),n}function md(){if(--qo===0&&ga!==null){vs!==null&&(vs.status="fulfilled");var e=ga;ga=null,ys=0,vs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Ub(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var bd=z.S;z.S=function(e,n){ep=Fe(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Fb(e,n),bd!==null&&bd(e,n)};var Fn=D(null);function Vo(){var e=Fn.current;return e!==null?e:Ht.pooledCache}function zr(e,n){n===null?K(Fn,Fn.current):K(Fn,n.pool)}function yd(){var e=Vo();return e===null?null:{parent:ne._currentValue,pool:e}}var As=Error(s(460)),Xo=Error(s(474)),Pr=Error(s(542)),Fr={then:function(){}};function vd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ad(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Di,Di),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_d(e),e;default:if(typeof n.status=="string")n.then(Di,Di);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_d(e),e}throw jn=n,As}}function Un(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(jn=a,As):a}}var jn=null;function Sd(){if(jn===null)throw Error(s(459));var e=jn;return jn=null,e}function _d(e){if(e===As||e===Pr)throw Error(s(483))}var Ss=null,ma=0;function Ur(e){var n=ma;return ma+=1,Ss===null&&(Ss=[]),Ad(Ss,e,n)}function ba(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function jr(e,n){throw n.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function wd(e){function n(P,O){if(e){var F=P.deletions;F===null?(P.deletions=[O],P.flags|=16):F.push(O)}}function a(P,O){if(!e)return null;for(;O!==null;)n(P,O),O=O.sibling;return null}function l(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=Ni(P,O),P.index=0,P.sibling=null,P}function p(P,O,F){return P.index=F,e?(F=P.alternate,F!==null?(F=F.index,F<O?(P.flags|=67108866,O):F):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function _(P,O,F,V){return O===null||O.tag!==6?(O=ko(F,P.mode,V),O.return=P,O):(O=h(O,F),O.return=P,O)}function M(P,O,F,V){var st=F.type;return st===S?q(P,O,F.props.children,V,F.key):O!==null&&(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Y&&Un(st)===O.type)?(O=h(O,F.props),ba(O,F),O.return=P,O):(O=Or(F.type,F.key,F.props,null,P.mode,V),ba(O,F),O.return=P,O)}function U(P,O,F,V){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=Bo(F,P.mode,V),O.return=P,O):(O=h(O,F.children||[]),O.return=P,O)}function q(P,O,F,V,st){return O===null||O.tag!==7?(O=kn(F,P.mode,V,st),O.return=P,O):(O=h(O,F),O.return=P,O)}function X(P,O,F){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ko(""+O,P.mode,F),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case A:return F=Or(O.type,O.key,O.props,null,P.mode,F),ba(F,O),F.return=P,F;case w:return O=Bo(O,P.mode,F),O.return=P,O;case Y:return O=Un(O),X(P,O,F)}if(Mt(O)||ct(O))return O=kn(O,P.mode,F,null),O.return=P,O;if(typeof O.then=="function")return X(P,Ur(O),F);if(O.$$typeof===T)return X(P,Br(P,O),F);jr(P,O)}return null}function j(P,O,F,V){var st=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return st!==null?null:_(P,O,""+F,V);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===st?M(P,O,F,V):null;case w:return F.key===st?U(P,O,F,V):null;case Y:return F=Un(F),j(P,O,F,V)}if(Mt(F)||ct(F))return st!==null?null:q(P,O,F,V,null);if(typeof F.then=="function")return j(P,O,Ur(F),V);if(F.$$typeof===T)return j(P,O,Br(P,F),V);jr(P,F)}return null}function H(P,O,F,V,st){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return P=P.get(F)||null,_(O,P,""+V,st);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return P=P.get(V.key===null?F:V.key)||null,M(O,P,V,st);case w:return P=P.get(V.key===null?F:V.key)||null,U(O,P,V,st);case Y:return V=Un(V),H(P,O,F,V,st)}if(Mt(V)||ct(V))return P=P.get(F)||null,q(O,P,V,st,null);if(typeof V.then=="function")return H(P,O,F,Ur(V),st);if(V.$$typeof===T)return H(P,O,F,Br(O,V),st);jr(O,V)}return null}function it(P,O,F,V){for(var st=null,Dt=null,nt=O,yt=O=0,xt=null;nt!==null&&yt<F.length;yt++){nt.index>yt?(xt=nt,nt=null):xt=nt.sibling;var Rt=j(P,nt,F[yt],V);if(Rt===null){nt===null&&(nt=xt);break}e&&nt&&Rt.alternate===null&&n(P,nt),O=p(Rt,O,yt),Dt===null?st=Rt:Dt.sibling=Rt,Dt=Rt,nt=xt}if(yt===F.length)return a(P,nt),Et&&Oi(P,yt),st;if(nt===null){for(;yt<F.length;yt++)nt=X(P,F[yt],V),nt!==null&&(O=p(nt,O,yt),Dt===null?st=nt:Dt.sibling=nt,Dt=nt);return Et&&Oi(P,yt),st}for(nt=l(nt);yt<F.length;yt++)xt=H(nt,P,yt,F[yt],V),xt!==null&&(e&&xt.alternate!==null&&nt.delete(xt.key===null?yt:xt.key),O=p(xt,O,yt),Dt===null?st=xt:Dt.sibling=xt,Dt=xt);return e&&nt.forEach(function(Sn){return n(P,Sn)}),Et&&Oi(P,yt),st}function ot(P,O,F,V){if(F==null)throw Error(s(151));for(var st=null,Dt=null,nt=O,yt=O=0,xt=null,Rt=F.next();nt!==null&&!Rt.done;yt++,Rt=F.next()){nt.index>yt?(xt=nt,nt=null):xt=nt.sibling;var Sn=j(P,nt,Rt.value,V);if(Sn===null){nt===null&&(nt=xt);break}e&&nt&&Sn.alternate===null&&n(P,nt),O=p(Sn,O,yt),Dt===null?st=Sn:Dt.sibling=Sn,Dt=Sn,nt=xt}if(Rt.done)return a(P,nt),Et&&Oi(P,yt),st;if(nt===null){for(;!Rt.done;yt++,Rt=F.next())Rt=X(P,Rt.value,V),Rt!==null&&(O=p(Rt,O,yt),Dt===null?st=Rt:Dt.sibling=Rt,Dt=Rt);return Et&&Oi(P,yt),st}for(nt=l(nt);!Rt.done;yt++,Rt=F.next())Rt=H(nt,P,yt,Rt.value,V),Rt!==null&&(e&&Rt.alternate!==null&&nt.delete(Rt.key===null?yt:Rt.key),O=p(Rt,O,yt),Dt===null?st=Rt:Dt.sibling=Rt,Dt=Rt);return e&&nt.forEach(function(Q0){return n(P,Q0)}),Et&&Oi(P,yt),st}function Ft(P,O,F,V){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var st=F.key;O!==null;){if(O.key===st){if(st=F.type,st===S){if(O.tag===7){a(P,O.sibling),V=h(O,F.props.children),V.return=P,P=V;break t}}else if(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Y&&Un(st)===O.type){a(P,O.sibling),V=h(O,F.props),ba(V,F),V.return=P,P=V;break t}a(P,O);break}else n(P,O);O=O.sibling}F.type===S?(V=kn(F.props.children,P.mode,V,F.key),V.return=P,P=V):(V=Or(F.type,F.key,F.props,null,P.mode,V),ba(V,F),V.return=P,P=V)}return v(P);case w:t:{for(st=F.key;O!==null;){if(O.key===st)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){a(P,O.sibling),V=h(O,F.children||[]),V.return=P,P=V;break t}else{a(P,O);break}else n(P,O);O=O.sibling}V=Bo(F,P.mode,V),V.return=P,P=V}return v(P);case Y:return F=Un(F),Ft(P,O,F,V)}if(Mt(F))return it(P,O,F,V);if(ct(F)){if(st=ct(F),typeof st!="function")throw Error(s(150));return F=st.call(F),ot(P,O,F,V)}if(typeof F.then=="function")return Ft(P,O,Ur(F),V);if(F.$$typeof===T)return Ft(P,O,Br(P,F),V);jr(P,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,O!==null&&O.tag===6?(a(P,O.sibling),V=h(O,F),V.return=P,P=V):(a(P,O),V=ko(F,P.mode,V),V.return=P,P=V),v(P)):a(P,O)}return function(P,O,F,V){try{ma=0;var st=Ft(P,O,F,V);return Ss=null,st}catch(nt){if(nt===As||nt===Pr)throw nt;var Dt=Ie(29,nt,null,P.mode);return Dt.lanes=V,Dt.return=P,Dt}}}var Hn=wd(!0),xd=wd(!1),sn=!1;function Yo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ko(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function an(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rn(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Nt&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Nr(e),ld(e,null,a),n}return Rr(e,l,n,a),Nr(e)}function ya(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,gh(e,a)}}function $o(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?h=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?h=p=n:p=p.next=n}else h=p=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Qo=!1;function va(){if(Qo){var e=vs;if(e!==null)throw e}}function Aa(e,n,a,l){Qo=!1;var h=e.updateQueue;sn=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var M=_,U=M.next;M.next=null,v===null?p=U:v.next=U,v=M;var q=e.alternate;q!==null&&(q=q.updateQueue,_=q.lastBaseUpdate,_!==v&&(_===null?q.firstBaseUpdate=U:_.next=U,q.lastBaseUpdate=M))}if(p!==null){var X=h.baseState;v=0,q=U=M=null,_=p;do{var j=_.lane&-536870913,H=j!==_.lane;if(H?(wt&j)===j:(l&j)===j){j!==0&&j===ys&&(Qo=!0),q!==null&&(q=q.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var it=e,ot=_;j=n;var Ft=a;switch(ot.tag){case 1:if(it=ot.payload,typeof it=="function"){X=it.call(Ft,X,j);break t}X=it;break t;case 3:it.flags=it.flags&-65537|128;case 0:if(it=ot.payload,j=typeof it=="function"?it.call(Ft,X,j):it,j==null)break t;X=m({},X,j);break t;case 2:sn=!0}}j=_.callback,j!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[j]:H.push(j))}else H={lane:j,tag:_.tag,payload:_.payload,callback:_.callback,next:null},q===null?(U=q=H,M=X):q=q.next=H,v|=j;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;H=_,_=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);q===null&&(M=X),h.baseState=M,h.firstBaseUpdate=U,h.lastBaseUpdate=q,p===null&&(h.shared.lanes=0),hn|=v,e.lanes=v,e.memoizedState=X}}function Ed(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Td(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ed(a[e],n)}var _s=D(null),Hr=D(0);function Cd(e,n){e=Gi,K(Hr,e),K(_s,n),Gi=e|n.baseLanes}function Zo(){K(Hr,Gi),K(_s,_s.current)}function Wo(){Gi=Hr.current,I(_s),I(Hr)}var Ge=D(null),si=null;function ln(e){var n=e.alternate;K(te,te.current&1),K(Ge,e),si===null&&(n===null||_s.current!==null||n.memoizedState!==null)&&(si=e)}function Jo(e){K(te,te.current),K(Ge,e),si===null&&(si=e)}function Md(e){e.tag===22?(K(te,te.current),K(Ge,e),si===null&&(si=e)):on()}function on(){K(te,te.current),K(Ge,Ge.current)}function qe(e){I(Ge),si===e&&(si=null),I(te)}var te=D(0);function Ir(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||au(a)||ru(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Bi=0,bt=null,zt=null,se=null,Gr=!1,ws=!1,In=!1,qr=0,Sa=0,xs=null,jb=0;function Qt(){throw Error(s(321))}function tc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!He(e[a],n[a]))return!1;return!0}function ec(e,n,a,l,h,p){return Bi=p,bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,z.H=e===null||e.memoizedState===null?df:mc,In=!1,p=a(l,h),In=!1,ws&&(p=Rd(n,a,l,h)),Dd(e),p}function Dd(e){z.H=xa;var n=zt!==null&&zt.next!==null;if(Bi=0,se=zt=bt=null,Gr=!1,Sa=0,xs=null,n)throw Error(s(300));e===null||ae||(e=e.dependencies,e!==null&&kr(e)&&(ae=!0))}function Rd(e,n,a,l){bt=e;var h=0;do{if(ws&&(xs=null),Sa=0,ws=!1,25<=h)throw Error(s(301));if(h+=1,se=zt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}z.H=ff,p=n(a,l)}while(ws);return p}function Hb(){var e=z.H,n=e.useState()[0];return n=typeof n.then=="function"?_a(n):n,e=e.useState()[0],(zt!==null?zt.memoizedState:null)!==e&&(bt.flags|=1024),n}function ic(){var e=qr!==0;return qr=0,e}function nc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function sc(e){if(Gr){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Gr=!1}Bi=0,se=zt=bt=null,ws=!1,Sa=qr=0,xs=null}function xe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?bt.memoizedState=se=e:se=se.next=e,se}function ee(){if(zt===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var n=se===null?bt.memoizedState:se.next;if(n!==null)se=n,zt=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},se===null?bt.memoizedState=se=e:se=se.next=e}return se}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _a(e){var n=Sa;return Sa+=1,xs===null&&(xs=[]),e=Ad(xs,e,n),n=bt,(se===null?n.memoizedState:se.next)===null&&(n=n.alternate,z.H=n===null||n.memoizedState===null?df:mc),e}function Xr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _a(e);if(e.$$typeof===T)return ye(e)}throw Error(s(438,String(e)))}function ac(e){var n=null,a=bt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=bt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Vr(),bt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=tt;return n.index++,a}function zi(e,n){return typeof n=="function"?n(e):n}function Yr(e){var n=ee();return rc(n,zt,e)}function rc(e,n,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,p=l.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}n.baseQueue=h=p,l.pending=null}if(p=e.baseState,h===null)e.memoizedState=p;else{n=h.next;var _=v=null,M=null,U=n,q=!1;do{var X=U.lane&-536870913;if(X!==U.lane?(wt&X)===X:(Bi&X)===X){var j=U.revertLane;if(j===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),X===ys&&(q=!0);else if((Bi&j)===j){U=U.next,j===ys&&(q=!0);continue}else X={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(_=M=X,v=p):M=M.next=X,bt.lanes|=j,hn|=j;X=U.action,In&&a(p,X),p=U.hasEagerState?U.eagerState:a(p,X)}else j={lane:X,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(_=M=j,v=p):M=M.next=j,bt.lanes|=X,hn|=X;U=U.next}while(U!==null&&U!==n);if(M===null?v=p:M.next=_,!He(p,e.memoizedState)&&(ae=!0,q&&(a=vs,a!==null)))throw a;e.memoizedState=p,e.baseState=v,e.baseQueue=M,l.lastRenderedState=p}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function lc(e){var n=ee(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,p=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do p=e(p,v.action),v=v.next;while(v!==h);He(p,n.memoizedState)||(ae=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),a.lastRenderedState=p}return[p,l]}function Nd(e,n,a){var l=bt,h=ee(),p=Et;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!He((zt||h).memoizedState,a);if(v&&(h.memoizedState=a,ae=!0),h=h.queue,uc(kd.bind(null,l,h,e),[e]),h.getSnapshot!==n||v||se!==null&&se.memoizedState.tag&1){if(l.flags|=2048,Es(9,{destroy:void 0},Ld.bind(null,l,h,a,n),null),Ht===null)throw Error(s(349));p||(Bi&127)!==0||Od(l,n,a)}return a}function Od(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=bt.updateQueue,n===null?(n=Vr(),bt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Ld(e,n,a,l){n.value=a,n.getSnapshot=l,Bd(n)&&zd(e)}function kd(e,n,a){return a(function(){Bd(n)&&zd(e)})}function Bd(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!He(e,a)}catch{return!0}}function zd(e){var n=Ln(e,2);n!==null&&ke(n,e,2)}function oc(e){var n=xe();if(typeof e=="function"){var a=e;if(e=a(),In){Qi(!0);try{a()}finally{Qi(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},n}function Pd(e,n,a,l){return e.baseState=a,rc(e,zt,typeof l=="function"?l:zi)}function Ib(e,n,a,l,h){if(Qr(e))throw Error(s(485));if(e=n.action,e!==null){var p={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};z.T!==null?a(!0):p.isTransition=!1,l(p),a=n.pending,a===null?(p.next=n.pending=p,Fd(n,p)):(p.next=a.next,n.pending=a.next=p)}}function Fd(e,n){var a=n.action,l=n.payload,h=e.state;if(n.isTransition){var p=z.T,v={};z.T=v;try{var _=a(h,l),M=z.S;M!==null&&M(v,_),Ud(e,n,_)}catch(U){cc(e,n,U)}finally{p!==null&&v.types!==null&&(p.types=v.types),z.T=p}}else try{p=a(h,l),Ud(e,n,p)}catch(U){cc(e,n,U)}}function Ud(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){jd(e,n,l)},function(l){return cc(e,n,l)}):jd(e,n,a)}function jd(e,n,a){n.status="fulfilled",n.value=a,Hd(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Fd(e,a)))}function cc(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Hd(n),n=n.next;while(n!==l)}e.action=null}function Hd(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Id(e,n){return n}function Gd(e,n){if(Et){var a=Ht.formState;if(a!==null){t:{var l=bt;if(Et){if(Gt){e:{for(var h=Gt,p=ni;h.nodeType!==8;){if(!p){h=null;break e}if(h=ai(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Gt=ai(h.nextSibling),l=h.data==="F!";break t}}en(l)}l=!1}l&&(n=a[0])}}return a=xe(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:n},a.queue=l,a=cf.bind(null,bt,l),l.dispatch=a,l=oc(!1),p=gc.bind(null,bt,!1,l.queue),l=xe(),h={state:n,dispatch:null,action:e,pending:null},l.queue=h,a=Ib.bind(null,bt,h,p,a),h.dispatch=a,l.memoizedState=e,[n,a,!1]}function qd(e){var n=ee();return Vd(n,zt,e)}function Vd(e,n,a){if(n=rc(e,n,Id)[0],e=Yr(zi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=_a(n)}catch(v){throw v===As?Pr:v}else l=n;n=ee();var h=n.queue,p=h.dispatch;return a!==n.memoizedState&&(bt.flags|=2048,Es(9,{destroy:void 0},Gb.bind(null,h,a),null)),[l,p,e]}function Gb(e,n){e.action=n}function Xd(e){var n=ee(),a=zt;if(a!==null)return Vd(n,a,e);ee(),n=n.memoizedState,a=ee();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function Es(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=bt.updateQueue,n===null&&(n=Vr(),bt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Yd(){return ee().memoizedState}function Kr(e,n,a,l){var h=xe();bt.flags|=e,h.memoizedState=Es(1|n,{destroy:void 0},a,l===void 0?null:l)}function $r(e,n,a,l){var h=ee();l=l===void 0?null:l;var p=h.memoizedState.inst;zt!==null&&l!==null&&tc(l,zt.memoizedState.deps)?h.memoizedState=Es(n,p,a,l):(bt.flags|=e,h.memoizedState=Es(1|n,p,a,l))}function Kd(e,n){Kr(8390656,8,e,n)}function uc(e,n){$r(2048,8,e,n)}function qb(e){bt.flags|=4;var n=bt.updateQueue;if(n===null)n=Vr(),bt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function $d(e){var n=ee().memoizedState;return qb({ref:n,nextImpl:e}),function(){if((Nt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Qd(e,n){return $r(4,2,e,n)}function Zd(e,n){return $r(4,4,e,n)}function Wd(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Jd(e,n,a){a=a!=null?a.concat([e]):null,$r(4,4,Wd.bind(null,n,e),a)}function hc(){}function tf(e,n){var a=ee();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&tc(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function ef(e,n){var a=ee();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&tc(n,l[1]))return l[0];if(l=e(),In){Qi(!0);try{e()}finally{Qi(!1)}}return a.memoizedState=[l,n],l}function dc(e,n,a){return a===void 0||(Bi&1073741824)!==0&&(wt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=np(),bt.lanes|=e,hn|=e,a)}function nf(e,n,a,l){return He(a,n)?a:_s.current!==null?(e=dc(e,a,l),He(e,n)||(ae=!0),e):(Bi&42)===0||(Bi&1073741824)!==0&&(wt&261930)===0?(ae=!0,e.memoizedState=a):(e=np(),bt.lanes|=e,hn|=e,n)}function sf(e,n,a,l,h){var p=G.p;G.p=p!==0&&8>p?p:8;var v=z.T,_={};z.T=_,gc(e,!1,n,a);try{var M=h(),U=z.S;if(U!==null&&U(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var q=Ub(M,l);wa(e,n,q,Ye(e))}else wa(e,n,l,Ye(e))}catch(X){wa(e,n,{then:function(){},status:"rejected",reason:X},Ye())}finally{G.p=p,v!==null&&_.types!==null&&(v.types=_.types),z.T=v}}function Vb(){}function fc(e,n,a,l){if(e.tag!==5)throw Error(s(476));var h=af(e).queue;sf(e,h,n,Z,a===null?Vb:function(){return rf(e),a(l)})}function af(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:Z},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function rf(e){var n=af(e);n.next===null&&(n=e.alternate.memoizedState),wa(e,n.next.queue,{},Ye())}function pc(){return ye(ja)}function lf(){return ee().memoizedState}function of(){return ee().memoizedState}function Xb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Ye();e=an(a);var l=rn(n,e,a);l!==null&&(ke(l,n,a),ya(l,n,a)),n={cache:Go()},e.payload=n;return}n=n.return}}function Yb(e,n,a){var l=Ye();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Qr(e)?uf(n,a):(a=Oo(e,n,a,l),a!==null&&(ke(a,e,l),hf(a,n,l)))}function cf(e,n,a){var l=Ye();wa(e,n,a,l)}function wa(e,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qr(e))uf(n,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var v=n.lastRenderedState,_=p(v,a);if(h.hasEagerState=!0,h.eagerState=_,He(_,v))return Rr(e,n,h,0),Ht===null&&Dr(),!1}catch{}if(a=Oo(e,n,h,l),a!==null)return ke(a,e,l),hf(a,n,l),!0}return!1}function gc(e,n,a,l){if(l={lane:2,revertLane:Yc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qr(e)){if(n)throw Error(s(479))}else n=Oo(e,a,l,2),n!==null&&ke(n,e,2)}function Qr(e){var n=e.alternate;return e===bt||n!==null&&n===bt}function uf(e,n){ws=Gr=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function hf(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,gh(e,a)}}var xa={readContext:ye,use:Xr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};xa.useEffectEvent=Qt;var df={readContext:ye,use:Xr,useCallback:function(e,n){return xe().memoizedState=[e,n===void 0?null:n],e},useContext:ye,useEffect:Kd,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Kr(4194308,4,Wd.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Kr(4194308,4,e,n)},useInsertionEffect:function(e,n){Kr(4,2,e,n)},useMemo:function(e,n){var a=xe();n=n===void 0?null:n;var l=e();if(In){Qi(!0);try{e()}finally{Qi(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=xe();if(a!==void 0){var h=a(n);if(In){Qi(!0);try{a(n)}finally{Qi(!1)}}}else h=n;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=Yb.bind(null,bt,e),[l.memoizedState,e]},useRef:function(e){var n=xe();return e={current:e},n.memoizedState=e},useState:function(e){e=oc(e);var n=e.queue,a=cf.bind(null,bt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:hc,useDeferredValue:function(e,n){var a=xe();return dc(a,e,n)},useTransition:function(){var e=oc(!1);return e=sf.bind(null,bt,e.queue,!0,!1),xe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=bt,h=xe();if(Et){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Ht===null)throw Error(s(349));(wt&127)!==0||Od(l,n,a)}h.memoizedState=a;var p={value:a,getSnapshot:n};return h.queue=p,Kd(kd.bind(null,l,p,e),[e]),l.flags|=2048,Es(9,{destroy:void 0},Ld.bind(null,l,p,a,n),null),a},useId:function(){var e=xe(),n=Ht.identifierPrefix;if(Et){var a=bi,l=mi;a=(l&~(1<<32-je(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=qr++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=jb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:pc,useFormState:Gd,useActionState:Gd,useOptimistic:function(e){var n=xe();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=gc.bind(null,bt,!0,a),a.dispatch=n,[e,n]},useMemoCache:ac,useCacheRefresh:function(){return xe().memoizedState=Xb.bind(null,bt)},useEffectEvent:function(e){var n=xe(),a={impl:e};return n.memoizedState=a,function(){if((Nt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},mc={readContext:ye,use:Xr,useCallback:tf,useContext:ye,useEffect:uc,useImperativeHandle:Jd,useInsertionEffect:Qd,useLayoutEffect:Zd,useMemo:ef,useReducer:Yr,useRef:Yd,useState:function(){return Yr(zi)},useDebugValue:hc,useDeferredValue:function(e,n){var a=ee();return nf(a,zt.memoizedState,e,n)},useTransition:function(){var e=Yr(zi)[0],n=ee().memoizedState;return[typeof e=="boolean"?e:_a(e),n]},useSyncExternalStore:Nd,useId:lf,useHostTransitionStatus:pc,useFormState:qd,useActionState:qd,useOptimistic:function(e,n){var a=ee();return Pd(a,zt,e,n)},useMemoCache:ac,useCacheRefresh:of};mc.useEffectEvent=$d;var ff={readContext:ye,use:Xr,useCallback:tf,useContext:ye,useEffect:uc,useImperativeHandle:Jd,useInsertionEffect:Qd,useLayoutEffect:Zd,useMemo:ef,useReducer:lc,useRef:Yd,useState:function(){return lc(zi)},useDebugValue:hc,useDeferredValue:function(e,n){var a=ee();return zt===null?dc(a,e,n):nf(a,zt.memoizedState,e,n)},useTransition:function(){var e=lc(zi)[0],n=ee().memoizedState;return[typeof e=="boolean"?e:_a(e),n]},useSyncExternalStore:Nd,useId:lf,useHostTransitionStatus:pc,useFormState:Xd,useActionState:Xd,useOptimistic:function(e,n){var a=ee();return zt!==null?Pd(a,zt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ac,useCacheRefresh:of};ff.useEffectEvent=$d;function bc(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:m({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var yc={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Ye(),h=an(l);h.payload=n,a!=null&&(h.callback=a),n=rn(e,h,l),n!==null&&(ke(n,e,l),ya(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Ye(),h=an(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=rn(e,h,l),n!==null&&(ke(n,e,l),ya(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Ye(),l=an(a);l.tag=2,n!=null&&(l.callback=n),n=rn(e,l,a),n!==null&&(ke(n,e,a),ya(n,e,a))}};function pf(e,n,a,l,h,p,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,v):n.prototype&&n.prototype.isPureReactComponent?!ua(a,l)||!ua(h,p):!0}function gf(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&yc.enqueueReplaceState(n,n.state,null)}function Gn(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=m({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function mf(e){Mr(e)}function bf(e){console.error(e)}function yf(e){Mr(e)}function Zr(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function vf(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function vc(e,n,a){return a=an(a),a.tag=3,a.payload={element:null},a.callback=function(){Zr(e,n)},a}function Af(e){return e=an(e),e.tag=3,e}function Sf(e,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;e.payload=function(){return h(p)},e.callback=function(){vf(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){vf(n,a,l),typeof h!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function Kb(e,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&bs(n,a,h,!0),a=Ge.current,a!==null){switch(a.tag){case 31:case 13:return si===null?cl():a.alternate===null&&Zt===0&&(Zt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Fr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),qc(e,l,h)),!1;case 22:return a.flags|=65536,l===Fr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),qc(e,l,h)),!1}throw Error(s(435,a.tag))}return qc(e,l,h),cl(),!1}if(Et)return n=Ge.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Fo&&(e=Error(s(422),{cause:l}),fa(ti(e,a)))):(l!==Fo&&(n=Error(s(423),{cause:l}),fa(ti(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=ti(l,a),h=vc(e.stateNode,l,h),$o(e,h),Zt!==4&&(Zt=2)),!1;var p=Error(s(520),{cause:l});if(p=ti(p,a),Oa===null?Oa=[p]:Oa.push(p),Zt!==4&&(Zt=2),n===null)return!0;l=ti(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=vc(a.stateNode,l,e),$o(a,e),!1;case 1:if(n=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(dn===null||!dn.has(p))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Af(h),Sf(h,e,a,l),$o(a,h),!1}a=a.return}while(a!==null);return!1}var Ac=Error(s(461)),ae=!1;function ve(e,n,a,l){n.child=e===null?xd(n,null,a,l):Hn(n,e.child,a,l)}function _f(e,n,a,l,h){a=a.render;var p=n.ref;if("ref"in l){var v={};for(var _ in l)_!=="ref"&&(v[_]=l[_])}else v=l;return Pn(n),l=ec(e,n,a,v,p,h),_=ic(),e!==null&&!ae?(nc(e,n,h),Pi(e,n,h)):(Et&&_&&zo(n),n.flags|=1,ve(e,n,l,h),n.child)}function wf(e,n,a,l,h){if(e===null){var p=a.type;return typeof p=="function"&&!Lo(p)&&p.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=p,xf(e,n,p,l,h)):(e=Or(a.type,null,l,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,!Mc(e,h)){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:ua,a(v,l)&&e.ref===n.ref)return Pi(e,n,h)}return n.flags|=1,e=Ni(p,l),e.ref=n.ref,e.return=n,n.child=e}function xf(e,n,a,l,h){if(e!==null){var p=e.memoizedProps;if(ua(p,l)&&e.ref===n.ref)if(ae=!1,n.pendingProps=l=p,Mc(e,h))(e.flags&131072)!==0&&(ae=!0);else return n.lanes=e.lanes,Pi(e,n,h)}return Sc(e,n,a,l,h)}function Ef(e,n,a,l){var h=l.children,p=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(l=n.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~p}else l=0,n.child=null;return Tf(e,n,p,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&zr(n,p!==null?p.cachePool:null),p!==null?Cd(n,p):Zo(),Md(n);else return l=n.lanes=536870912,Tf(e,n,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(zr(n,p.cachePool),Cd(n,p),on(),n.memoizedState=null):(e!==null&&zr(n,null),Zo(),on());return ve(e,n,h,a),n.child}function Ea(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Tf(e,n,a,l,h){var p=Vo();return p=p===null?null:{parent:ne._currentValue,pool:p},n.memoizedState={baseLanes:a,cachePool:p},e!==null&&zr(n,null),Zo(),Md(n),e!==null&&bs(e,n,l,!0),n.childLanes=h,null}function Wr(e,n){return n=tl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Cf(e,n,a){return Hn(n,e.child,null,a),e=Wr(n,n.pendingProps),e.flags|=2,qe(n),n.memoizedState=null,e}function $b(e,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Et){if(l.mode==="hidden")return e=Wr(n,l),n.lanes=536870912,Ea(null,e);if(Jo(n),(e=Gt)?(e=Up(e,ni),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ji!==null?{id:mi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=cd(e),a.return=n,n.child=a,be=n,Gt=null)):e=null,e===null)throw en(n);return n.lanes=536870912,null}return Wr(n,l)}var p=e.memoizedState;if(p!==null){var v=p.dehydrated;if(Jo(n),h)if(n.flags&256)n.flags&=-257,n=Cf(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(ae||bs(e,n,a,!1),h=(a&e.childLanes)!==0,ae||h){if(l=Ht,l!==null&&(v=mh(l,a),v!==0&&v!==p.retryLane))throw p.retryLane=v,Ln(e,v),ke(l,e,v),Ac;cl(),n=Cf(e,n,a)}else e=p.treeContext,Gt=ai(v.nextSibling),be=n,Et=!0,tn=null,ni=!1,e!==null&&dd(n,e),n=Wr(n,l),n.flags|=4096;return n}return e=Ni(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Jr(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Sc(e,n,a,l,h){return Pn(n),a=ec(e,n,a,l,void 0,h),l=ic(),e!==null&&!ae?(nc(e,n,h),Pi(e,n,h)):(Et&&l&&zo(n),n.flags|=1,ve(e,n,a,h),n.child)}function Mf(e,n,a,l,h,p){return Pn(n),n.updateQueue=null,a=Rd(n,l,a,h),Dd(e),l=ic(),e!==null&&!ae?(nc(e,n,p),Pi(e,n,p)):(Et&&l&&zo(n),n.flags|=1,ve(e,n,a,p),n.child)}function Df(e,n,a,l,h){if(Pn(n),n.stateNode===null){var p=fs,v=a.contextType;typeof v=="object"&&v!==null&&(p=ye(v)),p=new a(l,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=yc,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=l,p.state=n.memoizedState,p.refs={},Yo(n),v=a.contextType,p.context=typeof v=="object"&&v!==null?ye(v):fs,p.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(bc(n,a,v,l),p.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&yc.enqueueReplaceState(p,p.state,null),Aa(n,l,p,h),va(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){p=n.stateNode;var _=n.memoizedProps,M=Gn(a,_);p.props=M;var U=p.context,q=a.contextType;v=fs,typeof q=="object"&&q!==null&&(v=ye(q));var X=a.getDerivedStateFromProps;q=typeof X=="function"||typeof p.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,q||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_||U!==v)&&gf(n,p,l,v),sn=!1;var j=n.memoizedState;p.state=j,Aa(n,l,p,h),va(),U=n.memoizedState,_||j!==U||sn?(typeof X=="function"&&(bc(n,a,X,l),U=n.memoizedState),(M=sn||pf(n,a,M,l,j,U,v))?(q||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=U),p.props=l,p.state=U,p.context=v,l=M):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{p=n.stateNode,Ko(e,n),v=n.memoizedProps,q=Gn(a,v),p.props=q,X=n.pendingProps,j=p.context,U=a.contextType,M=fs,typeof U=="object"&&U!==null&&(M=ye(U)),_=a.getDerivedStateFromProps,(U=typeof _=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==X||j!==M)&&gf(n,p,l,M),sn=!1,j=n.memoizedState,p.state=j,Aa(n,l,p,h),va();var H=n.memoizedState;v!==X||j!==H||sn||e!==null&&e.dependencies!==null&&kr(e.dependencies)?(typeof _=="function"&&(bc(n,a,_,l),H=n.memoizedState),(q=sn||pf(n,a,q,l,j,H,M)||e!==null&&e.dependencies!==null&&kr(e.dependencies))?(U||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,H,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,H,M)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=H),p.props=l,p.state=H,p.context=M,l=q):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),l=!1)}return p=l,Jr(e,n),l=(n.flags&128)!==0,p||l?(p=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,e!==null&&l?(n.child=Hn(n,e.child,null,h),n.child=Hn(n,null,a,h)):ve(e,n,a,h),n.memoizedState=p.state,e=n.child):e=Pi(e,n,h),e}function Rf(e,n,a,l){return Bn(),n.flags|=256,ve(e,n,a,l),n.child}var _c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wc(e){return{baseLanes:e,cachePool:yd()}}function xc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Xe),e}function Nf(e,n,a){var l=n.pendingProps,h=!1,p=(n.flags&128)!==0,v;if((v=p)||(v=e!==null&&e.memoizedState===null?!1:(te.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Et){if(h?ln(n):on(),(e=Gt)?(e=Up(e,ni),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ji!==null?{id:mi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=cd(e),a.return=n,n.child=a,be=n,Gt=null)):e=null,e===null)throw en(n);return ru(e)?n.lanes=32:n.lanes=536870912,null}var _=l.children;return l=l.fallback,h?(on(),h=n.mode,_=tl({mode:"hidden",children:_},h),l=kn(l,h,a,null),_.return=n,l.return=n,_.sibling=l,n.child=_,l=n.child,l.memoizedState=wc(a),l.childLanes=xc(e,v,a),n.memoizedState=_c,Ea(null,l)):(ln(n),Ec(n,_))}var M=e.memoizedState;if(M!==null&&(_=M.dehydrated,_!==null)){if(p)n.flags&256?(ln(n),n.flags&=-257,n=Tc(e,n,a)):n.memoizedState!==null?(on(),n.child=e.child,n.flags|=128,n=null):(on(),_=l.fallback,h=n.mode,l=tl({mode:"visible",children:l.children},h),_=kn(_,h,a,null),_.flags|=2,l.return=n,_.return=n,l.sibling=_,n.child=l,Hn(n,e.child,null,a),l=n.child,l.memoizedState=wc(a),l.childLanes=xc(e,v,a),n.memoizedState=_c,n=Ea(null,l));else if(ln(n),ru(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var U=v.dgst;v=U,l=Error(s(419)),l.stack="",l.digest=v,fa({value:l,source:null,stack:null}),n=Tc(e,n,a)}else if(ae||bs(e,n,a,!1),v=(a&e.childLanes)!==0,ae||v){if(v=Ht,v!==null&&(l=mh(v,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,Ln(e,l),ke(v,e,l),Ac;au(_)||cl(),n=Tc(e,n,a)}else au(_)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Gt=ai(_.nextSibling),be=n,Et=!0,tn=null,ni=!1,e!==null&&dd(n,e),n=Ec(n,l.children),n.flags|=4096);return n}return h?(on(),_=l.fallback,h=n.mode,M=e.child,U=M.sibling,l=Ni(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,U!==null?_=Ni(U,_):(_=kn(_,h,a,null),_.flags|=2),_.return=n,l.return=n,l.sibling=_,n.child=l,Ea(null,l),l=n.child,_=e.child.memoizedState,_===null?_=wc(a):(h=_.cachePool,h!==null?(M=ne._currentValue,h=h.parent!==M?{parent:M,pool:M}:h):h=yd(),_={baseLanes:_.baseLanes|a,cachePool:h}),l.memoizedState=_,l.childLanes=xc(e,v,a),n.memoizedState=_c,Ea(e.child,l)):(ln(n),a=e.child,e=a.sibling,a=Ni(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Ec(e,n){return n=tl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function tl(e,n){return e=Ie(22,e,null,n),e.lanes=0,e}function Tc(e,n,a){return Hn(n,e.child,null,a),e=Ec(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Of(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Ho(e.return,n,a)}function Cc(e,n,a,l,h,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:p}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=p)}function Lf(e,n,a){var l=n.pendingProps,h=l.revealOrder,p=l.tail;l=l.children;var v=te.current,_=(v&2)!==0;if(_?(v=v&1|2,n.flags|=128):v&=1,K(te,v),ve(e,n,l,a),l=Et?da:0,!_&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Of(e,a,n);else if(e.tag===19)Of(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&Ir(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),Cc(n,!1,h,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Ir(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Cc(n,!0,a,null,p,l);break;case"together":Cc(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Pi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),hn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(bs(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Ni(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ni(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Mc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&kr(e)))}function Qb(e,n,a){switch(n.tag){case 3:Jt(n,n.stateNode.containerInfo),nn(n,ne,e.memoizedState.cache),Bn();break;case 27:case 5:Tn(n);break;case 4:Jt(n,n.stateNode.containerInfo);break;case 10:nn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Jo(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ln(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Nf(e,n,a):(ln(n),e=Pi(e,n,a),e!==null?e.sibling:null);ln(n);break;case 19:var h=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(bs(e,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return Lf(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),K(te,te.current),l)break;return null;case 22:return n.lanes=0,Ef(e,n,a,n.pendingProps);case 24:nn(n,ne,e.memoizedState.cache)}return Pi(e,n,a)}function kf(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)ae=!0;else{if(!Mc(e,a)&&(n.flags&128)===0)return ae=!1,Qb(e,n,a);ae=(e.flags&131072)!==0}else ae=!1,Et&&(n.flags&1048576)!==0&&hd(n,da,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(e=Un(n.elementType),n.type=e,typeof e=="function")Lo(e)?(l=Gn(e,l),n.tag=1,n=Df(null,n,e,l,a)):(n.tag=0,n=Sc(null,n,e,l,a));else{if(e!=null){var h=e.$$typeof;if(h===R){n.tag=11,n=_f(null,n,e,l,a);break t}else if(h===L){n.tag=14,n=wf(null,n,e,l,a);break t}}throw n=ut(e)||e,Error(s(306,n,""))}}return n;case 0:return Sc(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=Gn(l,n.pendingProps),Df(e,n,l,h,a);case 3:t:{if(Jt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var p=n.memoizedState;h=p.element,Ko(e,n),Aa(n,l,null,a);var v=n.memoizedState;if(l=v.cache,nn(n,ne,l),l!==p.cache&&Io(n,[ne],a,!0),va(),l=v.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=Rf(e,n,l,a);break t}else if(l!==h){h=ti(Error(s(424)),n),fa(h),n=Rf(e,n,l,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Gt=ai(e.firstChild),be=n,Et=!0,tn=null,ni=!0,a=xd(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Bn(),l===h){n=Pi(e,n,a);break t}ve(e,n,l,a)}n=n.child}return n;case 26:return Jr(e,n),e===null?(a=Vp(n.type,null,n.pendingProps,null))?n.memoizedState=a:Et||(a=n.type,e=n.pendingProps,l=ml(ht.current).createElement(a),l[me]=n,l[Me]=e,Ae(l,a,e),de(l),n.stateNode=l):n.memoizedState=Vp(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Tn(n),e===null&&Et&&(l=n.stateNode=Ip(n.type,n.pendingProps,ht.current),be=n,ni=!0,h=Gt,mn(n.type)?(lu=h,Gt=ai(l.firstChild)):Gt=h),ve(e,n,n.pendingProps.children,a),Jr(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Et&&((h=l=Gt)&&(l=T0(l,n.type,n.pendingProps,ni),l!==null?(n.stateNode=l,be=n,Gt=ai(l.firstChild),ni=!1,h=!0):h=!1),h||en(n)),Tn(n),h=n.type,p=n.pendingProps,v=e!==null?e.memoizedProps:null,l=p.children,iu(h,p)?l=null:v!==null&&iu(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=ec(e,n,Hb,null,null,a),ja._currentValue=h),Jr(e,n),ve(e,n,l,a),n.child;case 6:return e===null&&Et&&((e=a=Gt)&&(a=C0(a,n.pendingProps,ni),a!==null?(n.stateNode=a,be=n,Gt=null,e=!0):e=!1),e||en(n)),null;case 13:return Nf(e,n,a);case 4:return Jt(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Hn(n,null,l,a):ve(e,n,l,a),n.child;case 11:return _f(e,n,n.type,n.pendingProps,a);case 7:return ve(e,n,n.pendingProps,a),n.child;case 8:return ve(e,n,n.pendingProps.children,a),n.child;case 12:return ve(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,nn(n,n.type,l.value),ve(e,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Pn(n),h=ye(h),l=l(h),n.flags|=1,ve(e,n,l,a),n.child;case 14:return wf(e,n,n.type,n.pendingProps,a);case 15:return xf(e,n,n.type,n.pendingProps,a);case 19:return Lf(e,n,a);case 31:return $b(e,n,a);case 22:return Ef(e,n,a,n.pendingProps);case 24:return Pn(n),l=ye(ne),e===null?(h=Vo(),h===null&&(h=Ht,p=Go(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=a),h=p),n.memoizedState={parent:l,cache:h},Yo(n),nn(n,ne,h)):((e.lanes&a)!==0&&(Ko(e,n),Aa(n,null,null,a),va()),h=e.memoizedState,p=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),nn(n,ne,l)):(l=p.cache,nn(n,ne,l),l!==h.cache&&Io(n,[ne],a,!0))),ve(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Fi(e){e.flags|=4}function Dc(e,n,a,l,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(lp())e.flags|=8192;else throw jn=Fr,Xo}else e.flags&=-16777217}function Bf(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qp(n))if(lp())e.flags|=8192;else throw jn=Fr,Xo}function el(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?fh():536870912,e.lanes|=n,Ds|=n)}function Ta(e,n){if(!Et)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function Zb(e,n,a){var l=n.pendingProps;switch(Po(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(n),null;case 1:return qt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ki(ne),jt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ms(n)?Fi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Uo())),qt(n),null;case 26:var h=n.type,p=n.memoizedState;return e===null?(Fi(n),p!==null?(qt(n),Bf(n,p)):(qt(n),Dc(n,h,null,l,a))):p?p!==e.memoizedState?(Fi(n),qt(n),Bf(n,p)):(qt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Fi(n),qt(n),Dc(n,h,e,l,a)),null;case 27:if($i(n),a=ht.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Fi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return qt(n),null}e=W.current,ms(n)?fd(n):(e=Ip(h,l,a),n.stateNode=e,Fi(n))}return qt(n),null;case 5:if($i(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Fi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return qt(n),null}if(p=W.current,ms(n))fd(n);else{var v=ml(ht.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}p[me]=n,p[Me]=l;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=p;t:switch(Ae(p,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Fi(n)}}return qt(n),Dc(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Fi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=ht.current,ms(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,h=be,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[me]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Np(e.nodeValue,a)),e||en(n,!0)}else e=ml(e).createTextNode(l),e[me]=n,n.stateNode=e}return qt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=ms(n),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[me]=n}else Bn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),e=!1}else a=Uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(qe(n),n):(qe(n),null);if((n.flags&128)!==0)throw Error(s(558))}return qt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ms(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[me]=n}else Bn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),h=!1}else h=Uo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(qe(n),n):(qe(n),null)}return qe(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),el(n,n.updateQueue),qt(n),null);case 4:return jt(),e===null&&Zc(n.stateNode.containerInfo),qt(n),null;case 10:return ki(n.type),qt(n),null;case 19:if(I(te),l=n.memoizedState,l===null)return qt(n),null;if(h=(n.flags&128)!==0,p=l.rendering,p===null)if(h)Ta(l,!1);else{if(Zt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=Ir(e),p!==null){for(n.flags|=128,Ta(l,!1),e=p.updateQueue,n.updateQueue=e,el(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)od(a,e),a=a.sibling;return K(te,te.current&1|2),Et&&Oi(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Fe()>rl&&(n.flags|=128,h=!0,Ta(l,!1),n.lanes=4194304)}else{if(!h)if(e=Ir(p),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,el(n,e),Ta(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Et)return qt(n),null}else 2*Fe()-l.renderingStartTime>rl&&a!==536870912&&(n.flags|=128,h=!0,Ta(l,!1),n.lanes=4194304);l.isBackwards?(p.sibling=n.child,n.child=p):(e=l.last,e!==null?e.sibling=p:n.child=p,l.last=p)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Fe(),e.sibling=null,a=te.current,K(te,h?a&1|2:a&1),Et&&Oi(n,l.treeForkCount),e):(qt(n),null);case 22:case 23:return qe(n),Wo(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(qt(n),n.subtreeFlags&6&&(n.flags|=8192)):qt(n),a=n.updateQueue,a!==null&&el(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&I(Fn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),ki(ne),qt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Wb(e,n){switch(Po(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ki(ne),jt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return $i(n),null;case 31:if(n.memoizedState!==null){if(qe(n),n.alternate===null)throw Error(s(340));Bn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(qe(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Bn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return I(te),null;case 4:return jt(),null;case 10:return ki(n.type),null;case 22:case 23:return qe(n),Wo(),e!==null&&I(Fn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ki(ne),null;case 25:return null;default:return null}}function zf(e,n){switch(Po(n),n.tag){case 3:ki(ne),jt();break;case 26:case 27:case 5:$i(n);break;case 4:jt();break;case 31:n.memoizedState!==null&&qe(n);break;case 13:qe(n);break;case 19:I(te);break;case 10:ki(n.type);break;case 22:case 23:qe(n),Wo(),e!==null&&I(Fn);break;case 24:ki(ne)}}function Ca(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var p=a.create,v=a.inst;l=p(),v.destroy=l}a=a.next}while(a!==h)}}catch(_){Bt(n,n.return,_)}}function cn(e,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&e)===e){var v=l.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,h=n;var M=a,U=_;try{U()}catch(q){Bt(h,M,q)}}}l=l.next}while(l!==p)}}catch(q){Bt(n,n.return,q)}}function Pf(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Td(n,a)}catch(l){Bt(e,e.return,l)}}}function Ff(e,n,a){a.props=Gn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Bt(e,n,l)}}function Ma(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){Bt(e,n,h)}}function yi(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Bt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Bt(e,n,h)}else a.current=null}function Uf(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Bt(e,e.return,h)}}function Rc(e,n,a){try{var l=e.stateNode;A0(l,e.type,a,n),l[Me]=n}catch(h){Bt(e,e.return,h)}}function jf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mn(e.type)||e.tag===4}function Nc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oc(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Di));else if(l!==4&&(l===27&&mn(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Oc(e,n,a),e=e.sibling;e!==null;)Oc(e,n,a),e=e.sibling}function il(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&mn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(il(e,n,a),e=e.sibling;e!==null;)il(e,n,a),e=e.sibling}function Hf(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Ae(n,l,a),n[me]=e,n[Me]=a}catch(p){Bt(e,e.return,p)}}var Ui=!1,re=!1,Lc=!1,If=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Jb(e,n){if(e=e.containerInfo,tu=wl,e=Jh(e),To(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var v=0,_=-1,M=-1,U=0,q=0,X=e,j=null;e:for(;;){for(var H;X!==a||h!==0&&X.nodeType!==3||(_=v+h),X!==p||l!==0&&X.nodeType!==3||(M=v+l),X.nodeType===3&&(v+=X.nodeValue.length),(H=X.firstChild)!==null;)j=X,X=H;for(;;){if(X===e)break e;if(j===a&&++U===h&&(_=v),j===p&&++q===l&&(M=v),(H=X.nextSibling)!==null)break;X=j,j=X.parentNode}X=H}a=_===-1||M===-1?null:{start:_,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(eu={focusedElem:e,selectionRange:a},wl=!1,fe=n;fe!==null;)if(n=fe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,fe=e;else for(;fe!==null;){switch(n=fe,p=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=n,h=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var it=Gn(a.type,h);e=l.getSnapshotBeforeUpdate(it,p),l.__reactInternalSnapshotBeforeUpdate=e}catch(ot){Bt(a,a.return,ot)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)su(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":su(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,fe=e;break}fe=n.return}}function Gf(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Hi(e,a),l&4&&Ca(5,a);break;case 1:if(Hi(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Bt(a,a.return,v)}else{var h=Gn(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Bt(a,a.return,v)}}l&64&&Pf(a),l&512&&Ma(a,a.return);break;case 3:if(Hi(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Td(e,n)}catch(v){Bt(a,a.return,v)}}break;case 27:n===null&&l&4&&Hf(a);case 26:case 5:Hi(e,a),n===null&&l&4&&Uf(a),l&512&&Ma(a,a.return);break;case 12:Hi(e,a);break;case 31:Hi(e,a),l&4&&Xf(e,a);break;case 13:Hi(e,a),l&4&&Yf(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=o0.bind(null,a),M0(e,a))));break;case 22:if(l=a.memoizedState!==null||Ui,!l){n=n!==null&&n.memoizedState!==null||re,h=Ui;var p=re;Ui=l,(re=n)&&!p?Ii(e,a,(a.subtreeFlags&8772)!==0):Hi(e,a),Ui=h,re=p}break;case 30:break;default:Hi(e,a)}}function qf(e){var n=e.alternate;n!==null&&(e.alternate=null,qf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&oo(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Vt=null,Re=!1;function ji(e,n,a){for(a=a.child;a!==null;)Vf(e,n,a),a=a.sibling}function Vf(e,n,a){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Ws,a)}catch{}switch(a.tag){case 26:re||yi(a,n),ji(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:re||yi(a,n);var l=Vt,h=Re;mn(a.type)&&(Vt=a.stateNode,Re=!1),ji(e,n,a),Pa(a.stateNode),Vt=l,Re=h;break;case 5:re||yi(a,n);case 6:if(l=Vt,h=Re,Vt=null,ji(e,n,a),Vt=l,Re=h,Vt!==null)if(Re)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(a.stateNode)}catch(p){Bt(a,n,p)}else try{Vt.removeChild(a.stateNode)}catch(p){Bt(a,n,p)}break;case 18:Vt!==null&&(Re?(e=Vt,Pp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ps(e)):Pp(Vt,a.stateNode));break;case 4:l=Vt,h=Re,Vt=a.stateNode.containerInfo,Re=!0,ji(e,n,a),Vt=l,Re=h;break;case 0:case 11:case 14:case 15:cn(2,a,n),re||cn(4,a,n),ji(e,n,a);break;case 1:re||(yi(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ff(a,n,l)),ji(e,n,a);break;case 21:ji(e,n,a);break;case 22:re=(l=re)||a.memoizedState!==null,ji(e,n,a),re=l;break;default:ji(e,n,a)}}function Xf(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(a){Bt(n,n.return,a)}}}function Yf(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(a){Bt(n,n.return,a)}}function t0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new If),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new If),n;default:throw Error(s(435,e.tag))}}function nl(e,n){var a=t0(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=c0.bind(null,e,l);l.then(h,h)}})}function Ne(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],p=e,v=n,_=v;t:for(;_!==null;){switch(_.tag){case 27:if(mn(_.type)){Vt=_.stateNode,Re=!1;break t}break;case 5:Vt=_.stateNode,Re=!1;break t;case 3:case 4:Vt=_.stateNode.containerInfo,Re=!0;break t}_=_.return}if(Vt===null)throw Error(s(160));Vf(p,v,h),Vt=null,Re=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Kf(n,e),n=n.sibling}var di=null;function Kf(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ne(n,e),Oe(e),l&4&&(cn(3,e,e.return),Ca(3,e),cn(5,e,e.return));break;case 1:Ne(n,e),Oe(e),l&512&&(re||a===null||yi(a,a.return)),l&64&&Ui&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=di;if(Ne(n,e),Oe(e),l&512&&(re||a===null||yi(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[ea]||p[me]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),Ae(p,l,a),p[me]=e,de(p),l=p;break t;case"link":var v=Kp("link","href",h).get(l+(a.href||""));if(v){for(var _=0;_<v.length;_++)if(p=v[_],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(_,1);break e}}p=h.createElement(l),Ae(p,l,a),h.head.appendChild(p);break;case"meta":if(v=Kp("meta","content",h).get(l+(a.content||""))){for(_=0;_<v.length;_++)if(p=v[_],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(_,1);break e}}p=h.createElement(l),Ae(p,l,a),h.head.appendChild(p);break;default:throw Error(s(468,l))}p[me]=e,de(p),l=p}e.stateNode=l}else $p(h,e.type,e.stateNode);else e.stateNode=Yp(h,l,e.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?$p(h,e.type,e.stateNode):Yp(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Rc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ne(n,e),Oe(e),l&512&&(re||a===null||yi(a,a.return)),a!==null&&l&4&&Rc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ne(n,e),Oe(e),l&512&&(re||a===null||yi(a,a.return)),e.flags&32){h=e.stateNode;try{rs(h,"")}catch(it){Bt(e,e.return,it)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,Rc(e,h,a!==null?a.memoizedProps:h)),l&1024&&(Lc=!0);break;case 6:if(Ne(n,e),Oe(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(it){Bt(e,e.return,it)}}break;case 3:if(vl=null,h=di,di=bl(n.containerInfo),Ne(n,e),di=h,Oe(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ps(n.containerInfo)}catch(it){Bt(e,e.return,it)}Lc&&(Lc=!1,$f(e));break;case 4:l=di,di=bl(e.stateNode.containerInfo),Ne(n,e),Oe(e),di=l;break;case 12:Ne(n,e),Oe(e);break;case 31:Ne(n,e),Oe(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,nl(e,l)));break;case 13:Ne(n,e),Oe(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(al=Fe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,nl(e,l)));break;case 22:h=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,U=Ui,q=re;if(Ui=U||h,re=q||M,Ne(n,e),re=q,Ui=U,Oe(e),l&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||M||Ui||re||qn(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(p=M.stateNode,h)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=M.stateNode;var X=M.memoizedProps.style,j=X!=null&&X.hasOwnProperty("display")?X.display:null;_.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(it){Bt(M,M.return,it)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(it){Bt(M,M.return,it)}}}else if(n.tag===18){if(a===null){M=n;try{var H=M.stateNode;h?Fp(H,!0):Fp(M.stateNode,!1)}catch(it){Bt(M,M.return,it)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,nl(e,a))));break;case 19:Ne(n,e),Oe(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,nl(e,l)));break;case 30:break;case 21:break;default:Ne(n,e),Oe(e)}}function Oe(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(jf(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,p=Nc(e);il(e,p,h);break;case 5:var v=a.stateNode;a.flags&32&&(rs(v,""),a.flags&=-33);var _=Nc(e);il(e,_,v);break;case 3:case 4:var M=a.stateNode.containerInfo,U=Nc(e);Oc(e,U,M);break;default:throw Error(s(161))}}catch(q){Bt(e,e.return,q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function $f(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;$f(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Hi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Gf(e,n.alternate,n),n=n.sibling}function qn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:cn(4,n,n.return),qn(n);break;case 1:yi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Ff(n,n.return,a),qn(n);break;case 27:Pa(n.stateNode);case 26:case 5:yi(n,n.return),qn(n);break;case 22:n.memoizedState===null&&qn(n);break;case 30:qn(n);break;default:qn(n)}e=e.sibling}}function Ii(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=e,p=n,v=p.flags;switch(p.tag){case 0:case 11:case 15:Ii(h,p,a),Ca(4,p);break;case 1:if(Ii(h,p,a),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){Bt(l,l.return,U)}if(l=p,h=l.updateQueue,h!==null){var _=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)Ed(M[h],_)}catch(U){Bt(l,l.return,U)}}a&&v&64&&Pf(p),Ma(p,p.return);break;case 27:Hf(p);case 26:case 5:Ii(h,p,a),a&&l===null&&v&4&&Uf(p),Ma(p,p.return);break;case 12:Ii(h,p,a);break;case 31:Ii(h,p,a),a&&v&4&&Xf(h,p);break;case 13:Ii(h,p,a),a&&v&4&&Yf(h,p);break;case 22:p.memoizedState===null&&Ii(h,p,a),Ma(p,p.return);break;case 30:break;default:Ii(h,p,a)}n=n.sibling}}function kc(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&pa(a))}function Bc(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&pa(e))}function fi(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Qf(e,n,a,l),n=n.sibling}function Qf(e,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:fi(e,n,a,l),h&2048&&Ca(9,n);break;case 1:fi(e,n,a,l);break;case 3:fi(e,n,a,l),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&pa(e)));break;case 12:if(h&2048){fi(e,n,a,l),e=n.stateNode;try{var p=n.memoizedProps,v=p.id,_=p.onPostCommit;typeof _=="function"&&_(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Bt(n,n.return,M)}}else fi(e,n,a,l);break;case 31:fi(e,n,a,l);break;case 13:fi(e,n,a,l);break;case 23:break;case 22:p=n.stateNode,v=n.alternate,n.memoizedState!==null?p._visibility&2?fi(e,n,a,l):Da(e,n):p._visibility&2?fi(e,n,a,l):(p._visibility|=2,Ts(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&kc(v,n);break;case 24:fi(e,n,a,l),h&2048&&Bc(n.alternate,n);break;default:fi(e,n,a,l)}}function Ts(e,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=e,v=n,_=a,M=l,U=v.flags;switch(v.tag){case 0:case 11:case 15:Ts(p,v,_,M,h),Ca(8,v);break;case 23:break;case 22:var q=v.stateNode;v.memoizedState!==null?q._visibility&2?Ts(p,v,_,M,h):Da(p,v):(q._visibility|=2,Ts(p,v,_,M,h)),h&&U&2048&&kc(v.alternate,v);break;case 24:Ts(p,v,_,M,h),h&&U&2048&&Bc(v.alternate,v);break;default:Ts(p,v,_,M,h)}n=n.sibling}}function Da(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,h=l.flags;switch(l.tag){case 22:Da(a,l),h&2048&&kc(l.alternate,l);break;case 24:Da(a,l),h&2048&&Bc(l.alternate,l);break;default:Da(a,l)}n=n.sibling}}var Ra=8192;function Cs(e,n,a){if(e.subtreeFlags&Ra)for(e=e.child;e!==null;)Zf(e,n,a),e=e.sibling}function Zf(e,n,a){switch(e.tag){case 26:Cs(e,n,a),e.flags&Ra&&e.memoizedState!==null&&j0(a,di,e.memoizedState,e.memoizedProps);break;case 5:Cs(e,n,a);break;case 3:case 4:var l=di;di=bl(e.stateNode.containerInfo),Cs(e,n,a),di=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Ra,Ra=16777216,Cs(e,n,a),Ra=l):Cs(e,n,a));break;default:Cs(e,n,a)}}function Wf(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Na(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];fe=l,tp(l,e)}Wf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jf(e),e=e.sibling}function Jf(e){switch(e.tag){case 0:case 11:case 15:Na(e),e.flags&2048&&cn(9,e,e.return);break;case 3:Na(e);break;case 12:Na(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,sl(e)):Na(e);break;default:Na(e)}}function sl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];fe=l,tp(l,e)}Wf(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:cn(8,n,n.return),sl(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,sl(n));break;default:sl(n)}e=e.sibling}}function tp(e,n){for(;fe!==null;){var a=fe;switch(a.tag){case 0:case 11:case 15:cn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pa(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,fe=l;else t:for(a=e;fe!==null;){l=fe;var h=l.sibling,p=l.return;if(qf(l),l===a){fe=null;break t}if(h!==null){h.return=p,fe=h;break t}fe=p}}}var e0={getCacheForType:function(e){var n=ye(ne),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return ye(ne).controller.signal}},i0=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Ht=null,At=null,wt=0,kt=0,Ve=null,un=!1,Ms=!1,zc=!1,Gi=0,Zt=0,hn=0,Vn=0,Pc=0,Xe=0,Ds=0,Oa=null,Le=null,Fc=!1,al=0,ep=0,rl=1/0,ll=null,dn=null,ce=0,fn=null,Rs=null,qi=0,Uc=0,jc=null,ip=null,La=0,Hc=null;function Ye(){return(Nt&2)!==0&&wt!==0?wt&-wt:z.T!==null?Yc():bh()}function np(){if(Xe===0)if((wt&536870912)===0||Et){var e=gr;gr<<=1,(gr&3932160)===0&&(gr=262144),Xe=e}else Xe=536870912;return e=Ge.current,e!==null&&(e.flags|=32),Xe}function ke(e,n,a){(e===Ht&&(kt===2||kt===9)||e.cancelPendingCommit!==null)&&(Ns(e,0),pn(e,wt,Xe,!1)),ta(e,a),((Nt&2)===0||e!==Ht)&&(e===Ht&&((Nt&2)===0&&(Vn|=a),Zt===4&&pn(e,wt,Xe,!1)),vi(e))}function sp(e,n,a){if((Nt&6)!==0)throw Error(s(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Js(e,n),h=l?a0(e,n):Gc(e,n,!0),p=l;do{if(h===0){Ms&&!l&&pn(e,n,0,!1);break}else{if(a=e.current.alternate,p&&!n0(a)){h=Gc(e,n,!1),p=!1;continue}if(h===2){if(p=n,e.errorRecoveryDisabledLanes&p)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var _=e;h=Oa;var M=_.current.memoizedState.isDehydrated;if(M&&(Ns(_,v).flags|=256),v=Gc(_,v,!1),v!==2){if(zc&&!M){_.errorRecoveryDisabledLanes|=p,Vn|=p,h=4;break t}p=Le,Le=h,p!==null&&(Le===null?Le=p:Le.push.apply(Le,p))}h=v}if(p=!1,h!==2)continue}}if(h===1){Ns(e,0),pn(e,n,0,!0);break}t:{switch(l=e,p=h,p){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:pn(l,n,Xe,!un);break t;case 2:Le=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=al+300-Fe(),10<h)){if(pn(l,n,Xe,!un),br(l,0,!0)!==0)break t;qi=n,l.timeoutHandle=Bp(ap.bind(null,l,a,Le,ll,Fc,n,Xe,Vn,Ds,un,p,"Throttled",-0,0),h);break t}ap(l,a,Le,ll,Fc,n,Xe,Vn,Ds,un,p,null,-0,0)}}break}while(!0);vi(e)}function ap(e,n,a,l,h,p,v,_,M,U,q,X,j,H){if(e.timeoutHandle=-1,X=n.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Di},Zf(n,p,X);var it=(p&62914560)===p?al-Fe():(p&4194048)===p?ep-Fe():0;if(it=H0(X,it),it!==null){qi=p,e.cancelPendingCommit=it(fp.bind(null,e,n,p,a,l,h,v,_,M,q,X,null,j,H)),pn(e,p,v,!U);return}}fp(e,n,p,a,l,h,v,_,M)}function n0(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],p=h.getSnapshot;h=h.value;try{if(!He(p(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function pn(e,n,a,l){n&=~Pc,n&=~Vn,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var h=n;0<h;){var p=31-je(h),v=1<<p;l[p]=-1,h&=~v}a!==0&&ph(e,a,n)}function ol(){return(Nt&6)===0?(ka(0),!1):!0}function Ic(){if(At!==null){if(kt===0)var e=At.return;else e=At,Li=zn=null,sc(e),Ss=null,ma=0,e=At;for(;e!==null;)zf(e.alternate,e),e=e.return;At=null}}function Ns(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,w0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),qi=0,Ic(),Ht=e,At=a=Ni(e.current,null),wt=n,kt=0,Ve=null,un=!1,Ms=Js(e,n),zc=!1,Ds=Xe=Pc=Vn=hn=Zt=0,Le=Oa=null,Fc=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var h=31-je(l),p=1<<h;n|=e[h],l&=~p}return Gi=n,Dr(),a}function rp(e,n){bt=null,z.H=xa,n===As||n===Pr?(n=Sd(),kt=3):n===Xo?(n=Sd(),kt=4):kt=n===Ac?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ve=n,At===null&&(Zt=1,Zr(e,ti(n,e.current)))}function lp(){var e=Ge.current;return e===null?!0:(wt&4194048)===wt?si===null:(wt&62914560)===wt||(wt&536870912)!==0?e===si:!1}function op(){var e=z.H;return z.H=xa,e===null?xa:e}function cp(){var e=z.A;return z.A=e0,e}function cl(){Zt=4,un||(wt&4194048)!==wt&&Ge.current!==null||(Ms=!0),(hn&134217727)===0&&(Vn&134217727)===0||Ht===null||pn(Ht,wt,Xe,!1)}function Gc(e,n,a){var l=Nt;Nt|=2;var h=op(),p=cp();(Ht!==e||wt!==n)&&(ll=null,Ns(e,n)),n=!1;var v=Zt;t:do try{if(kt!==0&&At!==null){var _=At,M=Ve;switch(kt){case 8:Ic(),v=6;break t;case 3:case 2:case 9:case 6:Ge.current===null&&(n=!0);var U=kt;if(kt=0,Ve=null,Os(e,_,M,U),a&&Ms){v=0;break t}break;default:U=kt,kt=0,Ve=null,Os(e,_,M,U)}}s0(),v=Zt;break}catch(q){rp(e,q)}while(!0);return n&&e.shellSuspendCounter++,Li=zn=null,Nt=l,z.H=h,z.A=p,At===null&&(Ht=null,wt=0,Dr()),v}function s0(){for(;At!==null;)up(At)}function a0(e,n){var a=Nt;Nt|=2;var l=op(),h=cp();Ht!==e||wt!==n?(ll=null,rl=Fe()+500,Ns(e,n)):Ms=Js(e,n);t:do try{if(kt!==0&&At!==null){n=At;var p=Ve;e:switch(kt){case 1:kt=0,Ve=null,Os(e,n,p,1);break;case 2:case 9:if(vd(p)){kt=0,Ve=null,hp(n);break}n=function(){kt!==2&&kt!==9||Ht!==e||(kt=7),vi(e)},p.then(n,n);break t;case 3:kt=7;break t;case 4:kt=5;break t;case 7:vd(p)?(kt=0,Ve=null,hp(n)):(kt=0,Ve=null,Os(e,n,p,7));break;case 5:var v=null;switch(At.tag){case 26:v=At.memoizedState;case 5:case 27:var _=At;if(v?Qp(v):_.stateNode.complete){kt=0,Ve=null;var M=_.sibling;if(M!==null)At=M;else{var U=_.return;U!==null?(At=U,ul(U)):At=null}break e}}kt=0,Ve=null,Os(e,n,p,5);break;case 6:kt=0,Ve=null,Os(e,n,p,6);break;case 8:Ic(),Zt=6;break t;default:throw Error(s(462))}}r0();break}catch(q){rp(e,q)}while(!0);return Li=zn=null,z.H=l,z.A=h,Nt=a,At!==null?0:(Ht=null,wt=0,Dr(),Zt)}function r0(){for(;At!==null&&!Dm();)up(At)}function up(e){var n=kf(e.alternate,e,Gi);e.memoizedProps=e.pendingProps,n===null?ul(e):At=n}function hp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Mf(a,n,n.pendingProps,n.type,void 0,wt);break;case 11:n=Mf(a,n,n.pendingProps,n.type.render,n.ref,wt);break;case 5:sc(n);default:zf(a,n),n=At=od(n,Gi),n=kf(a,n,Gi)}e.memoizedProps=e.pendingProps,n===null?ul(e):At=n}function Os(e,n,a,l){Li=zn=null,sc(n),Ss=null,ma=0;var h=n.return;try{if(Kb(e,h,n,a,wt)){Zt=1,Zr(e,ti(a,e.current)),At=null;return}}catch(p){if(h!==null)throw At=h,p;Zt=1,Zr(e,ti(a,e.current)),At=null;return}n.flags&32768?(Et||l===1?e=!0:Ms||(wt&536870912)!==0?e=!1:(un=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ge.current,l!==null&&l.tag===13&&(l.flags|=16384))),dp(n,e)):ul(n)}function ul(e){var n=e;do{if((n.flags&32768)!==0){dp(n,un);return}e=n.return;var a=Zb(n.alternate,n,Gi);if(a!==null){At=a;return}if(n=n.sibling,n!==null){At=n;return}At=n=e}while(n!==null);Zt===0&&(Zt=5)}function dp(e,n){do{var a=Wb(e.alternate,e);if(a!==null){a.flags&=32767,At=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){At=e;return}At=e=a}while(e!==null);Zt=6,At=null}function fp(e,n,a,l,h,p,v,_,M){e.cancelPendingCommit=null;do hl();while(ce!==0);if((Nt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(p=n.lanes|n.childLanes,p|=No,Um(e,a,p,v,_,M),e===Ht&&(At=Ht=null,wt=0),Rs=n,fn=e,qi=a,Uc=p,jc=h,ip=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,u0(fr,function(){return yp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,h=G.p,G.p=2,v=Nt,Nt|=4;try{Jb(e,n,a)}finally{Nt=v,G.p=h,z.T=l}}ce=1,pp(),gp(),mp()}}function pp(){if(ce===1){ce=0;var e=fn,n=Rs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var l=G.p;G.p=2;var h=Nt;Nt|=4;try{Kf(n,e);var p=eu,v=Jh(e.containerInfo),_=p.focusedElem,M=p.selectionRange;if(v!==_&&_&&_.ownerDocument&&Wh(_.ownerDocument.documentElement,_)){if(M!==null&&To(_)){var U=M.start,q=M.end;if(q===void 0&&(q=U),"selectionStart"in _)_.selectionStart=U,_.selectionEnd=Math.min(q,_.value.length);else{var X=_.ownerDocument||document,j=X&&X.defaultView||window;if(j.getSelection){var H=j.getSelection(),it=_.textContent.length,ot=Math.min(M.start,it),Ft=M.end===void 0?ot:Math.min(M.end,it);!H.extend&&ot>Ft&&(v=Ft,Ft=ot,ot=v);var P=Zh(_,ot),O=Zh(_,Ft);if(P&&O&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var F=X.createRange();F.setStart(P.node,P.offset),H.removeAllRanges(),ot>Ft?(H.addRange(F),H.extend(O.node,O.offset)):(F.setEnd(O.node,O.offset),H.addRange(F))}}}}for(X=[],H=_;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<X.length;_++){var V=X[_];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}wl=!!tu,eu=tu=null}finally{Nt=h,G.p=l,z.T=a}}e.current=n,ce=2}}function gp(){if(ce===2){ce=0;var e=fn,n=Rs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var l=G.p;G.p=2;var h=Nt;Nt|=4;try{Gf(e,n.alternate,n)}finally{Nt=h,G.p=l,z.T=a}}ce=3}}function mp(){if(ce===4||ce===3){ce=0,Rm();var e=fn,n=Rs,a=qi,l=ip;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ce=5:(ce=0,Rs=fn=null,bp(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(dn=null),ro(a),n=n.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Ws,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=z.T,h=G.p,G.p=2,z.T=null;try{for(var p=e.onRecoverableError,v=0;v<l.length;v++){var _=l[v];p(_.value,{componentStack:_.stack})}}finally{z.T=n,G.p=h}}(qi&3)!==0&&hl(),vi(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===Hc?La++:(La=0,Hc=e):La=0,ka(0)}}function bp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,pa(n)))}function hl(){return pp(),gp(),mp(),yp()}function yp(){if(ce!==5)return!1;var e=fn,n=Uc;Uc=0;var a=ro(qi),l=z.T,h=G.p;try{G.p=32>a?32:a,z.T=null,a=jc,jc=null;var p=fn,v=qi;if(ce=0,Rs=fn=null,qi=0,(Nt&6)!==0)throw Error(s(331));var _=Nt;if(Nt|=4,Jf(p.current),Qf(p,p.current,v,a),Nt=_,ka(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Ws,p)}catch{}return!0}finally{G.p=h,z.T=l,bp(e,n)}}function vp(e,n,a){n=ti(a,n),n=vc(e.stateNode,n,2),e=rn(e,n,2),e!==null&&(ta(e,2),vi(e))}function Bt(e,n,a){if(e.tag===3)vp(e,e,a);else for(;n!==null;){if(n.tag===3){vp(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(dn===null||!dn.has(l))){e=ti(a,e),a=Af(2),l=rn(n,a,2),l!==null&&(Sf(a,l,n,e),ta(l,2),vi(l));break}}n=n.return}}function qc(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new i0;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(zc=!0,h.add(a),e=l0.bind(null,e,n,a),n.then(e,e))}function l0(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ht===e&&(wt&a)===a&&(Zt===4||Zt===3&&(wt&62914560)===wt&&300>Fe()-al?(Nt&2)===0&&Ns(e,0):Pc|=a,Ds===wt&&(Ds=0)),vi(e)}function Ap(e,n){n===0&&(n=fh()),e=Ln(e,n),e!==null&&(ta(e,n),vi(e))}function o0(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Ap(e,a)}function c0(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),Ap(e,a)}function u0(e,n){return io(e,n)}var dl=null,Ls=null,Vc=!1,fl=!1,Xc=!1,gn=0;function vi(e){e!==Ls&&e.next===null&&(Ls===null?dl=Ls=e:Ls=Ls.next=e),fl=!0,Vc||(Vc=!0,d0())}function ka(e,n){if(!Xc&&fl){Xc=!0;do for(var a=!1,l=dl;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var v=l.suspendedLanes,_=l.pingedLanes;p=(1<<31-je(42|e)+1)-1,p&=h&~(v&~_),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,xp(l,p))}else p=wt,p=br(l,l===Ht?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Js(l,p)||(a=!0,xp(l,p));l=l.next}while(a);Xc=!1}}function h0(){Sp()}function Sp(){fl=Vc=!1;var e=0;gn!==0&&_0()&&(e=gn);for(var n=Fe(),a=null,l=dl;l!==null;){var h=l.next,p=_p(l,n);p===0?(l.next=null,a===null?dl=h:a.next=h,h===null&&(Ls=a)):(a=l,(e!==0||(p&3)!==0)&&(fl=!0)),l=h}ce!==0&&ce!==5||ka(e),gn!==0&&(gn=0)}function _p(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var v=31-je(p),_=1<<v,M=h[v];M===-1?((_&a)===0||(_&l)!==0)&&(h[v]=Fm(_,n)):M<=n&&(e.expiredLanes|=_),p&=~_}if(n=Ht,a=wt,a=br(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(kt===2||kt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&no(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Js(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&no(l),ro(a)){case 2:case 8:a=hh;break;case 32:a=fr;break;case 268435456:a=dh;break;default:a=fr}return l=wp.bind(null,e),a=io(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&no(l),e.callbackPriority=2,e.callbackNode=null,2}function wp(e,n){if(ce!==0&&ce!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(hl()&&e.callbackNode!==a)return null;var l=wt;return l=br(e,e===Ht?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(sp(e,l,n),_p(e,Fe()),e.callbackNode!=null&&e.callbackNode===a?wp.bind(null,e):null)}function xp(e,n){if(hl())return null;sp(e,n,!0)}function d0(){x0(function(){(Nt&6)!==0?io(uh,h0):Sp()})}function Yc(){if(gn===0){var e=ys;e===0&&(e=pr,pr<<=1,(pr&261888)===0&&(pr=256)),gn=e}return gn}function Ep(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Sr(""+e)}function Tp(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function f0(e,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var p=Ep((h[Me]||null).action),v=l.submitter;v&&(n=(n=v[Me]||null)?Ep(n.formAction):v.getAttribute("formAction"),n!==null&&(p=n,v=null));var _=new Er("action","action",null,l,h);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gn!==0){var M=v?Tp(h,v):new FormData(h);fc(a,{pending:!0,data:M,method:h.method,action:p},null,M)}}else typeof p=="function"&&(_.preventDefault(),M=v?Tp(h,v):new FormData(h),fc(a,{pending:!0,data:M,method:h.method,action:p},p,M))},currentTarget:h}]})}}for(var Kc=0;Kc<Ro.length;Kc++){var $c=Ro[Kc],p0=$c.toLowerCase(),g0=$c[0].toUpperCase()+$c.slice(1);hi(p0,"on"+g0)}hi(id,"onAnimationEnd"),hi(nd,"onAnimationIteration"),hi(sd,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Nb,"onTransitionRun"),hi(Ob,"onTransitionStart"),hi(Lb,"onTransitionCancel"),hi(ad,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ba));function Cp(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var p=void 0;if(n)for(var v=l.length-1;0<=v;v--){var _=l[v],M=_.instance,U=_.currentTarget;if(_=_.listener,M!==p&&h.isPropagationStopped())break t;p=_,h.currentTarget=U;try{p(h)}catch(q){Mr(q)}h.currentTarget=null,p=M}else for(v=0;v<l.length;v++){if(_=l[v],M=_.instance,U=_.currentTarget,_=_.listener,M!==p&&h.isPropagationStopped())break t;p=_,h.currentTarget=U;try{p(h)}catch(q){Mr(q)}h.currentTarget=null,p=M}}}}function St(e,n){var a=n[lo];a===void 0&&(a=n[lo]=new Set);var l=e+"__bubble";a.has(l)||(Mp(n,e,2,!1),a.add(l))}function Qc(e,n,a){var l=0;n&&(l|=4),Mp(a,e,l,n)}var pl="_reactListening"+Math.random().toString(36).slice(2);function Zc(e){if(!e[pl]){e[pl]=!0,Ah.forEach(function(a){a!=="selectionchange"&&(m0.has(a)||Qc(a,!1,e),Qc(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[pl]||(n[pl]=!0,Qc("selectionchange",!1,n))}}function Mp(e,n,a,l){switch(ng(n)){case 2:var h=q0;break;case 8:h=V0;break;default:h=du}a=h.bind(null,n,a,e),h=void 0,!bo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Wc(e,n,a,l,h){var p=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var _=l.stateNode.containerInfo;if(_===h)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;_!==null;){if(v=es(_),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=p=v;continue t}_=_.parentNode}}l=l.return}Oh(function(){var U=p,q=go(a),X=[];t:{var j=rd.get(e);if(j!==void 0){var H=Er,it=e;switch(e){case"keypress":if(wr(a)===0)break t;case"keydown":case"keyup":H=cb;break;case"focusin":it="focus",H=So;break;case"focusout":it="blur",H=So;break;case"beforeblur":case"afterblur":H=So;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Bh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=db;break;case id:case nd:case sd:H=tb;break;case ad:H=pb;break;case"scroll":case"scrollend":H=$m;break;case"wheel":H=mb;break;case"copy":case"cut":case"paste":H=ib;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Ph;break;case"toggle":case"beforetoggle":H=yb}var ot=(n&4)!==0,Ft=!ot&&(e==="scroll"||e==="scrollend"),P=ot?j!==null?j+"Capture":null:j;ot=[];for(var O=U,F;O!==null;){var V=O;if(F=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||F===null||P===null||(V=na(O,P),V!=null&&ot.push(za(O,V,F))),Ft)break;O=O.return}0<ot.length&&(j=new H(j,it,null,a,q),X.push({event:j,listeners:ot}))}}if((n&7)===0){t:{if(j=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",j&&a!==po&&(it=a.relatedTarget||a.fromElement)&&(es(it)||it[ts]))break t;if((H||j)&&(j=q.window===q?q:(j=q.ownerDocument)?j.defaultView||j.parentWindow:window,H?(it=a.relatedTarget||a.toElement,H=U,it=it?es(it):null,it!==null&&(Ft=o(it),ot=it.tag,it!==Ft||ot!==5&&ot!==27&&ot!==6)&&(it=null)):(H=null,it=U),H!==it)){if(ot=Bh,V="onMouseLeave",P="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ot=Ph,V="onPointerLeave",P="onPointerEnter",O="pointer"),Ft=H==null?j:ia(H),F=it==null?j:ia(it),j=new ot(V,O+"leave",H,a,q),j.target=Ft,j.relatedTarget=F,V=null,es(q)===U&&(ot=new ot(P,O+"enter",it,a,q),ot.target=F,ot.relatedTarget=Ft,V=ot),Ft=V,H&&it)e:{for(ot=b0,P=H,O=it,F=0,V=P;V;V=ot(V))F++;V=0;for(var st=O;st;st=ot(st))V++;for(;0<F-V;)P=ot(P),F--;for(;0<V-F;)O=ot(O),V--;for(;F--;){if(P===O||O!==null&&P===O.alternate){ot=P;break e}P=ot(P),O=ot(O)}ot=null}else ot=null;H!==null&&Dp(X,j,H,ot,!1),it!==null&&Ft!==null&&Dp(X,Ft,it,ot,!0)}}t:{if(j=U?ia(U):window,H=j.nodeName&&j.nodeName.toLowerCase(),H==="select"||H==="input"&&j.type==="file")var Dt=Vh;else if(Gh(j))if(Xh)Dt=Mb;else{Dt=Tb;var nt=Eb}else H=j.nodeName,!H||H.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?U&&fo(U.elementType)&&(Dt=Vh):Dt=Cb;if(Dt&&(Dt=Dt(e,U))){qh(X,Dt,a,q);break t}nt&&nt(e,j,U),e==="focusout"&&U&&j.type==="number"&&U.memoizedProps.value!=null&&ho(j,"number",j.value)}switch(nt=U?ia(U):window,e){case"focusin":(Gh(nt)||nt.contentEditable==="true")&&(us=nt,Co=U,ha=null);break;case"focusout":ha=Co=us=null;break;case"mousedown":Mo=!0;break;case"contextmenu":case"mouseup":case"dragend":Mo=!1,td(X,a,q);break;case"selectionchange":if(Rb)break;case"keydown":case"keyup":td(X,a,q)}var yt;if(wo)t:{switch(e){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else cs?Hh(e,a)&&(xt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(xt="onCompositionStart");xt&&(Fh&&a.locale!=="ko"&&(cs||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&cs&&(yt=Lh()):(Wi=q,yo="value"in Wi?Wi.value:Wi.textContent,cs=!0)),nt=gl(U,xt),0<nt.length&&(xt=new zh(xt,e,null,a,q),X.push({event:xt,listeners:nt}),yt?xt.data=yt:(yt=Ih(a),yt!==null&&(xt.data=yt)))),(yt=Ab?Sb(e,a):_b(e,a))&&(xt=gl(U,"onBeforeInput"),0<xt.length&&(nt=new zh("onBeforeInput","beforeinput",null,a,q),X.push({event:nt,listeners:xt}),nt.data=yt)),f0(X,e,U,a,q)}Cp(X,n)})}function za(e,n,a){return{instance:e,listener:n,currentTarget:a}}function gl(e,n){for(var a=n+"Capture",l=[];e!==null;){var h=e,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=na(e,a),h!=null&&l.unshift(za(e,h,p)),h=na(e,n),h!=null&&l.push(za(e,h,p))),e.tag===3)return l;e=e.return}return[]}function b0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dp(e,n,a,l,h){for(var p=n._reactName,v=[];a!==null&&a!==l;){var _=a,M=_.alternate,U=_.stateNode;if(_=_.tag,M!==null&&M===l)break;_!==5&&_!==26&&_!==27||U===null||(M=U,h?(U=na(a,p),U!=null&&v.unshift(za(a,U,M))):h||(U=na(a,p),U!=null&&v.push(za(a,U,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var y0=/\r\n?/g,v0=/\u0000|\uFFFD/g;function Rp(e){return(typeof e=="string"?e:""+e).replace(y0,`
`).replace(v0,"")}function Np(e,n){return n=Rp(n),Rp(e)===n}function Pt(e,n,a,l,h,p){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||rs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&rs(e,""+l);break;case"className":vr(e,"class",l);break;case"tabIndex":vr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vr(e,a,l);break;case"style":Rh(e,l,p);break;case"data":if(n!=="object"){vr(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Sr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(n!=="input"&&Pt(e,n,"name",h.name,h,null),Pt(e,n,"formEncType",h.formEncType,h,null),Pt(e,n,"formMethod",h.formMethod,h,null),Pt(e,n,"formTarget",h.formTarget,h,null)):(Pt(e,n,"encType",h.encType,h,null),Pt(e,n,"method",h.method,h,null),Pt(e,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Sr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Di);break;case"onScroll":l!=null&&St("scroll",e);break;case"onScrollEnd":l!=null&&St("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Sr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":St("beforetoggle",e),St("toggle",e),yr(e,"popover",l);break;case"xlinkActuate":Mi(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mi(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mi(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mi(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mi(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mi(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mi(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ym.get(a)||a,yr(e,a,l))}}function Jc(e,n,a,l,h,p){switch(a){case"style":Rh(e,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?rs(e,l):(typeof l=="number"||typeof l=="bigint")&&rs(e,""+l);break;case"onScroll":l!=null&&St("scroll",e);break;case"onScrollEnd":l!=null&&St("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),p=e[Me]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(n,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):yr(e,a,l)}}}function Ae(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",e),St("load",e);var l=!1,h=!1,p;for(p in a)if(a.hasOwnProperty(p)){var v=a[p];if(v!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Pt(e,n,p,v,a,null)}}h&&Pt(e,n,"srcSet",a.srcSet,a,null),l&&Pt(e,n,"src",a.src,a,null);return;case"input":St("invalid",e);var _=p=v=h=null,M=null,U=null;for(l in a)if(a.hasOwnProperty(l)){var q=a[l];if(q!=null)switch(l){case"name":h=q;break;case"type":v=q;break;case"checked":M=q;break;case"defaultChecked":U=q;break;case"value":p=q;break;case"defaultValue":_=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,n));break;default:Pt(e,n,l,q,a,null)}}Th(e,p,_,M,U,v,h,!1);return;case"select":St("invalid",e),l=v=p=null;for(h in a)if(a.hasOwnProperty(h)&&(_=a[h],_!=null))switch(h){case"value":p=_;break;case"defaultValue":v=_;break;case"multiple":l=_;default:Pt(e,n,h,_,a,null)}n=p,a=v,e.multiple=!!l,n!=null?as(e,!!l,n,!1):a!=null&&as(e,!!l,a,!0);return;case"textarea":St("invalid",e),p=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(_=a[v],_!=null))switch(v){case"value":l=_;break;case"defaultValue":h=_;break;case"children":p=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Pt(e,n,v,_,a,null)}Mh(e,l,h,p);return;case"option":for(M in a)a.hasOwnProperty(M)&&(l=a[M],l!=null)&&(M==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Pt(e,n,M,l,a,null));return;case"dialog":St("beforetoggle",e),St("toggle",e),St("cancel",e),St("close",e);break;case"iframe":case"object":St("load",e);break;case"video":case"audio":for(l=0;l<Ba.length;l++)St(Ba[l],e);break;case"image":St("error",e),St("load",e);break;case"details":St("toggle",e);break;case"embed":case"source":case"link":St("error",e),St("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Pt(e,n,U,l,a,null)}return;default:if(fo(n)){for(q in a)a.hasOwnProperty(q)&&(l=a[q],l!==void 0&&Jc(e,n,q,l,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(l=a[_],l!=null&&Pt(e,n,_,l,a,null))}function A0(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,v=null,_=null,M=null,U=null,q=null;for(H in a){var X=a[H];if(a.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":M=X;default:l.hasOwnProperty(H)||Pt(e,n,H,null,l,X)}}for(var j in l){var H=l[j];if(X=a[j],l.hasOwnProperty(j)&&(H!=null||X!=null))switch(j){case"type":p=H;break;case"name":h=H;break;case"checked":U=H;break;case"defaultChecked":q=H;break;case"value":v=H;break;case"defaultValue":_=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:H!==X&&Pt(e,n,j,H,l,X)}}uo(e,v,_,M,U,q,p,h);return;case"select":H=v=_=j=null;for(p in a)if(M=a[p],a.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":H=M;default:l.hasOwnProperty(p)||Pt(e,n,p,null,l,M)}for(h in l)if(p=l[h],M=a[h],l.hasOwnProperty(h)&&(p!=null||M!=null))switch(h){case"value":j=p;break;case"defaultValue":_=p;break;case"multiple":v=p;default:p!==M&&Pt(e,n,h,p,l,M)}n=_,a=v,l=H,j!=null?as(e,!!a,j,!1):!!l!=!!a&&(n!=null?as(e,!!a,n,!0):as(e,!!a,a?[]:"",!1));return;case"textarea":H=j=null;for(_ in a)if(h=a[_],a.hasOwnProperty(_)&&h!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Pt(e,n,_,null,l,h)}for(v in l)if(h=l[v],p=a[v],l.hasOwnProperty(v)&&(h!=null||p!=null))switch(v){case"value":j=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==p&&Pt(e,n,v,h,l,p)}Ch(e,j,H);return;case"option":for(var it in a)j=a[it],a.hasOwnProperty(it)&&j!=null&&!l.hasOwnProperty(it)&&(it==="selected"?e.selected=!1:Pt(e,n,it,null,l,j));for(M in l)j=l[M],H=a[M],l.hasOwnProperty(M)&&j!==H&&(j!=null||H!=null)&&(M==="selected"?e.selected=j&&typeof j!="function"&&typeof j!="symbol":Pt(e,n,M,j,l,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in a)j=a[ot],a.hasOwnProperty(ot)&&j!=null&&!l.hasOwnProperty(ot)&&Pt(e,n,ot,null,l,j);for(U in l)if(j=l[U],H=a[U],l.hasOwnProperty(U)&&j!==H&&(j!=null||H!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:Pt(e,n,U,j,l,H)}return;default:if(fo(n)){for(var Ft in a)j=a[Ft],a.hasOwnProperty(Ft)&&j!==void 0&&!l.hasOwnProperty(Ft)&&Jc(e,n,Ft,void 0,l,j);for(q in l)j=l[q],H=a[q],!l.hasOwnProperty(q)||j===H||j===void 0&&H===void 0||Jc(e,n,q,j,l,H);return}}for(var P in a)j=a[P],a.hasOwnProperty(P)&&j!=null&&!l.hasOwnProperty(P)&&Pt(e,n,P,null,l,j);for(X in l)j=l[X],H=a[X],!l.hasOwnProperty(X)||j===H||j==null&&H==null||Pt(e,n,X,j,l,H)}function Op(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function S0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],p=h.transferSize,v=h.initiatorType,_=h.duration;if(p&&_&&Op(v)){for(v=0,_=h.responseEnd,l+=1;l<a.length;l++){var M=a[l],U=M.startTime;if(U>_)break;var q=M.transferSize,X=M.initiatorType;q&&Op(X)&&(M=M.responseEnd,v+=q*(M<_?1:(_-U)/(M-U)))}if(--l,n+=8*(p+v)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var tu=null,eu=null;function ml(e){return e.nodeType===9?e:e.ownerDocument}function Lp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kp(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function iu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var nu=null;function _0(){var e=window.event;return e&&e.type==="popstate"?e===nu?!1:(nu=e,!0):(nu=null,!1)}var Bp=typeof setTimeout=="function"?setTimeout:void 0,w0=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,x0=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(e){return zp.resolve(null).then(e).catch(E0)}:Bp;function E0(e){setTimeout(function(){throw e})}function mn(e){return e==="head"}function Pp(e,n){var a=n,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(h),Ps(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Pa(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Pa(a);for(var p=a.firstChild;p;){var v=p.nextSibling,_=p.nodeName;p[ea]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=v}}else a==="body"&&Pa(e.ownerDocument.body);a=h}while(a);Ps(n)}function Fp(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function su(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":su(a),oo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function T0(e,n,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ea])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=ai(e.nextSibling),e===null)break}return null}function C0(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ai(e.nextSibling),e===null))return null;return e}function Up(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ai(e.nextSibling),e===null))return null;return e}function au(e){return e.data==="$?"||e.data==="$~"}function ru(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function M0(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ai(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var lu=null;function jp(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return ai(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Hp(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Ip(e,n,a){switch(n=ml(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Pa(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);oo(e)}var ri=new Map,Gp=new Set;function bl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vi=G.d;G.d={f:D0,r:R0,D:N0,C:O0,L:L0,m:k0,X:z0,S:B0,M:P0};function D0(){var e=Vi.f(),n=ol();return e||n}function R0(e){var n=is(e);n!==null&&n.tag===5&&n.type==="form"?rf(n):Vi.r(e)}var ks=typeof document>"u"?null:document;function qp(e,n,a){var l=ks;if(l&&typeof n=="string"&&n){var h=We(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Gp.has(h)||(Gp.add(h),e={rel:e,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),Ae(n,"link",e),de(n),l.head.appendChild(n)))}}function N0(e){Vi.D(e),qp("dns-prefetch",e,null)}function O0(e,n){Vi.C(e,n),qp("preconnect",e,n)}function L0(e,n,a){Vi.L(e,n,a);var l=ks;if(l&&e&&n){var h='link[rel="preload"][as="'+We(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+We(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+We(a.imageSizes)+'"]')):h+='[href="'+We(e)+'"]';var p=h;switch(n){case"style":p=Bs(e);break;case"script":p=zs(e)}ri.has(p)||(e=m({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ri.set(p,e),l.querySelector(h)!==null||n==="style"&&l.querySelector(Fa(p))||n==="script"&&l.querySelector(Ua(p))||(n=l.createElement("link"),Ae(n,"link",e),de(n),l.head.appendChild(n)))}}function k0(e,n){Vi.m(e,n);var a=ks;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+We(l)+'"][href="'+We(e)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=zs(e)}if(!ri.has(p)&&(e=m({rel:"modulepreload",href:e},n),ri.set(p,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ua(p)))return}l=a.createElement("link"),Ae(l,"link",e),de(l),a.head.appendChild(l)}}}function B0(e,n,a){Vi.S(e,n,a);var l=ks;if(l&&e){var h=ns(l).hoistableStyles,p=Bs(e);n=n||"default";var v=h.get(p);if(!v){var _={loading:0,preload:null};if(v=l.querySelector(Fa(p)))_.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ri.get(p))&&ou(e,a);var M=v=l.createElement("link");de(M),Ae(M,"link",e),M._p=new Promise(function(U,q){M.onload=U,M.onerror=q}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,yl(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:_},h.set(p,v)}}}function z0(e,n){Vi.X(e,n);var a=ks;if(a&&e){var l=ns(a).hoistableScripts,h=zs(e),p=l.get(h);p||(p=a.querySelector(Ua(h)),p||(e=m({src:e,async:!0},n),(n=ri.get(h))&&cu(e,n),p=a.createElement("script"),de(p),Ae(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function P0(e,n){Vi.M(e,n);var a=ks;if(a&&e){var l=ns(a).hoistableScripts,h=zs(e),p=l.get(h);p||(p=a.querySelector(Ua(h)),p||(e=m({src:e,async:!0,type:"module"},n),(n=ri.get(h))&&cu(e,n),p=a.createElement("script"),de(p),Ae(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function Vp(e,n,a,l){var h=(h=ht.current)?bl(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Bs(a.href),a=ns(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Bs(a.href);var p=ns(h).hoistableStyles,v=p.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,v),(p=h.querySelector(Fa(e)))&&!p._p&&(v.instance=p,v.state.loading=5),ri.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ri.set(e,a),p||F0(h,e,a,v.state))),n&&l===null)throw Error(s(528,""));return v}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=zs(a),a=ns(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Bs(e){return'href="'+We(e)+'"'}function Fa(e){return'link[rel="stylesheet"]['+e+"]"}function Xp(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function F0(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Ae(n,"link",a),de(n),e.head.appendChild(n))}function zs(e){return'[src="'+We(e)+'"]'}function Ua(e){return"script[async]"+e}function Yp(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+We(a.href)+'"]');if(l)return n.instance=l,de(l),l;var h=m({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),de(l),Ae(l,"style",h),yl(l,a.precedence,e),n.instance=l;case"stylesheet":h=Bs(a.href);var p=e.querySelector(Fa(h));if(p)return n.state.loading|=4,n.instance=p,de(p),p;l=Xp(a),(h=ri.get(h))&&ou(l,h),p=(e.ownerDocument||e).createElement("link"),de(p);var v=p;return v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ae(p,"link",l),n.state.loading|=4,yl(p,a.precedence,e),n.instance=p;case"script":return p=zs(a.src),(h=e.querySelector(Ua(p)))?(n.instance=h,de(h),h):(l=a,(h=ri.get(p))&&(l=m({},a),cu(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),de(h),Ae(h,"link",l),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,yl(l,a.precedence,e));return n.instance}function yl(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,v=0;v<l.length;v++){var _=l[v];if(_.dataset.precedence===n)p=_;else if(p!==h)break}p?p.parentNode.insertBefore(e,p.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function ou(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function cu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var vl=null;function Kp(e,n,a){if(vl===null){var l=new Map,h=vl=new Map;h.set(a,l)}else h=vl,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var p=a[h];if(!(p[ea]||p[me]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(n)||"";v=e+v;var _=l.get(v);_?_.push(p):l.set(v,[p])}}return l}function $p(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function U0(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Qp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function j0(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Bs(l.href),p=n.querySelector(Fa(h));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Al.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=p,de(p);return}p=n.ownerDocument||n,l=Xp(l),(h=ri.get(h))&&ou(l,h),p=p.createElement("link"),de(p);var v=p;v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ae(p,"link",l),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Al.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var uu=0;function H0(e,n){return e.stylesheets&&e.count===0&&_l(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&_l(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+n);0<e.imgBytes&&uu===0&&(uu=62500*S0());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&_l(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>uu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Al(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_l(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Sl=null;function _l(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Sl=new Map,n.forEach(I0,e),Sl=null,Al.call(e))}function I0(e,n){if(!(n.state.loading&4)){var a=Sl.get(e);if(a)var l=a.get(null);else{a=new Map,Sl.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var v=h[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=n.instance,v=h.getAttribute("data-precedence"),p=a.get(v)||l,p===l&&a.set(null,h),a.set(v,h),this.count++,l=Al.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var ja={$$typeof:T,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function G0(e,n,a,l,h,p,v,_,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=so(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.hiddenUpdates=so(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Zp(e,n,a,l,h,p,v,_,M,U,q,X){return e=new G0(e,n,a,v,M,U,q,X,_),n=1,p===!0&&(n|=24),p=Ie(3,null,null,n),e.current=p,p.stateNode=e,n=Go(),n.refCount++,e.pooledCache=n,n.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:n},Yo(p),e}function Wp(e){return e?(e=fs,e):fs}function Jp(e,n,a,l,h,p){h=Wp(h),l.context===null?l.context=h:l.pendingContext=h,l=an(n),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=rn(e,l,n),a!==null&&(ke(a,e,n),ya(a,e,n))}function tg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function hu(e,n){tg(e,n),(e=e.alternate)&&tg(e,n)}function eg(e){if(e.tag===13||e.tag===31){var n=Ln(e,67108864);n!==null&&ke(n,e,67108864),hu(e,67108864)}}function ig(e){if(e.tag===13||e.tag===31){var n=Ye();n=ao(n);var a=Ln(e,n);a!==null&&ke(a,e,n),hu(e,n)}}var wl=!0;function q0(e,n,a,l){var h=z.T;z.T=null;var p=G.p;try{G.p=2,du(e,n,a,l)}finally{G.p=p,z.T=h}}function V0(e,n,a,l){var h=z.T;z.T=null;var p=G.p;try{G.p=8,du(e,n,a,l)}finally{G.p=p,z.T=h}}function du(e,n,a,l){if(wl){var h=fu(l);if(h===null)Wc(e,n,l,xl,a),sg(e,l);else if(Y0(h,e,n,a,l))l.stopPropagation();else if(sg(e,l),n&4&&-1<X0.indexOf(e)){for(;h!==null;){var p=is(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Mn(p.pendingLanes);if(v!==0){var _=p;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var M=1<<31-je(v);_.entanglements[1]|=M,v&=~M}vi(p),(Nt&6)===0&&(rl=Fe()+500,ka(0))}}break;case 31:case 13:_=Ln(p,2),_!==null&&ke(_,p,2),ol(),hu(p,2)}if(p=fu(l),p===null&&Wc(e,n,l,xl,a),p===h)break;h=p}h!==null&&l.stopPropagation()}else Wc(e,n,l,null,a)}}function fu(e){return e=go(e),pu(e)}var xl=null;function pu(e){if(xl=null,e=es(e),e!==null){var n=o(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return xl=e,null}function ng(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nm()){case uh:return 2;case hh:return 8;case fr:case Om:return 32;case dh:return 268435456;default:return 32}default:return 32}}var gu=!1,bn=null,yn=null,vn=null,Ha=new Map,Ia=new Map,An=[],X0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sg(e,n){switch(e){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":Ha.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ia.delete(n.pointerId)}}function Ga(e,n,a,l,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},n!==null&&(n=is(n),n!==null&&eg(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function Y0(e,n,a,l,h){switch(n){case"focusin":return bn=Ga(bn,e,n,a,l,h),!0;case"dragenter":return yn=Ga(yn,e,n,a,l,h),!0;case"mouseover":return vn=Ga(vn,e,n,a,l,h),!0;case"pointerover":var p=h.pointerId;return Ha.set(p,Ga(Ha.get(p)||null,e,n,a,l,h)),!0;case"gotpointercapture":return p=h.pointerId,Ia.set(p,Ga(Ia.get(p)||null,e,n,a,l,h)),!0}return!1}function ag(e){var n=es(e.target);if(n!==null){var a=o(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,yh(e.priority,function(){ig(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,yh(e.priority,function(){ig(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function El(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=fu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);po=l,a.target.dispatchEvent(l),po=null}else return n=is(a),n!==null&&eg(n),e.blockedOn=a,!1;n.shift()}return!0}function rg(e,n,a){El(e)&&a.delete(n)}function K0(){gu=!1,bn!==null&&El(bn)&&(bn=null),yn!==null&&El(yn)&&(yn=null),vn!==null&&El(vn)&&(vn=null),Ha.forEach(rg),Ia.forEach(rg)}function Tl(e,n){e.blockedOn===n&&(e.blockedOn=null,gu||(gu=!0,b.unstable_scheduleCallback(b.unstable_NormalPriority,K0)))}var Cl=null;function lg(e){Cl!==e&&(Cl=e,b.unstable_scheduleCallback(b.unstable_NormalPriority,function(){Cl===e&&(Cl=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],h=e[n+2];if(typeof l!="function"){if(pu(l||a)===null)continue;break}var p=is(a);p!==null&&(e.splice(n,3),n-=3,fc(p,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ps(e){function n(M){return Tl(M,e)}bn!==null&&Tl(bn,e),yn!==null&&Tl(yn,e),vn!==null&&Tl(vn,e),Ha.forEach(n),Ia.forEach(n);for(var a=0;a<An.length;a++){var l=An[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<An.length&&(a=An[0],a.blockedOn===null);)ag(a),a.blockedOn===null&&An.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],p=a[l+1],v=h[Me]||null;if(typeof p=="function")v||lg(a);else if(v){var _=null;if(p&&p.hasAttribute("formAction")){if(h=p,v=p[Me]||null)_=v.formAction;else if(pu(h)!==null)continue}else _=v.action;typeof _=="function"?a[l+1]=_:(a.splice(l,3),l-=3),lg(a)}}}function og(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function mu(e){this._internalRoot=e}Ml.prototype.render=mu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=Ye();Jp(a,l,e,n,null,null)},Ml.prototype.unmount=mu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Jp(e.current,2,null,e,null,null),ol(),n[ts]=null}};function Ml(e){this._internalRoot=e}Ml.prototype.unstable_scheduleHydration=function(e){if(e){var n=bh();e={blockedOn:null,target:e,priority:n};for(var a=0;a<An.length&&n!==0&&n<An[a].priority;a++);An.splice(a,0,e),a===0&&ag(e)}};var cg=t.version;if(cg!=="19.2.3")throw Error(s(527,cg,"19.2.3"));G.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var $0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{Ws=Dl.inject($0),Ue=Dl}catch{}}return Va.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,l="",h=mf,p=bf,v=yf;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Zp(e,1,!1,null,null,a,l,null,h,p,v,og),e[ts]=n.current,Zc(e),new mu(n)},Va.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var l=!1,h="",p=mf,v=bf,_=yf,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=Zp(e,1,!0,n,a??null,l,h,M,p,v,_,og),n.context=Wp(null),a=n.current,l=Ye(),l=ao(l),h=an(l),h.callback=null,rn(a,h,l),a=l,n.current.lanes=a,ta(n,a),vi(n),e[ts]=n.current,Zc(e),new Ml(n)},Va.version="19.2.3",Va}var Sg;function ay(){if(Sg)return Au.exports;Sg=1;function b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(t){console.error(t)}}return b(),Au.exports=sy(),Au.exports}var ry=ay();const ly={ANALYZE_RESUME_PROMPT:`You are an expert resume and job description analyst.
First, verify that the document provided is actually a resume:
- Look for professional experience, work history, or employment information
- Check for education background, degrees, or academic information  
- Verify skills, qualifications, or professional competencies
- Confirm contact information and personal details

If this is NOT a resume, respond with:
{
  "error": "This document does not appear to be a resume. Please upload a proper resume containing professional experience, education, and skills sections."
}

If this IS a resume, analyze it thoroughly against the provided job description/requirements and provide comprehensive feedback in this JSON format:
{
  "overallScore": "X/10",
  "strengths": [
    "strength 1", 
    "strength 2", 
    "strength 3"
  ],
  "improvements": [
    "improvement 1", 
    "improvement 2", 
    "improvement 3"
  ],
  "keywords": [
    "keyword 1", 
    "keyword 2", 
    "keyword 3"
  ],
  "summary": "Brief overall assessment comparing resume to job requirements",
  "performanceMetrics": {
    "formatting": X,
    "contentQuality": X,
    "keywordUsage": X,
    "atsCompatibility": X,
    "quantifiableAchievements": X
  },
  "actionItems": [
    "specific actionable item 1",
    "specific actionable item 2", 
    "specific actionable item 3"
  ],
  "proTips": [
    "professional tip 1",
    "professional tip 2",
    "professional tip 3"
  ]
}

IMPORTANT - RATING GUIDELINES:

Rate performanceMetrics 1-10 based on how well the resume matches the job requirements:

- formatting (1-10): Layout clarity, structure, visual appeal, consistency. Is the resume well-organized and easy to read? Does it have clear sections? Professional appearance?

- contentQuality (1-10): How well does resume experience align with job requirements? Do achievements and responsibilities match what the job asks for? Is content relevant and complete?

- keywordUsage (1-10): Extract ALL technical skills and keywords from the job description, then check if they appear in the resume. Look for:
  * Programming languages mentioned (React, Vue.js, JavaScript, TypeScript, etc.)
  * Frameworks and tools (Jest, React Testing Library, Cypress, Playwright, Git, etc.)
  * Methodologies (Agile, Scrum, WCAG accessibility, responsive design, etc.)
  * Give higher score if more keywords are present, lower if many are missing

- atsCompatibility (1-10): Is resume optimized for ATS parsing? Check for:
  * Standard section headers (Experience, Education, Skills, Summary)
  * Clean formatting without graphics/tables
  * Presence of job keywords naturally integrated
  * Action verbs at start of bullet points
  * Contact info clearly visible
  * Avoid complex layouts that confuse ATS

- quantifiableAchievements (1-10): Does resume include metrics and numbers? Look for:
  * Percentages, dollar amounts, team sizes
  * Performance improvements shown with numbers
  * Project scopes with measurable results
  * "Increased by X%", "Led team of X", "Reduced time by X%" etc.
  * Higher score if multiple quantified achievements, lower if none or very few

For summary, explicitly mention:
- Overall fit for this job (good/moderate/poor match)
- Key strengths relative to job requirements
- Critical missing skills from job description
- Whether resume highlights required experience

For actionItems, provide specific changes to improve resume for THIS job:
- "Add X skill to skills section (mentioned in job posting)"
- "Highlight X project that uses Y technology from job requirements"
- "Reword experience to emphasize X responsibility mentioned in job"
- "Add quantified metrics to show impact in Y area"
- "Incorporate X framework/tool mentioned in job posting"

For proTips, give targeted advice:
- How to better position experience for this role
- Industry-specific terminology to incorporate
- How to structure resume for this type of position
- What hiring managers look for in this role

RESUME TEXT:
{{DOCUMENT_TEXT}}

JOB DESCRIPTION/REQUIREMENTS:
{{JOB_DESCRIPTION}}`},oy=[{key:"formatting",label:"Formatting",defaultValue:7,colorClass:"from-emerald-400 to-emerald-500",shadowClass:"group-hover/item:shadow-emerald-500/30",icon:""},{key:"contentQuality",label:"Content Quality",defaultValue:6,colorClass:"from-blue-400 to-blue-500",shadowClass:"group-hover/item:shadow-blue-500/30",icon:""},{key:"atsCompatibility",label:"ATS Compatibility",defaultValue:6,colorClass:"from-violet-400 to-violet-500",shadowClass:"group-hover/item:shadow-violet-500/30",icon:""},{key:"keywordUsage",label:"Keyword Usage",defaultValue:5,colorClass:"from-purple-400 to-purple-500",shadowClass:"group-hover/item:shadow-purple-500/30",icon:""},{key:"quantifiableAchievements",label:"Quantified Results",defaultValue:4,colorClass:"from-orange-400 to-orange-500",shadowClass:"group-hover/item:shadow-orange-500/30",icon:""}],cy=b=>{const t=(b||"").toLowerCase();return[{label:"Standard Section Headings",present:/experience|education|skills|summary|objective|work history|professional experience|employment/.test(t)},{label:"Contact Information",present:/email|phone|linkedin|github|portfolio|@|\.com|\.net|\.org/.test(t)},{label:"Keywords & Skills",present:/skills|technologies|tech skills|competencies|programming|software|tools|javascript|python|java|react|node|sql|html|css|aws|docker|kubernetes|agile|scrum|git|api|database|framework|library|language|technology|stack/.test(t)},{label:"Quantified Achievements",present:/\d+%|\d+ percent|\d+ people|\d+ team|\d+ project|\d+ year|\d+ month|\d+ dollar|\$\d+|\d+ users|\d+ customers|\d+ revenue|\d+ growth|\d+ improvement|\d+ reduction|\d+ increase|\d+ decrease/.test(t)},{label:"Action Verbs",present:/developed|created|implemented|managed|led|designed|built|improved|increased|decreased|achieved|delivered|launched|optimized|streamlined|enhanced|established|coordinated|facilitated|orchestrated|spearheaded|pioneered|architected|engineered|deployed|maintained|supported|troubleshot|resolved|analyzed|researched|evaluated|assessed|planned|organized|executed|completed|finished|accomplished|generated|produced|created|developed|built|constructed|assembled|fabricated|manufactured|produced|yielded|resulted|caused|brought|about|led|to|contributed|to|helped|assisted|aided|supported|enabled|empowered|facilitated|promoted|encouraged|fostered|nurtured|cultivated|developed|grew|expanded|scaled|increased|boosted|enhanced|improved|upgraded|refined|polished|perfected|optimized|streamlined|simplified|clarified|organized|structured|arranged|systematized|standardized|formalized|institutionalized|established|founded|created|initiated|started|began|commenced|launched|introduced|unveiled|revealed|disclosed|announced|declared|proclaimed|stated|expressed|communicated|conveyed|transmitted|delivered|presented|demonstrated|exhibited|displayed|showcased|highlighted|emphasized|stressed|underscored|accentuated|featured|spotlighted|focused|centered|concentrated|targeted|aimed|directed|guided|steered|navigated|piloted|drove|propelled|pushed|advanced|progressed|moved|forward|accelerated|expedited|hastened|rushed|hurried|sped|up|quickened|fastened|accelerated|boosted|enhanced|amplified|magnified|multiplied|doubled|tripled|quadrupled|quintupled|sextupled|septupled|octupled|nonupled|decupled/.test(t)},{label:"Professional Experience",present:/experience|employment|work history|professional experience|job|position|role|career|occupation|employment|work|job|position|role|title|responsibilities|duties|tasks|projects|initiatives|achievements|accomplishments|contributions|impact|results|outcomes|deliverables|outputs|work|employment|job|position|role|title|company|organization|employer|client|customer|stakeholder|team|department|division|unit|group|section|branch|office|location|site|facility|premises|workplace|workstation|desk|office|cubicle|workspace|environment|setting|context|situation|circumstance|condition|state|status|level|grade|rank|tier|category|class|type|kind|sort|variety|form|style|manner|way|method|approach|technique|strategy|tactic|procedure|process|system|framework|model|paradigm|theory|concept|idea|notion|thought|belief|opinion|view|perspective|standpoint|position|stance|attitude|mindset|outlook|approach|methodology|philosophy|principle|value|standard|criterion|benchmark|measure|metric|indicator|signal|sign|mark|token|symbol|emblem|badge|insignia|logo|brand|label|tag|stamp|seal|signature|autograph|mark|trace|track|trail|path|route|way|road|street|avenue|boulevard|highway|freeway|expressway|turnpike|parkway|drive|lane|alley|path|trail|track|route|way|road|street|avenue|boulevard|highway|freeway|expressway|turnpike|parkway|drive|lane|alley/.test(t)},{label:"Education Section",present:/education|bachelor|master|phd|university|degree|college|school|academic|academy|institute|institution|faculty|department|program|course|curriculum|syllabus|textbook|lecture|seminar|workshop|tutorial|training|certification|certificate|diploma|transcript|gpa|grade|score|mark|result|outcome|achievement|accomplishment|success|performance|progress|development|growth|improvement|enhancement|advancement|promotion|elevation|upgrade|boost|lift|raise|increase|improvement|enhancement|betterment|refinement|polishing|perfection|optimization|streamlining|simplification|clarification|organization|structuring|arrangement|systematization|standardization|formalization|institutionalization|establishment|foundation|creation|initiation|start|beginning|commencement|launch|introduction|unveiling|revelation|disclosure|announcement|declaration|proclamation|statement|expression|communication|conveyance|transmission|delivery|presentation|demonstration|exhibition|display|showcase|highlighting|emphasis|stress|underscoring|accentuation|featuring|spotlighting|focusing|centering|concentration|targeting|aiming|directing|guiding|steering|navigating|piloting|driving|propelling|pushing|advancing|progressing|moving|forward|accelerating|expediting|hastening|rushing|hurrying|speeding|up|quickening|fastening|accelerating|boosting|enhancing|amplifying|magnifying|multiplying|doubling|tripling|quadrupling|quintupling|sextupling|septupling|octupling|nonupling|decupling/.test(t)}]},Ee=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Lu=[.001,0,0,.001,0,0],xu=1.35,Ke={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_n={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},er="pdfjs_internal_editor_",gt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Tt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},uy={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ku={TRIANGLES:1,LATTICE:2},ue={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ul={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},oe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Us={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Xl={ERRORS:0,WARNINGS:1,INFOS:5},ir={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Xa={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},hy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Yl=Xl.WARNINGS;function dy(b){Number.isInteger(b)&&(Yl=b)}function fy(){return Yl}function Kl(b){Yl>=Xl.INFOS&&console.info(`Info: ${b}`)}function ft(b){Yl>=Xl.WARNINGS&&console.warn(`Warning: ${b}`)}function It(b){throw new Error(b)}function Ct(b,t){b||It(t)}function py(b){switch(b?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Kg(b,t=null,i=null){if(!b)return null;if(i&&typeof b=="string"&&(i.addDefaultProtocol&&b.startsWith("www.")&&b.match(/\./g)?.length>=2&&(b=`http://${b}`),i.tryConvertEncoding))try{b=vy(b)}catch{}const s=t?URL.parse(b,t):URL.parse(b);return py(s)?s:null}function $g(b,t,i=!1){const s=URL.parse(b);return s?(s.hash=t,s.href):i&&Kg(b,"http://example.com")?b.split("#",1)[0]+`${t?`#${t}`:""}`:""}function pt(b,t,i,s=!1){return Object.defineProperty(b,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const Wn=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class _g extends Wn{constructor(t,i){super(t,"PasswordException"),this.code=i}}class Eu extends Wn{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class Bu extends Wn{constructor(t){super(t,"InvalidPDFException")}}class Il extends Wn{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class gy extends Wn{constructor(t){super(t,"FormatError")}}class xn extends Wn{constructor(t){super(t,"AbortException")}}function Qg(b){(typeof b!="object"||b?.length===void 0)&&It("Invalid argument for bytesToString");const t=b.length,i=8192;if(t<i)return String.fromCharCode.apply(null,b);const s=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),c=b.subarray(r,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function rr(b){typeof b!="string"&&It("Invalid argument for stringToBytes");const t=b.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=b.charCodeAt(s)&255;return i}function my(b){return String.fromCharCode(b>>24&255,b>>16&255,b>>8&255,b&255)}function by(){const b=new Uint8Array(4);return b[0]=1,new Uint32Array(b.buffer,0,1)[0]===1}function yy(){try{return new Function(""),!0}catch{return!1}}class he{static get isLittleEndian(){return pt(this,"isLittleEndian",by())}static get isEvalSupported(){return pt(this,"isEvalSupported",yy())}static get isOffscreenCanvasSupported(){return pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return pt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return pt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return pt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return pt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return pt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Tu=Array.from(Array(256).keys(),b=>b.toString(16).padStart(2,"0"));class J{static makeHexColor(t,i,s){return`#${Tu[t]}${Tu[i]}${Tu[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],o=t[s+1];t[s]=r*i[0]+o*i[2]+i[4],t[s+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],o=i[1],c=i[2],u=i[3],d=i[4],f=i[5];for(let g=0;g<6;g+=2){const m=t[s+g],y=t[s+g+1];t[s+g]=m*r+y*c+d,t[s+g+1]=m*o+y*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const r=i[0],o=i[1],c=i[2],u=i[3],d=i[4],f=i[5],g=t[0],m=t[1],y=t[2],A=t[3];let w=r*g+d,S=w,E=r*y+d,x=E,C=u*m+f,T=C,R=u*A+f,k=R;if(o!==0||c!==0){const N=o*g,L=o*y,Y=c*m,$=c*A;w+=Y,x+=Y,E+=$,S+=$,C+=N,k+=N,R+=L,T+=L}s[0]=Math.min(s[0],w,E,S,x),s[1]=Math.min(s[1],C,R,T,k),s[2]=Math.max(s[2],w,E,S,x),s[3]=Math.max(s[3],C,R,T,k)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],o=t[2],c=t[3],u=s**2+r**2,d=s*o+r*c,f=o**2+c**2,g=(u+f)/2,m=Math.sqrt(g**2-(u*f-d**2));i[0]=Math.sqrt(g+m||1),i[1]=Math.sqrt(g-m||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>c?null:[s,o,r,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,r)}static#t(t,i,s,r,o,c,u,d,f,g){if(f<=0||f>=1)return;const m=1-f,y=f*f,A=y*f,w=m*(m*(m*t+3*f*i)+3*y*s)+A*r,S=m*(m*(m*o+3*f*c)+3*y*u)+A*d;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)}static#e(t,i,s,r,o,c,u,d,f,g,m,y){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,r,o,c,u,d,-m/g,y);return}const A=g**2-4*m*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,i,s,r,o,c,u,d,(-g+w)/S,y),this.#t(t,i,s,r,o,c,u,d,(-g-w)/S,y)}static bezierBoundingBox(t,i,s,r,o,c,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,d),this.#e(t,s,o,u,i,r,c,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,i,r,c,d,3*(-i+3*(r-c)+d),6*(i-2*r+c),3*(r-i),f)}}function vy(b){return decodeURIComponent(escape(b))}let Cu=null,wg=null;function Ay(b){return Cu||(Cu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,wg=new Map([["","t"]])),b.replaceAll(Cu,(t,i,s)=>i?i.normalize("NFKC"):wg.get(s))}function Zg(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const b=new Uint8Array(32);return crypto.getRandomValues(b),Qg(b)}const Is="pdfjs_internal_id_";function Sy(b,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...o]=i;if(!b(s)&&!Number.isInteger(s)||!t(r))return!1;const c=o.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Te(b,t,i){return Math.min(Math.max(b,t),i)}function Wg(b){return Uint8Array.prototype.toBase64?b.toBase64():btoa(Qg(b))}function _y(b){return Uint8Array.fromBase64?Uint8Array.fromBase64(b):rr(atob(b))}typeof Promise.try!="function"&&(Promise.try=function(b,...t){return new Promise(i=>{i(b(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(b){return b.reduce((t,i)=>t+i,0)});class nr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(nr.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&i.push({str:c}),!!o.children)for(const d of o.children)r(d)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Jg{static setupStorage(t,i,s,r,o){const c=r.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:o}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);c.append(m),u&&nr.shouldBuildText(r.name)&&f.push(m)}return{textDivs:f}}const g=[[r,-1,c]];for(;g.length>0;){const[m,y,A]=g.at(-1);if(y+1===m.children.length){g.pop();continue}const w=m.children[++g.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const x=document.createTextNode(w.value);f.push(x),A.append(x);continue}const E=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(E),w.attributes&&this.setAttributes({html:E,element:w,storage:i,intent:o,linkService:s}),w.children?.length>0)g.push([w,-1,E]);else if(w.value){const x=document.createTextNode(w.value);u&&nr.shouldBuildText(S)&&f.push(x),E.append(x)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Xi="http://www.w3.org/2000/svg";class Qs{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function lr(b,t="text"){if(Za(b,document.baseURI)){const i=await fetch(b);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",b,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class or{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=c,s*=i;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,m,y,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,m=0,y=0,A=1;break;case 90:g=0,m=1,y=1,A=0;break;case 270:g=0,m=-1,y=-1,A=0;break;case 0:g=1,m=0,y=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,A=-A);let w,S,E,x;g===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+c,E=(t[3]-t[1])*s,x=(t[2]-t[0])*s):(w=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+c,E=(t[2]-t[0])*s,x=(t[3]-t[1])*s),this.transform=[g*s,m*s,y*s,A*s,w-g*s*d-y*s*f,S-m*s*d-A*s*f],this.width=E,this.height=x}get rawDims(){const t=this.viewBox;return pt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new or({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return J.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];J.applyTransform(i,this.transform);const s=[t[2],t[3]];return J.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return J.applyInverseTransform(s,this.transform),s}}class Ku extends Wn{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function $l(b){const t=b.length;let i=0;for(;i<t&&b[i].trim()==="";)i++;return b.substring(i,i+5).toLowerCase()==="data:"}function $u(b){return typeof b=="string"&&/\.pdf$/i.test(b)}function wy(b){return[b]=b.split(/[#?]/,1),b.substring(b.lastIndexOf("/")+1)}function xy(b,t="document.pdf"){if(typeof b!="string")return t;if($l(b))return ft('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(b);if(!s)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(o.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return r(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return r(d[0])}return t}class xg{started=Object.create(null);times=[];time(t){t in this.started&&ft(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ft(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-r}ms
`);return t.join("")}}function Za(b,t){const i=t?URL.parse(b,t):URL.parse(b);return i?.protocol==="http:"||i?.protocol==="https:"}function ui(b){b.preventDefault()}function Wt(b){b.preventDefault(),b.stopPropagation()}function Ey(b){console.log("Deprecated API usage: "+b)}class zu{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let m=parseInt(i[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(c+=g,u+=m):f==="+"&&(c-=g,u-=m),new Date(Date.UTC(s,r,o,c,u,d))}}function Ty(b,{scale:t=1,rotation:i=0}){const{width:s,height:r}=b.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new or({viewBox:o,userUnit:1,scale:t,rotation:i})}function cr(b){if(b.startsWith("#")){const t=parseInt(b.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return b.startsWith("rgb(")?b.slice(4,-1).split(",").map(t=>parseInt(t)):b.startsWith("rgba(")?b.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ft(`Not a valid color format: "${b}"`),[0,0,0])}function Cy(b){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of b.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;b.set(i,cr(s))}t.remove()}function Kt(b){const{a:t,b:i,c:s,d:r,e:o,f:c}=b.getTransform();return[t,i,s,r,o,c]}function _i(b){const{a:t,b:i,c:s,d:r,e:o,f:c}=b.getTransform().invertSelf();return[t,i,s,r,o,c]}function Qn(b,t,i=!1,s=!0){if(t instanceof or){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=b,u=he.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=g,c.height=m):(c.width=m,c.height=g)}s&&b.setAttribute("data-main-rotation",t.rotation)}class Ti{constructor(){const{pixelRatio:t}=Ti;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,o=-1){let c=1/0,u=1/0,d=1/0;s=Ti.capPixels(s,o),s>0&&(c=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,d=r/i);const f=Math.min(c,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const Pu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class My{static get isDarkMode(){return pt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Dy{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),pt(this,"commentForegroundColor",cr(s))}}function Ry(b,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return b=Math.round(b*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[b,t,i]}function Eg(b,t){const i=b[0]/255,s=b[1]/255,r=b[2]/255,o=Math.max(i,s,r),c=Math.min(i,s,r),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const d=o-c;switch(t[1]=u<.5?d/(o+c):d/(2-o-c),o){case i:t[0]=((s-r)/d+(s<r?6:0))*60;break;case s:t[0]=((r-i)/d+2)*60;break;case r:t[0]=((i-s)/d+4)*60;break}}t[2]=u}function Fu(b,t){const i=b[0],s=b[1],r=b[2],o=(1-Math.abs(2*r-1))*s,c=o*(1-Math.abs(i/60%2-1)),u=r-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function Tg(b){return b<=.03928?b/12.92:((b+.055)/1.055)**2.4}function Cg(b,t,i){Fu(b,i),i.map(Tg);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];Fu(t,i),i.map(Tg);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const Mg=new Map;function Ny(b,t){const i=b[0]+b[1]*256+b[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Mg.get(i);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),c=r.subarray(3,6);Eg(b,c);const u=r.subarray(6,9);Eg(t,u);const d=u[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),Cg(c,u,o)<f){let g,m;d?(g=c[2],m=1):(g=0,m=c[2]);const y=.005;for(;m-g>y;){const A=c[2]=(g+m)/2;d===Cg(c,u,o)<f?g=A:m=A}c[2]=d?m:g}return Fu(c,o),s=J.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Mg.set(i,s),s}function tm({html:b,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof b=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=b.split(/(?:\r\n?|\n)/);for(let u=0,d=c.length;u<d;++u){const f=c[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}r.append(o)}else Jg.render({xfaHtml:b,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",i),s.append(r)}function em(b){const t=new Path2D;if(!b)return t;for(let i=0,s=b.length;i<s;)switch(b[i++]){case Xa.moveTo:t.moveTo(b[i++],b[i++]);break;case Xa.lineTo:t.lineTo(b[i++],b[i++]);break;case Xa.curveTo:t.bezierCurveTo(b[i++],b[i++],b[i++],b[i++],b[i++],b[i++]);break;case Xa.quadraticCurveTo:t.quadraticCurveTo(b[i++],b[i++],b[i++],b[i++]);break;case Xa.closePath:t.closePath();break;default:ft(`Unrecognized drawing path operator: ${b[i-1]}`);break}return t}class tr{#t=null;#e=null;#n;#i=null;#r=null;#a=null;#s=null;#l=null;static#c=null;constructor(t){this.#n=t,tr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",ui,{signal:i}),t.addEventListener("pointerdown",tr.#o,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#o(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,Wt(t)}#h(t){this.#n._focusEventsAllowed=!0,Wt(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",ui,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",tr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#l=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#l&&(this.#l.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Oy{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",ui,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,r=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const u=o.x+(i?o.width:0);if(c>s){r=u,s=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,o]=this.#r(i,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,i,s,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",ui,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function im(b,t,i){for(const s of i)t.addEventListener(s,b[s].bind(b))}class Lt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(Lt.#e||=new Set).add(t)}static setPointer(t,i){Lt.#t||=i,Lt.#i??=t}static setTimeStamp(t){Lt.#n=t}static isSamePointerId(t){return Lt.#t===t}static isSamePointerIdOrRemove(t){return Lt.#t===t?!0:(Lt.#e?.delete(t),!1)}static isSamePointerType(t){return Lt.#i===t}static isInitializedAndDifferentPointerType(t){return Lt.#i!==null&&!Lt.isSamePointerType(t)}static isSameTimeStamp(t){return Lt.#n===t}static isUsingMultiplePointers(){return Lt.#e?.size>=1}static clearPointerType(){Lt.#i=null}static clearPointerIds(){Lt.#t=NaN,Lt.#e=null}static clearTimeStamp(){Lt.#n=NaN}}class Ly{#t=0;get id(){return`${er}${this.#t++}`}}class Qu{#t=Zg();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return pt(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await lr(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=Qu._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const m=s.svgUrl=c.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=c.onerror=g});c.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){ft(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:o}=t;return this.#i(`${i}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class ky{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(c&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class ur{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=he.platform;for(const[s,r,o={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...c,i)(),o||Wt(i))}}class Zu{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Cy(t),pt(this,"_colors",t)}convert(t){const i=cr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((o,c)=>o===i[c]))return Zu._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?J.makeHexColor(...i):t}}class En{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#a=null;#s=null;#l=null;#c=new ky;#o=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#E=null;#w=null;#S=null;#C=null;#A=!1;#x=null;#R=new Ly;#M=!1;#D=!1;#P=!1;#O=null;#k=null;#F=null;#B=null;#q=null;#T=gt.NONE;#_=new Set;#L=null;#U=null;#H=null;#Y=null;#X=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#I=[0,0];#z=null;#V=null;#W=null;#J=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=En.prototype,i=c=>c.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return pt(this,"_keyboardManager",new ur([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,r,o,c,u,d,f,g,m,y,A,w,S,E){const x=this._signal=this.#t.signal;this.#V=t,this.#W=i,this.#J=s,this.#a=r,this.#o=o,this.#U=c,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:x}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),u._on("setpreference",this.onSetPreference.bind(this),{signal:x}),u._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:x}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:x}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#E=d.filterFactory,this.#H=f,this.#C=g||null,this.#b=m,this.#v=y,this.#y=A,this.#q=w||null,this.viewParameters={realScale:Qs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#_.clear(),this.#c.destroy(),this.#a?.destroy(),this.#o?.destroy(),this.#U?.destroy(),this.#x?.hide(),this.#x=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return pt(this,"hcmFilter",this.#H?this.#E.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return pt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return pt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return pt(this,"highlightColors",null);const i=new Map,s=!!this.#H;for(const[r,o]of t){const c=r.endsWith("_HCM");if(s&&c){i.set(r.replace("_HCM",""),o);continue}!s&&!c&&i.set(r,o)}return pt(this,"highlightColors",i)}get highlightColorNames(){return pt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}hasCommentManager(){return!!this.#o}editComment(t,i,s,r){this.#o?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#o?.updateComment(t.getData())}updatePopupColor(t){this.#o?.updatePopupColor(t)}removeComment(t){this.#o?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#o?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#o?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#o?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=i)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:r,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#W.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Qs.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u}=s,d=s.toString(),g=this.#Z(s).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;s.empty();const y=this.#tt(g),A=this.#T===gt.NONE,w=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:r,anchorOffset:o,focusNode:c,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(gt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Z(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#x||=new Oy(this),this.#x.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${er}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#x?.hide(),this.#L=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#L)return;const r=this.#Z(t).closest(".textLayer");if(!r){this.#L&&(this.#x?.hide(),this.#L=null,this.#N({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#L=i,this.#N({hasSelectedText:!0}),!(this.#T!==gt.HIGHLIGHT&&this.#T!==gt.NONE)&&(this.#T===gt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===gt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#D){const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#$("main_toolbar")}}#$(t=""){this.#T===gt.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#lt(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ot(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#_)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#_){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){ft(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of s){const f=await r.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)this.#it(d);this.#nt(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){ft(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==gt.NONE&&!this.isEditorHandlingKeyboard&&En._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(t){Object.entries(t).some(([s,r])=>this.#K[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,t)}),this.#T===gt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Tt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#lt(),this.#ut(),this.#N({isEditing:this.#T!==gt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ot(),this.#ht(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,o=!1,c=!1){if(this.#T!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===gt.POPUP&&this.#o?.hideSidebar(),this.#o?.destroyPopup(),this.#T=t,t===gt.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===gt.SIGNATURE&&await this.#U?.loadSignatures(),s&&Lt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#r.values())u.updateMode(t);if(t===gt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#i.values()){const{annotationElementId:g,hasComment:m,deleted:y}=f;g&&u.add(g),m&&!y&&d.push(f.getData())}for(const f of this.#n){const{id:g,popupRef:m,contentsObj:y}=f;m&&y?.str&&!u.has(g)&&!this.#m.has(g)&&d.push(f)}this.#o?.showSidebar(d)}if(!i){r&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const u of this.#i.values())u.uid===i?(this.setSelected(u),c?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Tt.CREATE:this.currentLayer.addNewEditor(i);return;case Tt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#_)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#Y?.get(Tt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Tt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#P!==t){this.#P=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#_)i!==t&&i.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#c.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#c.cleanType(t)}#Q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#_],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#it(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#_)i.unselect();this.#_.clear();for(const i of t)i.isEmpty()||(this.#_.add(i),i.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==gt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#I[0]+=t,this.#I[1]+=i;const[r,o]=this.#I,c=[...this.#_],u=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#I[0]=this.#I[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of c)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#_)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,i||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(r,o,c,u)=>{if(this.#i.has(r.id)){const d=this.#r.get(u);d?r._setParentAndPosition(d,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)s(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)s(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==gt.NONE}get imageManager(){return pt(this,"imageManager",new Qu)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,m,y)=>({x:(g-r)/c,y:1-(f+m-s)/o,width:y/c,height:m/o});break;case"180":u=(f,g,m,y)=>({x:1-(f+m-s)/o,y:1-(g+y-r)/c,width:m/o,height:y/c});break;case"270":u=(f,g,m,y)=>({x:1-(g+y-r)/c,y:(f-s)/o,width:y/c,height:m/o});break;default:u=(f,g,m,y)=>({x:(f-s)/o,y:(g-r)/c,width:m/o,height:y/c});break}const d=[];for(let f=0,g=i.rangeCount;f<g;f++){const m=i.getRangeAt(f);if(!m.collapsed)for(const{x:y,y:A,width:w,height:S}of m.getClientRects())w===0||S===0||d.push(u(y,A,w,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#l||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const i=this.#l?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#T===gt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Ei{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#s=!1;#l=null;#c=null;#o=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Ei.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ei._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ei.#f.missing),i.setAttribute("data-l10n-id",Ei.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",ui,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(t){this.#t===null&&(this.#o=t,this.#d=await Ei._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#l?.remove(),this.#l=null;return}if(!this.#l){const i=this.#l=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#l.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#o===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#o,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#o=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#l?.remove(),this.#l=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ei.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Ei.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Rl{#t=null;#e=null;#n=!1;#i=null;#r=null;#a=null;#s=null;#l=null;#c=!1;#o=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#o)return this.#o;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/c,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#o=t}hasDefaultPopupPosition(){return this.#o===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",ui,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,Wt(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,Wt(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,r(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:g,height:m,x:y,y:A}=this.#i;s=y+s*g,r=A+r*m}const o=this.#i.parent.boundingClientRect,{x:c,y:u,width:d,height:f}=o;this.#i._uiManager.editComment(this.#i,c+s*d,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#l,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#l=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#l=null,this.#a=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#l=null,this.#i=null,this.#n=!1,this.#c=!1}}class Ql{#t;#e=!1;#n=null;#i;#r;#a;#s;#l=null;#c;#o=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=r,this.#a=o,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ti.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#l)return;const r=this.#l=new AbortController,o=AbortSignal.any([this.#c,r.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#l?.abort(),this.#l=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Wt(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,c={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#g.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",Wt,c),o.addEventListener("pointermove",Wt,c),o.addEventListener("pointercancel",Wt,c),o.addEventListener("pointerup",Wt,c),this.#r?.()}if(Wt(t),t.touches.length!==2||this.#n?.()){this.#o=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#o={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#o||t.touches.length!==2)return;Wt(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:o}=i,{screenX:c,screenY:u}=s,d=this.#o,{touch0X:f,touch0Y:g,touch1X:m,touch1Y:y}=d,A=m-f,w=y-g,S=c-r,E=u-o,x=Math.hypot(S,E)||1,C=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(C-x)<=Ql.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=c,d.touch1Y=u,!this.#e){this.#e=!0;return}const T=[(r+c)/2,(o+u)/2];this.#a?.(T,C,x)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#o&&(Wt(t),this.#o=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#l?.abort(),this.#l=null}}class at{#t=null;#e=null;#n=null;#i=null;#r=null;#a=!1;#s=null;#l="";#c=null;#o=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#b=!1;#v=!1;#y=null;#E=0;#w=0;#S=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#x=at._zIndex++;static _borderLineWidth=-1;static _colorManager=new Zu;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=at.prototype._resizeWithKeyboard,i=En.TRANSLATE_SMALL,s=En.TRANSLATE_BIG;return pt(this,"_resizerKeyboardManager",new ur([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],at.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return pt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new By({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(at._l10n??=t,at._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),at._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);at._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){It("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#z(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[o,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#R([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#R(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,f]=this.getBaseTranslation();c+=d,u+=f;const{style:g}=s;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=at,r=s/t,o=s/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:o,y:c,width:u,height:d}=this;if(u*=s,d*=r,o*=s,c*=r,this._mustFixPosition)switch(t){case 0:o=Te(o,0,s-u),c=Te(c,0,r-d);break;case 90:o=Te(o,0,s-d),c=Te(c,u,r);break;case 180:o=Te(o,u,s),c=Te(c,d,r);break;case 270:o=Te(o,d,s),c=Te(c,0,r-u);break}this.x=o/=s,this.y=c/=r;const[f,g]=this.getBaseTranslation();o+=f,c+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return at.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return at.#M(t,i,360-this.parentRotation)}#D(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",ui,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=he.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#o=[i.screenX,i.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",Wt,{passive:!1,signal:c}),window.addEventListener("contextmenu",ui,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===i&&u===s&&d===r||this.addCommands({cmd:this.#k.bind(this,o,c,u,d),undo:this.#k.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=at.MIN_SIZE/s,g=at.MIN_SIZE/r,m=this.#D(this.rotation),y=(z,G)=>[m[0]*z+m[2]*G,m[1]*z+m[3]*G],A=this.#D(360-this.rotation),w=(z,G)=>[A[0]*z+A[2]*G,A[1]*z+A[3]*G];let S,E,x=!1,C=!1;switch(t){case"topLeft":x=!0,S=(z,G)=>[0,0],E=(z,G)=>[z,G];break;case"topMiddle":S=(z,G)=>[z/2,0],E=(z,G)=>[z/2,G];break;case"topRight":x=!0,S=(z,G)=>[z,0],E=(z,G)=>[0,G];break;case"middleRight":C=!0,S=(z,G)=>[z,G/2],E=(z,G)=>[0,G/2];break;case"bottomRight":x=!0,S=(z,G)=>[z,G],E=(z,G)=>[0,0];break;case"bottomMiddle":S=(z,G)=>[z/2,G],E=(z,G)=>[z/2,0];break;case"bottomLeft":x=!0,S=(z,G)=>[0,G],E=(z,G)=>[z,0];break;case"middleLeft":C=!0,S=(z,G)=>[0,G/2],E=(z,G)=>[z,G/2];break}const T=S(u,d),R=E(u,d);let k=y(...R);const N=at._round(o+k[0]),L=at._round(c+k[1]);let Y=1,$=1,tt,Q;if(i.fromKeyboard)({deltaX:tt,deltaY:Q}=i);else{const{screenX:z,screenY:G}=i,[Z,mt]=this.#o;[tt,Q]=this.screenToPageTranslation(z-Z,G-mt),this.#o[0]=z,this.#o[1]=G}if([tt,Q]=w(tt/s,Q/r),x){const z=Math.hypot(u,d);Y=$=Math.max(Math.min(Math.hypot(R[0]-T[0]-tt,R[1]-T[1]-Q)/z,1/u,1/d),f/u,g/d)}else C?Y=Te(Math.abs(R[0]-T[0]-tt),f,1)/u:$=Te(Math.abs(R[1]-T[1]-Q),g,1)/d;const ct=at._round(u*Y),_t=at._round(d*$);k=y(...E(ct,_t));const ut=N-k[0],Mt=L-k[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ct,this.height=_t,this.x=ut,this.y=Mt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new tr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Ei.initialize(at._l10n),this.#n=new Ei(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Rl(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Rl(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Rl(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Rl(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,d=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),im(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Ql({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const c=this.#D(this.rotation),u=(N,L)=>[c[0]*N+c[2]*L,c[1]*N+c[3]*L],[d,f]=this.parentDimensions,g=this.x,m=this.y,y=this.width,A=this.height,w=at.MIN_SIZE/d,S=at.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/A),w/y,S/A);const E=at._round(y*o),x=at._round(A*o);if(E===y&&x===A)return;this.#u||=[g,m,y,A];const C=u(y/2,A/2),T=at._round(g+C[0]),R=at._round(m+C[1]),k=u(E/2,x/2);this.x=T-k[0],this.y=R-k[1],this.width=E,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=he.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(t);return}this.#L(t)}#L(t){const{isMac:i}=he.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#L(f),s&&this._onStopDragging()};i&&(this.#E=t.clientX,this.#w=t.clientY,this.#s=t.pointerId,this.#l=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:m,pointerId:y}=f;if(y!==this.#s){Wt(f);return}const[A,w]=this.screenToPageTranslation(g-this.#E,m-this.#w);this.#E=g,this.#w=m,this._uiManager.dragSelectedEditors(A,w)},c),window.addEventListener("touchmove",Wt,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#l&&(this.#C||f.isPrimary)&&u(f),Wt(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}Wt(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,g=i/r,m=this.x*o,y=this.y*c,A=this.width*o,w=this.height*c;switch(s){case 0:return[m+f+u,c-y-g-w+d,m+f+A+u,c-y-g+d];case 90:return[m+g+u,c-y+f+d,m+g+w+u,c-y+f+A+d];case 180:return[m-f-A+u,c-y+g+d,m-f+u,c-y+g+w+d];case 270:return[m-g-w+u,c-y-f-A+d,m-g+u,c-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,o,c]=t,u=o-s,d=c-r;switch(this.rotation){case 0:return[s,i-c,u,d];case 90:return[s,i-r,d,u];case 180:return[o,i-r,u,d];case 270:return[o,i-c,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&at._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:o,richText:c},uid:u,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return i<c&&r>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,c]=r.pageDimensions,[u,d,f,g]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=d/c,r.width=f/o,r.height=g/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#z(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,o,c]=this.getPDFRect();return[at._round(s+(o-s)*t),at._round(r+(c-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const c=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#K.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",at._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const c of i){if(c===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",at._l10nResizer[f])}}this.#I(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){at._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#z()}#K(t){this.#m=this.#v?t:""}#I(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#z(){this.#v=!1,this.#I(-1),this.#F()}_stopResizingWithKeyboard(){this.#z(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},at._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class By extends at{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Dg=3285377520,li=4294901760,wi=65535;class nm{constructor(t){this.h1=t?t&4294967295:Dg,this.h2=t?t&4294967295:Dg}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,E=t.length;S<E;S++){const x=t.charCodeAt(S);x<=255?i[s++]=x:(i[s++]=x>>>8,i[s++]=x&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,d=0,f=this.h1,g=this.h2;const m=3432918353,y=461845907,A=m&wi,w=y&wi;for(let S=0;S<r;S++)S&1?(u=c[S],u=u*m&li|u*A&wi,u=u<<15|u>>>17,u=u*y&li|u*w&wi,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*m&li|d*A&wi,d=d<<15|d>>>17,d=d*y&li|d*w&wi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*m&li|u*A&wi,u=u<<15|u>>>17,u=u*y&li|u*w&wi,r&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&li|t*36045&wi,i=i*4283543511&li|((i<<16|t>>>16)*2950163797&li)>>>16,t^=i>>>1,t=t*444984403&li|t*60499&wi,i=i*3301882366&li|((i<<16|t>>>16)*3120437893&li)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Uu=Object.freeze({map:null,hash:"",transfer:void 0});class Wu{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof at&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof at)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,c]of Object.entries(i))s[o]!==c&&(r=!0,s[o]=c);else r=!0,this.#i.set(t,i);r&&this.#r(),i instanceof at&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sm(this)}get serializable(){if(this.#i.size===0)return Uu;const t=new Map,i=new nm,s=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof at?u.serialize(!1,r):u;d&&(t.set(c,d),i.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:Uu}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const o of this.#i.values()){if(!(o instanceof at)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,g]of Object.entries(c)){if(f==="type")continue;let m=d.get(f);m||(m=new Map,d.set(f,m));const y=m.get(g)??0;m.set(g,y+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[o,c]of i)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class sm extends Wu{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){It("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return pt(this,"modifiedIds",{ids:new Set,hash:""})}}class zy{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Ct(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:c}=t,u=new FontFace(r,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{ft(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}It("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw ft(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return pt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return pt(this,"isSyncFontLoadingSupported",Ee||he.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Ct(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return pt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(R,k){return R.charCodeAt(k)<<24|R.charCodeAt(k+1)<<16|R.charCodeAt(k+2)<<8|R.charCodeAt(k+3)&255}function r(R,k,N,L){const Y=R.substring(0,k),$=R.substring(k+N);return Y+L+$}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(R,k){if(++f>30){ft("Load test font never loaded."),k();return}if(d.font="30px "+R,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(g.bind(null,R,k))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,m.length,m);const w=16,S=1482184792;let E=s(y,w);for(o=0,c=m.length-3;o<c;o+=4)E=E-S+s(m,o)|0;o<m.length&&(E=E-S+s(m+"XXX",o)|0),y=r(y,w,4,my(E));const x=`url(data:font/opentype;base64,${btoa(y)});`,C=`@font-face {font-family:"${m}";src:${x}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[t.loadedName,m]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=R,T.append(k)}this._document.body.append(T),g(m,()=>{T.remove(),i.complete()})}}class Py{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Wg(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(c){ft(`getPathGenerator - ignoring character: "${c}".`)}const o=em(r?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){pt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){pt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Vs{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of Vs.strings){const g=i.encode(t[f]);s[f]=g,r+=4+g.length}const o=new ArrayBuffer(r),c=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of Vs.strings){const g=s[f],m=g.length;u.setUint32(d,m),c.set(g,d+4),d+=4+m}return Ct(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Ct(t<Vs.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class Xs{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const y of Xs.strings){const A=i.encode(t[y]);s[y]=A,r+=4+A.length}r+=4;let o,c,u=1+r;t.style&&(o=i.encode(t.style.style),c=i.encode(t.style.weight),u+=4+o.length+4+c.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let m=0;g.setUint8(m++,t.guessFallback?1:0),g.setUint32(m,0),m+=4,r=0;for(const y of Xs.strings){const A=s[y],w=A.length;r+=4+w,g.setUint32(m,w),f.set(A,m+4),m+=4+w}return g.setUint32(m-r-4,r),t.style&&(g.setUint32(m,o.length),f.set(o,m+4),m+=4+o.length,g.setUint32(m,c.length),f.set(c,m+4),m+=4+c.length),Ct(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Ct(t<Xs.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:o}}}class Ut{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#a;#s;#l;constructor({data:t,extra:i}){this.#a=t,this.#s=new TextDecoder,this.#l=new DataView(this.#a),i&&Object.assign(this,i)}#c(t){Ct(t<Ut.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#l.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#o(t){return Ct(t<Ut.numbers.length,"Invalid number index"),this.#l.getFloat64(Ut.#t+t*8)}get ascent(){return this.#o(0)}get defaultWidth(){return this.#o(1)}get descent(){return this.#o(2)}get bbox(){let t=Ut.#e;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#l.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Ut.#n;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#l.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Ut.#i;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#l.getInt16(t,!0)),t+=2;return s}#d(t){Ct(t<Ut.strings.length,"Invalid string index");let i=Ut.#r+4;for(let o=0;o<t;o++)i+=this.#l.getUint32(i)+4;const s=this.#l.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Ut.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);t+=4+r;const o=this.#l.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=Ut.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);t+=4+r;const o=this.#l.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#l.setUint32(t,0)}get cssFontInfo(){let t=Ut.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#a,t+4,r)),new Vs(o.buffer)}get systemFontInfo(){let t=Ut.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,t+4,s)),new Xs(r.buffer)}static write(t){const i=t.systemFontInfo?Xs.write(t.systemFontInfo):null,s=t.cssFontInfo?Vs.write(t.cssFontInfo):null,r=new TextEncoder,o={};let c=0;for(const S of Ut.strings)o[S]=r.encode(t[S]),c+=4+o[S].length;const u=Ut.#r+4+c+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let m=0;const y=Ut.bools.length;let A=0,w=0;for(let S=0;S<y;S++){const E=t[Ut.bools[S]];A|=(E===void 0?0:E?2:1)<<w,w+=2,(w===8||S===y-1)&&(g.setUint8(m++,A),A=0,w=0)}Ct(m===Ut.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Ut.numbers)g.setFloat64(m,t[S]),m+=8;if(Ct(m===Ut.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(m++,4);for(const S of t.bbox)g.setInt16(m,S,!0),m+=2}else g.setUint8(m++,0),m+=8;if(Ct(m===Ut.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(m++,6);for(const S of t.fontMatrix)g.setFloat64(m,S,!0),m+=8}else g.setUint8(m++,0),m+=48;if(Ct(m===Ut.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(m++,1);for(const S of t.defaultVMetrics)g.setInt16(m,S,!0),m+=2}else g.setUint8(m++,0),m+=6;Ct(m===Ut.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Ut.#r,0),m+=4;for(const S of Ut.strings){const E=o[S],x=E.length;g.setUint32(m,x),f.set(E,m+4),m+=4+x}if(g.setUint32(Ut.#r,m-Ut.#r-4),!i)g.setUint32(m,0),m+=4;else{const S=i.byteLength;g.setUint32(m,S),Ct(m+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),m+4),m+=4+S}if(!s)g.setUint32(m,0),m+=4;else{const S=s.byteLength;g.setUint32(m,S),Ct(m+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),m+4),m+=4+S}return t.data===void 0?(g.setUint32(m,0),m+=4):(g.setUint32(m,t.data.length),f.set(t.data,m+4),m+=4+t.data.length),Ct(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class pe{static#t=0;static#e=1;static#n=2;static#i=3;static#r=4;static#a=8;static#s=12;static#l=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],o=[],c=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],c=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,d=t[1],r=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(r.length/2),m=Math.floor(o.length/3),y=c.length,A=u.length;let w=0;for(const k of u)w+=1,w=Math.ceil(w/4)*4,w+=4+k.coords.length*4,w+=4+k.colors.length*4,k.verticesPerRow!==void 0&&(w+=4);const S=20+g*8+m*3+y*8+(s?16:0)+(f?3:0)+w,E=new ArrayBuffer(S),x=new DataView(E),C=new Uint8Array(E);x.setUint8(pe.#t,i),x.setUint8(pe.#e,s?1:0),x.setUint8(pe.#n,f?1:0),x.setUint8(pe.#i,d),x.setUint32(pe.#r,g,!0),x.setUint32(pe.#a,m,!0),x.setUint32(pe.#s,y,!0),x.setUint32(pe.#l,A,!0);let T=20;new Float32Array(E,T,g*2).set(r),T+=g*8,C.set(o,T),T+=m*3;for(const[k,N]of c)x.setFloat32(T,k,!0),T+=4,x.setUint32(T,parseInt(N.slice(1),16),!0),T+=4;if(s)for(const k of s)x.setFloat32(T,k,!0),T+=4;f&&(C.set(f,T),T+=3);for(let k=0;k<u.length;k++){const N=u[k];x.setUint8(T,N.type),T+=1,T=Math.ceil(T/4)*4,x.setUint32(T,N.coords.length,!0),T+=4,new Int32Array(E,T,N.coords.length).set(N.coords),T+=N.coords.length*4,x.setUint32(T,N.colors.length,!0),T+=4,new Int32Array(E,T,N.colors.length).set(N.colors),T+=N.colors.length*4,N.verticesPerRow!==void 0&&(x.setUint32(T,N.verticesPerRow,!0),T+=4)}return E}getIR(){const t=this.view,i=this.data[pe.#t],s=!!this.data[pe.#e],r=!!this.data[pe.#n],o=t.getUint32(pe.#r,!0),c=t.getUint32(pe.#a,!0),u=t.getUint32(pe.#s,!0),d=t.getUint32(pe.#l,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const m=new Uint8Array(this.buffer,f,c*3);f+=c*3;const y=[];for(let E=0;E<u;++E){const x=t.getFloat32(f,!0);f+=4;const C=t.getUint32(f,!0);f+=4,y.push([x,`#${C.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let E=0;E<4;++E)A.push(t.getFloat32(f,!0)),f+=4}let w=null;r&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let E=0;E<d;++E){const x=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const C=t.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,C);f+=C*4;const R=t.getUint32(f,!0);f+=4;const k=new Int32Array(this.buffer,f,R);f+=R*4;const N={type:x,coords:T,colors:k};x===ku.LATTICE&&(N.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(N)}if(i===1)return["RadialAxial","axial",A,y,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,y,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const E=this.data[pe.#i];let x=null;if(g.length>0){let C=g[0],T=g[0],R=g[1],k=g[1];for(let N=0;N<g.length;N+=2){const L=g[N],Y=g[N+1];C=C>L?L:C,R=R>Y?Y:R,T=T<L?L:T,k=k<Y?Y:k}x=[C,R,T,k]}return["Mesh",E,g,m,S,x,A,w]}throw new Error(`Unsupported pattern kind: ${i}`)}}class Fy{static write(t){let i,s;return he.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),i=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),i=new Float32Array(s)),i.set(t),s}#t;constructor(t){this.#t=t}get path(){return he.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function Uy(b){if(b instanceof URL)return b.href;if(typeof b=="string"){if(Ee)return b;const t=URL.parse(b,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function jy(b){if(Ee&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return rr(b);if(b instanceof ArrayBuffer||ArrayBuffer.isView(b)||typeof b=="object"&&!isNaN(b?.length))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Nl(b){if(typeof b!="string")return null;if(b.endsWith("/"))return b;throw new Error(`Invalid factory url: "${b}" must include trailing slash.`)}const ju=b=>typeof b=="object"&&Number.isInteger(b?.num)&&b.num>=0&&Number.isInteger(b?.gen)&&b.gen>=0,Hy=b=>typeof b=="object"&&typeof b?.name=="string",Iy=Sy.bind(null,ju,Hy);class Gy{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){ft("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Ol={DATA:1,ERROR:2},le={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Rg(){}function ze(b){if(b instanceof xn||b instanceof Bu||b instanceof _g||b instanceof Il||b instanceof Eu)return b;switch(b instanceof Error||typeof b=="object"&&b!==null||It('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new xn(b.message);case"InvalidPDFException":return new Bu(b.message);case"PasswordException":return new _g(b.message,b.code);case"ResponseException":return new Il(b.message,b.status,b.missing);case"UnknownErrorException":return new Eu(b.message,b.details)}return new Eu(b.message,b.toString())}class Wa{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Ol.DATA)r.resolve(t.data);else if(t.callback===Ol.ERROR)r.reject(ze(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(c){o.postMessage({sourceName:s,targetName:r,callback:Ol.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:r,callback:Ol.ERROR,callbackId:t.callbackId,reason:ze(c)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,i,s,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},r),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:c,targetName:u,stream:le.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Ct(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:le.CANCEL,streamId:o,reason:ze(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=g,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:le.ENQUEUE,streamId:i,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:le.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){Ct(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:le.ERROR,streamId:i,reason:ze(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:le.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:le.START_COMPLETE,streamId:i,reason:ze(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case le.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(ze(t.reason));break;case le.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(ze(t.reason));break;case le.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:le.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Rg).then(function(){o.postMessage({sourceName:s,targetName:r,stream:le.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:le.PULL_COMPLETE,streamId:i,reason:ze(f)})});break;case le.ENQUEUE:if(Ct(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case le.CLOSE:if(Ct(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,i);break;case le.ERROR:Ct(c,"error should have stream controller"),c.controller.error(ze(t.reason)),this.#r(c,i);break;case le.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(ze(t.reason)),this.#r(c,i);break;case le.CANCEL:if(!u)break;const d=ze(t.reason);Promise.try(u.onCancel||Rg,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:le.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:le.CANCEL_COMPLETE,streamId:i,reason:ze(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class am{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){It("Abstract method `_createCanvas` called.")}}class qy extends am{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class rm{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class Ng extends rm{async _fetch(t){const i=await lr(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):rr(i)}}class lm{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,o){return"none"}destroy(t=!1){}}class Vy extends lm{#t;#e;#n;#i;#r;#a;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#l(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#o(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(Xi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(Xi,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=d[m]/255;const g=f.join(",");return[g,g,g]}const[i,s,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,c[d]=s[d]/255,u[d]=r[d]/255;return[o.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&($l(i)?ft('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=$g(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#l.get(t);if(i)return i;const[s,r,o]=this.#d(t),c=t.length===1?s:`${s}${r}${o}`;if(i=this.#l.get(c),i)return this.#l.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,d=this.#h(u);this.#l.set(t,d),this.#l.set(c,d);const f=this.#g(u);return this.#p(s,r,o,f),d}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!t||!i))return o.url;const c=this.#v(t);t=J.makeHexColor(...c);const u=this.#v(i);if(i=J.makeHexColor(...u),this.#o.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const w=A/255;d[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#i}_hcm_filter`,m=o.filter=this.#g(g);this.#p(f,f,f,m),this.#m(m);const y=(A,w)=>{const S=c[A]/255,E=u[A]/255,x=new Array(w+1);for(let C=0;C<=w;C++)x[C]=S+C/w*(E-S);return x.join(",")};return this.#p(y(0,5),y(1,5),y(2,5),m),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#l.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#l.get(r),i)return this.#l.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(o);this.#l.set(t,c),this.#l.set(r,c);const u=this.#g(o);return this.#b(s,u),c}addLuminosityFilter(t){let i=this.#l.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#l.get(r),i)return this.#l.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(o);this.#l.set(t,c),this.#l.set(r,c);const u=this.#g(o);return this.#f(u),t&&this.#b(s,u),c}addHighlightHCMFilter(t,i,s,r,o){const c=`${i}-${s}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[d,f]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,A]=[r,o].map(this.#v.bind(this));m<g&&([g,m,y,A]=[m,g,A,y]),this.#o.style.color="";const w=(x,C,T)=>{const R=new Array(256),k=(m-g)/T,N=x/255,L=(C-x)/(255*T);let Y=0;for(let $=0;$<=T;$++){const tt=Math.round(g+$*k),Q=N+$*L;for(let ct=Y;ct<=tt;ct++)R[ct]=Q;Y=tt+1}for(let $=Y;$<256;$++)R[$]=R[Y-1];return R.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,E=u.filter=this.#g(S);return this.#m(E),this.#p(w(y[0],A[0],5),w(y[1],A[1],5),w(y[2],A[2],5),E),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const i=this.#r.createElementNS(Xi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(Xi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#r.createElementNS(Xi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#o.append(i),i}#u(t,i,s){const r=this.#r.createElementNS(Xi,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#p(t,i,s,r){const o=this.#r.createElementNS(Xi,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#b(t,i){const s=this.#r.createElementNS(Xi,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#o.style.color=t,cr(getComputedStyle(this.#o).getPropertyValue("color"))}}class om{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class Og extends om{async _fetch(t){const i=await lr(t,"arraybuffer");return new Uint8Array(i)}}class cm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class Lg extends cm{async _fetch(t){const i=await lr(t,"arraybuffer");return new Uint8Array(i)}}Ee&&ft("Please use the `legacy` build in Node.js environments.");async function Ju(b){const i=await process.getBuiltinModule("fs").promises.readFile(b);return new Uint8Array(i)}class Xy extends lm{}class Yy extends am{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class Ky extends rm{async _fetch(t){return Ju(t)}}class $y extends om{async _fetch(t){return Ju(t)}}class Qy extends cm{async _fetch(t){return Ju(t)}}const Fs="__forcedDependency",{floor:kg,ceil:Bg}=Math;function Ll(b,t,i,s,r,o){b[t*4+0]=Math.min(b[t*4+0],i),b[t*4+1]=Math.min(b[t*4+1],s),b[t*4+2]=Math.max(b[t*4+2],r),b[t*4+3]=Math.max(b[t*4+3],o)}const Hu=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Zy{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Hu}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const kl=(b,t)=>{if(!b)return;let i=b.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},b.set(t,i)),i};class Wy{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Fs]:[]};#n=new Map;#i=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#l=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#o=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#b(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(Hu,i.length)):this.#u.fill(Hu)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Fs]:{__proto__:this.#e[Fs]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(kl(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(kl(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&(kl(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#a.push(J.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(Fs,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#o)this.recordFutureForcedDependency(Fs,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#l[0]=1/0,this.#l[1]=1/0,this.#l[2]=-1/0,this.#l[3]=-1/0),this}recordClipBox(t,i,s,r,o,c){const u=J.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform()),d=[1/0,1/0,-1/0,-1/0];J.axialAlignedBoundingBox([s,o,r,c],u,d);const f=J.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,o,c){const u=this.#s;if(u[0]===1/0)return this;const d=J.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform());if(u[0]===-1/0)return J.axialAlignedBoundingBox([s,o,r,c],d,this.#l),this;const f=[1/0,1/0,-1/0,-1/0];return J.axialAlignedBoundingBox([s,o,r,c],d,f),this.#l[0]=Math.min(this.#l[0],Math.max(f[0],u[0])),this.#l[1]=Math.min(this.#l[1],Math.max(f[1],u[1])),this.#l[2]=Math.max(this.#l[2],Math.min(f[2],u[2])),this.#l[3]=Math.max(this.#l[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,o=0,c=0,u){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],J.axialAlignedBoundingBox(d,s.fontMatrix,g),(r!==1||o!==0||c!==0)&&J.scaleMinMax([r,0,0,-r,o,c],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const m=u();return d&&g&&f===void 0&&(f=g[0]<=o-m.actualBoundingBoxLeft&&g[2]>=o+m.actualBoundingBoxRight&&g[1]<=c-m.actualBoundingBoxAscent&&g[3]>=c+m.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,c-m.actualBoundingBoxAscent,c+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#l[0]=Math.max(0,this.#s[0]),this.#l[1]=Math.max(0,this.#s[1]),this.#l[2]=Math.min(this.#f,this.#s[2]),this.#l[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#o,r=this.#t,o=this.#e;for(const c of i)c in this.#t?s.add(r[c]):c in o&&o[c].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#o.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[Fs]),this.#p){const s=kl(this.#p,t),{dependencies:r}=s;this.#o.forEach(r.add,r),this.#i.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=kg(this.#l[0]*256/this.#f),r=kg(this.#l[1]*256/this.#m),o=Bg(this.#l[2]*256/this.#f),c=Bg(this.#l[3]*256/this.#m);Ll(this.#g,t,s,r,o,c);for(const u of this.#o)u!==t&&Ll(this.#g,u,s,r,o,c);for(const u of this.#i)u!==t&&Ll(this.#g,u,s,r,o,c);for(const u of this.#r)u!==t&&Ll(this.#g,u,s,r,o,c);i||(this.#o.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#o);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#l[0]),this.#s[1]=Math.max(this.#s[1],this.#l[1]),this.#s[2]=Math.min(this.#s[2],this.#l[2]),this.#s[3]=Math.min(this.#s[3],this.#l[3]),i||this.#o.clear()),this}_takePendingDependencies(){const t=this.#o;return this.#o=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#o.add(i)}take(){return this.#h.clear(),new Zy(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class Gl{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof Gl&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,o,c){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,o,c),this}recordBBox(t,i,s,r,o,c){return this.#n||this.#t.recordBBox(this.#e,i,s,r,o,c),this}recordCharacterBBox(t,i,s,r,o,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,o,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const oi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},_e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Iu(b,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),b.clip(r)}class th{isModifyingCurrentTransform(){return!1}getPattern(){It("Abstract method `getPattern` called.")}}class Jy extends th{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,i=null){let s,r=this._p0,o=this._p1;if(i&&(r=r.slice(),o=o.slice(),J.applyTransform(r,i),J.applyTransform(o,i)),this._type==="axial")s=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(i){const d=new Float32Array(2);J.singularValueDecompose2dScale(i,d),c*=d[0],u*=d[0]}s=t.createRadialGradient(r[0],r[1],c,o[0],o[1],u)}for(const c of this._colorStops)s.addColorStop(c[0],c[1]);return s}getPattern(t,i,s,r){let o;if(r===_e.STROKE||r===_e.FILL){if(this.isOriginBased()){let y=J.transform(s,i.baseTransform);this.matrix&&(y=J.transform(y,this.matrix));const A=.001,w=Math.hypot(y[0],y[1]),S=Math.hypot(y[2],y[3]),E=(y[0]*y[2]+y[1]*y[3])/(w*S);if(Math.abs(E)<A)if(this.isRadial()){if(Math.abs(w-S)<A)return this._createGradient(t,y)}else return this._createGradient(t,y)}const c=i.current.getClippedPathBoundingBox(r,Kt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),s=J.transform(s,[1,0,0,1,c[0],c[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),Iu(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(s);o.setTransform(m)}else Iu(t,this._bbox),o=this._createGradient(t);return o}}function Mu(b,t,i,s,r,o,c,u){const d=t.coords,f=t.colors,g=b.data,m=b.width*4;let y;d[i+1]>d[s+1]&&(y=i,i=s,s=y,y=o,o=c,c=y),d[s+1]>d[r+1]&&(y=s,s=r,r=y,y=c,c=u,u=y),d[i+1]>d[s+1]&&(y=i,i=s,s=y,y=o,o=c,c=y);const A=(d[i]+t.offsetX)*t.scaleX,w=(d[i+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,E=(d[s+1]+t.offsetY)*t.scaleY,x=(d[r]+t.offsetX)*t.scaleX,C=(d[r+1]+t.offsetY)*t.scaleY;if(w>=C)return;const T=f[o],R=f[o+1],k=f[o+2],N=f[c],L=f[c+1],Y=f[c+2],$=f[u],tt=f[u+1],Q=f[u+2],ct=Math.round(w),_t=Math.round(C);let ut,Mt,z,G,Z,mt,vt,D;for(let I=ct;I<=_t;I++){if(I<E){const lt=I<w?0:(w-I)/(w-E);ut=A-(A-S)*lt,Mt=T-(T-N)*lt,z=R-(R-L)*lt,G=k-(k-Y)*lt}else{let lt;I>C?lt=1:E===C?lt=0:lt=(E-I)/(E-C),ut=S-(S-x)*lt,Mt=N-(N-$)*lt,z=L-(L-tt)*lt,G=Y-(Y-Q)*lt}let K;I<w?K=0:I>C?K=1:K=(w-I)/(w-C),Z=A-(A-x)*K,mt=T-(T-$)*K,vt=R-(R-tt)*K,D=k-(k-Q)*K;const W=Math.round(Math.min(ut,Z)),rt=Math.round(Math.max(ut,Z));let ht=m*I+W*4;for(let lt=W;lt<=rt;lt++)K=(ut-lt)/(ut-Z),K<0?K=0:K>1&&(K=1),g[ht++]=Mt-(Mt-mt)*K|0,g[ht++]=z-(z-vt)*K|0,g[ht++]=G-(G-D)*K|0,g[ht++]=255}}function tv(b,t,i){const s=t.coords,r=t.colors;let o,c;switch(t.type){case ku.LATTICE:const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let m=0;m<f;m++,g++)Mu(b,i,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),Mu(b,i,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case ku.TRIANGLES:for(o=0,c=s.length;o<c;o+=3)Mu(b,i,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class ev extends th{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/m,w=g/y,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/w},E=m+4,x=y+4,C=s.getCanvas("mesh",E,x),T=C.context,R=T.createImageData(m,y);if(i){const N=R.data;for(let L=0,Y=N.length;L<Y;L+=4)N[L]=i[0],N[L+1]=i[1],N[L+2]=i[2],N[L+3]=255}for(const N of this._figures)tv(R,N,S);return T.putImageData(R,2,2),{canvas:C.canvas,offsetX:u-2*A,offsetY:d-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){Iu(t,this._bbox);const o=new Float32Array(2);if(r===_e.SHADING)J.singularValueDecompose2dScale(Kt(t),o);else if(this.matrix){J.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;J.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else J.singularValueDecompose2dScale(i.baseTransform,o);const c=this._createMeshCanvas(o,r===_e.SHADING?null:this._background,i.cachedCanvases);return r!==_e.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class iv extends th{getPattern(){return"hotpink"}}function nv(b){switch(b[0]){case"RadialAxial":return new Jy(b);case"Mesh":return new ev(b);case"Dummy":return new iv}throw new Error(`Unknown IR type: ${b[0]}`)}const zg={COLORED:1,UNCOLORED:2};class eh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),Kl("TilingType: "+c);const m=s[0],y=s[1],A=s[2],w=s[3],S=A-m,E=w-y,x=new Float32Array(2);J.singularValueDecompose2dScale(this.matrix,x);const[C,T]=x;J.singularValueDecompose2dScale(this.baseTransform,x);const R=C*x[0],k=T*x[1];let N=S,L=E,Y=!1,$=!1;const tt=Math.ceil(f*R),Q=Math.ceil(g*k),ct=Math.ceil(S*R),_t=Math.ceil(E*k);tt>=ct?N=f:Y=!0,Q>=_t?L=g:$=!0;const ut=this.getSizeAndScale(N,this.ctx.canvas.width,R),Mt=this.getSizeAndScale(L,this.ctx.canvas.height,k),z=t.cachedCanvases.getCanvas("pattern",ut.size,Mt.size),G=z.context,Z=d.createCanvasGraphics(G,i);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,o,u),G.translate(-ut.scale*m,-Mt.scale*y),Z.transform(0,ut.scale,0,0,Mt.scale,0,0),G.save(),Z.dependencyTracker?.save(),this.clipBbox(Z,m,y,A,w),Z.baseTransform=Kt(Z.ctx),Z.executeOperatorList(r),Z.endDrawing(),Z.dependencyTracker?.restore(),G.restore(),Y||$){const mt=z.canvas;Y&&(N=f),$&&(L=g);const vt=this.getSizeAndScale(N,this.ctx.canvas.width,R),D=this.getSizeAndScale(L,this.ctx.canvas.height,k),I=vt.size,K=D.size,W=t.cachedCanvases.getCanvas("pattern-workaround",I,K),rt=W.context,ht=Y?Math.floor(S/f):0,lt=$?Math.floor(E/g):0;for(let Jt=0;Jt<=ht;Jt++)for(let jt=0;jt<=lt;jt++)rt.drawImage(mt,I*Jt,K*jt,I,K,0,0,I,K);return{canvas:W.canvas,scaleX:vt.scale,scaleY:D.scale,offsetX:m,offsetY:y}}return{canvas:z.canvas,scaleX:ut.scale,scaleY:Mt.scale,offsetX:m,offsetY:y}}getSizeAndScale(t,i,s){const r=Math.max(eh.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,r,o){const c=r-i,u=o-s;t.ctx.rect(i,s,c,u),J.axialAlignedBoundingBox([i,s,r,o],Kt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,o=t.current;switch(i){case zg.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=c,r.strokeStyle=o.strokeColor=u;break;case zg.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new gy(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,o){let c=s;r!==_e.SHADING&&(c=J.transform(c,i.baseTransform),this.matrix&&(c=J.transform(c,this.matrix)));const u=this.createPatternCanvas(i,o);let d=new DOMMatrix(c);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function sv({src:b,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=he.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],g=s>>3,m=s&7,y=b.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<r;w++){for(const E=t+g;t<E;t++){const x=t<y?b[t]:255;i[A++]=x&128?f:d,i[A++]=x&64?f:d,i[A++]=x&32?f:d,i[A++]=x&16?f:d,i[A++]=x&8?f:d,i[A++]=x&4?f:d,i[A++]=x&2?f:d,i[A++]=x&1?f:d}if(m===0)continue;const S=t<y?b[t++]:255;for(let E=0;E<m;E++)i[A++]=S&1<<7-E?f:d}return{srcPos:t,destPos:A}}const Pg=16,Fg=100,av=15,Ug=10,Pe=16,Du=new DOMMatrix,Qe=new Float32Array(2),Gs=new Float32Array([1/0,1/0,-1/0,-1/0]);function rv(b,t){if(b._removeMirroring)throw new Error("Context is already forwarding operations.");b.__originalSave=b.save,b.__originalRestore=b.restore,b.__originalRotate=b.rotate,b.__originalScale=b.scale,b.__originalTranslate=b.translate,b.__originalTransform=b.transform,b.__originalSetTransform=b.setTransform,b.__originalResetTransform=b.resetTransform,b.__originalClip=b.clip,b.__originalMoveTo=b.moveTo,b.__originalLineTo=b.lineTo,b.__originalBezierCurveTo=b.bezierCurveTo,b.__originalRect=b.rect,b.__originalClosePath=b.closePath,b.__originalBeginPath=b.beginPath,b._removeMirroring=()=>{b.save=b.__originalSave,b.restore=b.__originalRestore,b.rotate=b.__originalRotate,b.scale=b.__originalScale,b.translate=b.__originalTranslate,b.transform=b.__originalTransform,b.setTransform=b.__originalSetTransform,b.resetTransform=b.__originalResetTransform,b.clip=b.__originalClip,b.moveTo=b.__originalMoveTo,b.lineTo=b.__originalLineTo,b.bezierCurveTo=b.__originalBezierCurveTo,b.rect=b.__originalRect,b.closePath=b.__originalClosePath,b.beginPath=b.__originalBeginPath,delete b._removeMirroring},b.save=function(){t.save(),this.__originalSave()},b.restore=function(){t.restore(),this.__originalRestore()},b.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},b.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},b.transform=function(i,s,r,o,c,u){t.transform(i,s,r,o,c,u),this.__originalTransform(i,s,r,o,c,u)},b.setTransform=function(i,s,r,o,c,u){t.setTransform(i,s,r,o,c,u),this.__originalSetTransform(i,s,r,o,c,u)},b.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},b.rotate=function(i){t.rotate(i),this.__originalRotate(i)},b.clip=function(i){t.clip(i),this.__originalClip(i)},b.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},b.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},b.bezierCurveTo=function(i,s,r,o,c,u){t.bezierCurveTo(i,s,r,o,c,u),this.__originalBezierCurveTo(i,s,r,o,c,u)},b.rect=function(i,s,r,o){t.rect(i,s,r,o),this.__originalRect(i,s,r,o)},b.closePath=function(){t.closePath(),this.__originalClosePath()},b.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class lv{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Bl(b,t,i,s,r,o,c,u,d,f){const[g,m,y,A,w,S]=Kt(b);if(m===0&&y===0){const C=c*g+w,T=Math.round(C),R=u*A+S,k=Math.round(R),N=(c+d)*g+w,L=Math.abs(Math.round(N)-T)||1,Y=(u+f)*A+S,$=Math.abs(Math.round(Y)-k)||1;return b.setTransform(Math.sign(g),0,0,Math.sign(A),T,k),b.drawImage(t,i,s,r,o,0,0,L,$),b.setTransform(g,m,y,A,w,S),[L,$]}if(g===0&&A===0){const C=u*y+w,T=Math.round(C),R=c*m+S,k=Math.round(R),N=(u+f)*y+w,L=Math.abs(Math.round(N)-T)||1,Y=(c+d)*m+S,$=Math.abs(Math.round(Y)-k)||1;return b.setTransform(0,Math.sign(m),Math.sign(y),0,T,k),b.drawImage(t,i,s,r,o,0,0,$,L),b.setTransform(g,m,y,A,w,S),[$,L]}b.drawImage(t,i,s,r,o,c,u,d,f);const E=Math.hypot(g,m),x=Math.hypot(y,A);return[E*d,x*f]}class jg{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Lu;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ue.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=Gs.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=_e.FILL,i=null){const s=this.minMax.slice();if(t===_e.STROKE){i||It("Stroke bounding box must include transform."),J.singularValueDecompose2dScale(i,Qe);const r=Qe[0]*this.lineWidth/2,o=Qe[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=J.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Gs,0)}getClippedPathBoundingBox(t=_e.FILL,i=null){return J.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Hg(b,t){if(t instanceof ImageData){b.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%Pe,o=(i-r)/Pe,c=r===0?o:o+1,u=b.createImageData(s,Pe);let d=0,f;const g=t.data,m=u.data;let y,A,w,S;if(t.kind===Ul.GRAYSCALE_1BPP){const E=g.byteLength,x=new Uint32Array(m.buffer,0,m.byteLength>>2),C=x.length,T=s+7>>3,R=4294967295,k=he.isLittleEndian?4278190080:255;for(y=0;y<c;y++){for(w=y<o?Pe:r,f=0,A=0;A<w;A++){const N=E-d;let L=0;const Y=N>T?s:N*8-7,$=Y&-8;let tt=0,Q=0;for(;L<$;L+=8)Q=g[d++],x[f++]=Q&128?R:k,x[f++]=Q&64?R:k,x[f++]=Q&32?R:k,x[f++]=Q&16?R:k,x[f++]=Q&8?R:k,x[f++]=Q&4?R:k,x[f++]=Q&2?R:k,x[f++]=Q&1?R:k;for(;L<Y;L++)tt===0&&(Q=g[d++],tt=128),x[f++]=Q&tt?R:k,tt>>=1}for(;f<C;)x[f++]=0;b.putImageData(u,0,y*Pe)}}else if(t.kind===Ul.RGBA_32BPP){for(A=0,S=s*Pe*4,y=0;y<o;y++)m.set(g.subarray(d,d+S)),d+=S,b.putImageData(u,0,A),A+=Pe;y<c&&(S=s*r*4,m.set(g.subarray(d,d+S)),b.putImageData(u,0,A))}else if(t.kind===Ul.RGB_24BPP)for(w=Pe,S=s*w,y=0;y<c;y++){for(y>=o&&(w=r,S=s*w),f=0,A=S;A--;)m[f++]=g[d++],m[f++]=g[d++],m[f++]=g[d++],m[f++]=255;b.putImageData(u,0,y*Pe)}else throw new Error(`bad image kind: ${t.kind}`)}function Ig(b,t){if(t.bitmap){b.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%Pe,o=(i-r)/Pe,c=r===0?o:o+1,u=b.createImageData(s,Pe);let d=0;const f=t.data,g=u.data;for(let m=0;m<c;m++){const y=m<o?Pe:r;({srcPos:d}=sv({src:f,srcPos:d,dest:g,width:s,height:y,nonBlackColor:0})),b.putImageData(u,0,m*Pe)}}function Ya(b,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)b[s]!==void 0&&(t[s]=b[s]);b.setLineDash!==void 0&&(t.setLineDash(b.getLineDash()),t.lineDashOffset=b.lineDashOffset)}function zl(b){b.strokeStyle=b.fillStyle="#000000",b.fillRule="nonzero",b.globalAlpha=1,b.lineWidth=1,b.lineCap="butt",b.lineJoin="miter",b.miterLimit=10,b.globalCompositeOperation="source-over",b.font="10px sans-serif",b.setLineDash!==void 0&&(b.setLineDash([]),b.lineDashOffset=0);const{filter:t}=b;t!=="none"&&t!==""&&(b.filter="none")}function Gg(b,t){if(t)return!0;J.singularValueDecompose2dScale(b,Qe);const i=Math.fround(Ti.pixelRatio*Qs.PDF_TO_CSS_UNITS);return Qe[0]<=i&&Qe[1]<=i}const ov=["butt","round","square"],cv=["miter","round","bevel"],uv={},qg={};class Ys{constructor(t,i,s,r,o,{optionalContentConfig:c,markedContentStack:u=null},d,f,g){this.ctx=t,this.current=new jg(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new lv(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Kt(this.compositeCtx))}this.ctx.save(),zl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Kt(this.ctx)}executeOperatorList(t,i,s,r,o){const c=t.argsArray,u=t.fnArray;let d=i||0;const f=c.length;if(f===d)return d;const g=f-d>Ug&&typeof s=="function",m=g?Date.now()+av:0;let y=0;const A=this.commonObjs,w=this.objs;let S,E;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,s),d;if(!o||o(d))if(S=u[d],E=c[d]??null,S!==ir.dependency)E===null?this[S](d):this[S](d,...E);else for(const x of E){this.dependencyTracker?.recordNamedData(x,d);const C=x.startsWith("g_")?A:w;if(!C.has(x))return C.get(x,s),d}if(d++,d===f)return d;if(g&&++y>Ug){if(Date.now()>m)return s(),d;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,d=r,f="prescale1",g,m;for(;o>2&&u>1||c>2&&d>1;){let y=u,A=d;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),c>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/A),g=this.cachedCanvases.getCanvas(f,y,A),m=g.context,m.clearRect(0,0,y,A),m.drawImage(t,0,0,u,d,0,0,y,A),t=g.canvas,u=y,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:o}=i,c=this.current.fillColor,u=this.current.patternFill,d=Kt(s);let f,g,m,y;if((i.bitmap||i.data)&&i.count>1){const tt=i.bitmap||i.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(tt),f||(f=new Map,this._cachedBitmapsMap.set(tt,f));const Q=f.get(g);if(Q&&!u){const ct=Math.round(Math.min(d[0],d[2])+d[4]),_t=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,oi.transformAndFill),{canvas:Q,offsetX:ct,offsetY:_t}}m=Q}m||(y=this.cachedCanvases.getCanvas("maskCanvas",r,o),Ig(y.context,i));let A=J.transform(d,[1/r,0,0,-1/o,0,0]);A=J.transform(A,[1,0,0,1,0,-o]);const w=Gs.slice();J.axialAlignedBoundingBox([0,0,r,o],A,w);const[S,E,x,C]=w,T=Math.round(x-S)||1,R=Math.round(C-E)||1,k=this.cachedCanvases.getCanvas("fillCanvas",T,R),N=k.context,L=S,Y=E;N.translate(-L,-Y),N.transform(...A),m||(m=this._scaleImage(y.canvas,_i(N)),m=m.img,f&&u&&f.set(g,m)),N.imageSmoothingEnabled=Gg(Kt(N),i.interpolate),Bl(N,m,0,0,m.width,m.height,0,0,r,o),N.globalCompositeOperation="source-in";const $=J.transform(_i(N),[1,0,0,1,-L,-Y]);return N.fillStyle=u?c.getPattern(s,this,$,_e.FILL,t):c,N.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,k.canvas)),this.dependencyTracker?.recordDependencies(t,oi.transformAndFill),{canvas:k.canvas,offsetX:Math.round(L),offsetY:Math.round(Y)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=ov[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=cv[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),Ya(this.suspendedCtx,c),rv(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ya(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const o=r[0],c=r[1],u=r[2]-o,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(i.context,s,u,d,i.subtype,i.backdrop,i.transferMap,o,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,o,c,u,d,f,g,m){let y=t.canvas,A=d-g,w=f-m;if(c)if(A<0||w<0||A+s>y.width||w+r>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,r),x=E.context;x.drawImage(y,-A,-w),x.globalCompositeOperation="destination-atop",x.fillStyle=c,x.fillRect(0,0,s,r),x.globalCompositeOperation="source-over",y=E.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(A,w,s,r),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,w,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(y,A,w,s,r,d,f,s,r),i.restore()}save(t){this.inSMaskMode&&Ya(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ya(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const c=i===ir.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=em(o)),J.axialAlignedBoundingBox(r,Kt(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,_i(r),_e.STROKE,t),c){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(c)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,oi.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(_e.STROKE,Kt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,_i(r),_e.FILL,t),f){const g=new Path2D;g.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,oi.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,d)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,oi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=uv}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=qg}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:c,x:u,y:d,fontSize:f,path:g}of i)g&&r.addPath(g,new DOMMatrix(c).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),o=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=r.fontMatrix||Lu,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&ft("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const c=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const f=r.italic?"italic":"normal";let g=s;s<Pg?g=Pg:s>Fg&&(g=Fg),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,o,c){const u=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,y=g&ue.FILL_STROKE_MASK,A=!!(g&ue.ADD_TO_PATH_FLAG),w=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(E=f.getPathGenerator(this.commonObjs,i)),E&&(f.disableFontFace||w||S)){u.save(),u.translate(s,r),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,u,f);let x;if(y===ue.FILL||y===ue.FILL_STROKE)if(o){x=u.getTransform(),u.setTransform(...o);const C=this.#n(E,x,o);u.fill(C)}else u.fill(E);if(y===ue.STROKE||y===ue.FILL_STROKE)if(c){x||=u.getTransform(),u.setTransform(...c);const{a:C,b:T,c:R,d:k}=x,N=J.inverseTransform(c),L=J.transform([C,T,R,k,0,0],N);J.singularValueDecompose2dScale(L,Qe),u.lineWidth*=Math.max(Qe[0],Qe[1])/m,u.stroke(this.#n(E,x,c))}else u.lineWidth/=m,u.stroke(E);u.restore()}else(y===ue.FILL||y===ue.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,s,r,()=>u.measureText(i))),(y===ue.STROKE||y===ue.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,m,s,r,()=>u.measureText(i)).recordDependencies(t,oi.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:Kt(u),x:s,y:r,fontSize:m,path:E}),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return pt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,oi.showText).resetBBox(t),this.current.textRenderingMode&ue.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,m=s.textHScale*g,y=i.length,A=r.vertical,w=A?1:-1,S=r.defaultVMetrics,E=o*s.fontMatrix[0],x=s.textRenderingMode===ue.FILL&&!r.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),g>0?c.scale(m,-1):c.scale(m,1);let C,T;const R=s.textRenderingMode&ue.FILL_STROKE_MASK,k=R===ue.FILL||R===ue.FILL_STROKE,N=R===ue.STROKE||R===ue.FILL_STROKE;if(k&&s.patternFill){c.save();const Q=s.fillColor.getPattern(c,this,_i(c),_e.FILL,t);C=Kt(c),c.restore(),c.fillStyle=Q}if(N&&s.patternStroke){c.save();const Q=s.strokeColor.getPattern(c,this,_i(c),_e.STROKE,t);T=Kt(c),c.restore(),c.strokeStyle=Q}let L=s.lineWidth;const Y=s.textMatrixScale;if(Y===0||L===0?N&&(L=this.getSinglePixelWidth()):L/=Y,u!==1&&(c.scale(u,u),L/=u),c.lineWidth=L,r.isInvalidPDFjsFont){const Q=[];let ct=0;for(const ut of i)Q.push(ut.unicode),ct+=ut.width;const _t=Q.join("");if(c.fillText(_t,0,0),this.dependencyTracker!==null){const ut=c.measureText(_t);this.dependencyTracker.recordBBox(t,this.ctx,-ut.actualBoundingBoxLeft,ut.actualBoundingBoxRight,-ut.actualBoundingBoxAscent,ut.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=ct*E*m,c.restore(),this.compose();return}let $=0,tt;for(tt=0;tt<y;++tt){const Q=i[tt];if(typeof Q=="number"){$+=w*Q*o/1e3;continue}let ct=!1;const _t=(Q.isSpace?f:0)+d,ut=Q.fontChar,Mt=Q.accent;let z,G,Z=Q.width;if(A){const D=Q.vmetric||S,I=-(Q.vmetric?D[1]:Z*.5)*E,K=D[2]*E;Z=D?-D[0]:Z,z=I/u,G=($+K)/u}else z=$/u,G=0;let mt;if(r.remeasure&&Z>0){mt=c.measureText(ut);const D=mt.width*1e3/o*u;if(Z<D&&this.isFontSubpixelAAEnabled){const I=Z/D;ct=!0,c.save(),c.scale(I,1),z/=I}else Z!==D&&(z+=(Z-D)/2e3*o/u)}if(this.contentVisible&&(Q.isInFont||r.missingFile)){if(x&&!Mt)c.fillText(ut,z,G),this.dependencyTracker?.recordCharacterBBox(t,c,mt?{bbox:null}:r,o/u,z,G,()=>mt??c.measureText(ut));else if(this.paintChar(t,ut,z,G,C,T),Mt){const D=z+o*Mt.offset.x/u,I=G-o*Mt.offset.y/u;this.paintChar(t,Mt.fontChar,D,I,C,T)}}const vt=A?Z*E-_t*g:Z*E+_t*g;$+=vt,ct&&c.restore()}A?s.y-=$:s.x+=$*m,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,o=r.font,c=r.fontSize,u=r.fontDirection,d=o.vertical?1:-1,f=r.charSpacing,g=r.wordSpacing,m=r.textHScale*u,y=r.fontMatrix||Lu,A=i.length,w=r.textRenderingMode===ue.INVISIBLE;let S,E,x,C;if(w||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(m,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new Gl(T,t):null,S=0;S<A;++S){if(E=i[S],typeof E=="number"){C=d*E*c/1e3,this.ctx.translate(C,0),r.x+=C*m;continue}const R=(E.isSpace?g:0)+f,k=o.charProcOperatorList[E.operatorListId];k?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...y),this.executeOperatorList(k),this.restore()):ft(`Type3 character "${E.operatorListId}" is not available.`);const N=[E.width,0];J.applyTransform(N,y),x=N[0]*c+R,s.translate(x,0),r.x+=x*m}s.restore(),T&&(this.dependencyTracker=T)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,o,c,u){const d=new Path2D;d.rect(r,o,c-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,o,u).recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||Kt(this.ctx),o={createCanvasGraphics:(c,u)=>new Ys(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Gl(this.dependencyTracker,u,!0):null)};s=new eh(i,this.ctx,o,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=nv(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,_i(s),_e.SHADING,t);const o=_i(s);if(o){const{width:c,height:u}=s.canvas,d=Gs.slice();J.axialAlignedBoundingBox([0,0,c,u],o,d);const[f,g,m,y]=d;this.ctx.fillRect(f,g,m-f,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,oi.transform).recordDependencies(t,oi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){It("Should not call beginInlineImage")}beginImageData(){It("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Kt(this.ctx),s)){J.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,c,u]=s,d=new Path2D;d.rect(r,o,c-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||Kl("TODO: Support non-isolated groups."),i.knockout&&ft("Knockout groups not supported.");const r=Kt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=Gs.slice();J.axialAlignedBoundingBox(i.bbox,Kt(s),o);const c=[0,0,s.canvas.width,s.canvas.height];o=J.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let m="groupAt"+this.groupLevel;i.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,f,g),A=y.context;A.translate(-u,-d),A.transform(...r);let w=new Path2D;const[S,E,x,C]=i.bbox;if(w.rect(S,E,x-S,C-E),i.matrix){const T=new Path2D;T.addPath(w,new DOMMatrix(i.matrix)),w=T}A.clip(w),i.smask&&this.smaskStack.push({canvas:y.canvas,context:A,offsetX:u,offsetY:d,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),Ya(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Kt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=Gs.slice();J.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,i,s,r,o,c){if(this.#t(),zl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,J.singularValueDecompose2dScale(Kt(this.ctx),Qe);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),m=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,m);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(Qe[0],0,0,-Qe[1],0,d*Qe[1]),zl(this.ctx)}else{zl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new jg(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,o=this._createMaskCanvas(t,i),c=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,o=0,c,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const d=this.ctx;d.save();const f=Kt(d);d.transform(s,r,o,c,0,0);const g=this._createMaskCanvas(t,i);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,y=u.length;m<y;m+=2){const A=J.transform(f,[s,r,o,c,u[m],u[m+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,oi.transformAndFill);for(const c of i){const{data:u,width:d,height:f,transform:g}=c,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=m.context;y.save();const A=this.getObject(t,u,c);Ig(y,A),y.globalCompositeOperation="source-in",y.fillStyle=o?r.getPattern(y,this,_i(s),_e.FILL,t):r,y.fillRect(0,0,d,f),y.restore(),s.save(),s.transform(...g),s.scale(1,-1),Bl(s,m.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){ft("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,o){if(!this.contentVisible)return;const c=this.getObject(t,i);if(!c){ft("Dependent image isn't ready yet");return}const u=c.width,d=c.height,f=[];for(let g=0,m=o.length;g<m;g+=2)f.push({transform:[s,0,0,r,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Hg(g,i),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,_i(o));o.imageSmoothingEnabled=Gg(Kt(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-r,0).recordDependencies(t,oi.imageXObject).recordOperation(t),Bl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const c=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;Hg(f,i),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)r.save(),r.transform(...c.transform),r.scale(1,-1),Bl(r,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,oi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===qg?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Kt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:o}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const d=Math.abs(i),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const g=d*t;c=u=g<1?1/g:1}else if(t===0)c=1/d,u=1/f;else{const g=d*t,m=f*t;c=g<1?1/g:1,u=m<1?1/m:1}}else{const d=Math.abs(i*o-s*r),f=Math.hypot(i,s),g=Math.hypot(r,o);if(t===0)c=g/d,u=f/d;else{const m=t*d;c=g>m?g/m:1,u=f>m?f/m:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,c),Du.a=1/o,Du.d=1/c;const d=new Path2D;if(d.addPath(t,Du),u.length>0){const f=Math.max(o,c);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(d),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const b in ir)Ys.prototype[b]!==void 0&&(Ys.prototype[ir[b]]=Ys.prototype[b]);class Ks{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class hv{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const js=Symbol("INTERNAL");class dv{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&Ke.DISPLAY),this.#e=!!(t&Ke.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==js&&It("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class fv{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=Ke.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new dv(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(js,!1);for(const s of t.on)this.#e.get(s)._setVisible(js,!0);for(const s of t.off)this.#e.get(s)._setVisible(js,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#r(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return ft(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Kl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(ft(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return ft(`Unknown optional content policy ${t.policy}.`),!0}return ft(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){ft(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(js,!1,!0);r._setVisible(js,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new nm;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class pv{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Ct(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Ct(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new gv(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new mv(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class gv{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=$u(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mv{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bv(b){let t=!0,i=s("filename\\*","i").exec(b);if(i){i=i[1];let g=u(i);return g=unescape(g),g=d(g),g=f(g),o(g)}if(i=c(b),i){const g=f(i);return o(g)}if(i=s("filename","i").exec(b),i){i=i[1];let g=u(i);return g=f(g),o(g)}function s(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(g,{fatal:!0}),A=rr(m);m=y.decode(A),t=!1}catch{}}return m}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function c(g){const m=[];let y;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=A.exec(g))!==null;){let[,S,E,x]=y;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[E,x]}const w=[];for(let S=0;S<m.length&&S in m;++S){let[E,x]=m[S];x=u(x),E&&(x=unescape(x),S===0&&(x=d(x))),w.push(x)}return w.join("")}function u(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let y=0;y<m.length;++y){const A=m[y].indexOf('"');A!==-1&&(m[y]=m[y].slice(0,A),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}g=m.join('"')}return g}function d(g){const m=g.indexOf("'");if(m===-1)return g;const y=g.slice(0,m),w=g.slice(m+1).replace(/^[^']*'/,"");return r(y,w)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),r(y,w);try{w=atob(w)}catch{}return r(y,w)})}return""}function um(b,t){const i=new Headers;if(!b||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function Zl(b){return URL.parse(b)?.origin??null}function hm({responseHeaders:b,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(b.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||s||!t||b.get("Accept-Ranges")!=="bytes"||(b.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function dm(b){const t=b.get("Content-Disposition");if(t){let i=bv(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if($u(i))return i}return null}function hr(b,t){return new Il(`Unexpected server response (${b}) while retrieving PDF "${t}".`,b,b===404||b===0&&t.startsWith("file:"))}function fm(b){return b===200||b===206}function pm(b,t,i){return{method:"GET",headers:b,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function gm(b){return b instanceof Uint8Array?b.buffer:b instanceof ArrayBuffer?b:(ft(`getArrayBuffer - unexpected data format: ${b}`),new Uint8Array(b).buffer)}class yv{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=um(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new vv(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Av(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class vv{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,pm(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Zl(o.url),!fm(o.status))throw hr(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=hm({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=dm(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:gm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Av{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${s-1}`);const c=r.url;fetch(c,pm(o,this._withCredentials,this._abortController)).then(u=>{const d=Zl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!fm(u.status))throw hr(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:gm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Ru=200,Nu=206;function Sv(b){const t=b.response;return typeof t!="string"?t:rr(t).buffer}class _v{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=um(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,c]of this.headers)i.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Nu):r.expectedStatus=Ru,i.responseType="arraybuffer",Ct(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||Ru;if(!(o===Ru&&s.expectedStatus===Nu)&&o!==s.expectedStatus){s.onError(r.status);return}const u=Sv(r);if(o===Nu){const d=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(ft('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class wv{constructor(t){this._source=t,this._manager=new _v(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xv(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new Ev(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class xv{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Zl(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=hm({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=dm(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=hr(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ev{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Zl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=hr(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Tv=/^[a-z][a-z0-9\-+.]+:/i;function Cv(b){if(Tv.test(b))return new URL(b);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(b))}class Mv{constructor(t){this.source=t,this.url=Cv(t.url),Ct(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Dv(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Rv(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Dv{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=hr(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Rv{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ka=Symbol("INITIAL_DATA");class mm{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ka}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===Ka)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==Ka}delete(t){const i=this.#t[t];return!i||i.data===Ka?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==Ka&&(yield[t,i])}}}const Nv=1e5,Vg=30;class $e{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#l=0;#c=null;#o=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#E=new WeakMap;static#w=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#o=i,this.#h=s.scale*Ti.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#b=[1,0,0,-1,-c,u+o],this.#l=r,this.#s=o,$e.#D(),i.style.setProperty("--min-font-size",$e.#w),Qn(i,s),this.#t.promise.finally(()=>{$e.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=he.platform;return pt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#C(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),$e.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Ti.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,Qn(this.#o,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:$e.#R(this.#r)};for(const c of this.#u)o.properties=this.#p.get(c),o.div=c,this.#x(o)}}cancel(){const t=new xn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#n)return;this.#a.ctx??=$e.#R(this.#r);const i=this.#u,s=this.#m;for(const r of t){if(i.length>Nv){ft("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=J.transform(this.#b,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=$e.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*$e.#P(u,c,this.#r);let g,m;o===0?(g=r[4],m=r[5]-f):(g=r[4]+f*Math.sin(o),m=r[5]-f*Math.cos(o));const y=i.style;y.left=`${(100*g/this.#l).toFixed(2)}%`,y.top=`${(100*m/this.#s).toFixed(2)}%`,y.setProperty("--font-height",`${d.toFixed(2)}px`),y.fontFamily=u,s.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);w!==S&&Math.max(w,S)/Math.min(w,S)>1.5&&(A=!0)}if(A&&(s.canvasWidth=c.vertical?t.height:t.width),this.#p.set(i,s),this.#a.div=i,this.#a.properties=s,this.#x(this.#a),s.hasText&&this.#e.append(i),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#x(t){const{div:i,properties:s,ctx:r}=t,{style:o}=i;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:d}=s;$e.#M(r,d*this.#h,c);const{width:f}=r.measureText(i.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&o.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#R(t=null){let i=this.#y.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,i),this.#E.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#E.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#D(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#P(t,i,s){const r=this.#v.get(t);if(r)return r;const o=this.#R(s);o.canvas.width=o.canvas.height=Vg,this.#M(o,Vg,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(he.platform.isFirefox&&ft("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const Ov=100;function bm(b={}){typeof b=="string"||b instanceof URL?b={url:b}:(b instanceof ArrayBuffer||ArrayBuffer.isView(b))&&(b={data:b});const t=new ih,{docId:i}=t,s=b.url?Uy(b.url):null,r=b.data?jy(b.data):null,o=b.httpHeaders||null,c=b.withCredentials===!0,u=b.password??null,d=b.range instanceof ym?b.range:null,f=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:2**16;let g=b.worker instanceof sr?b.worker:null;const m=b.verbosity,y=typeof b.docBaseUrl=="string"&&!$l(b.docBaseUrl)?b.docBaseUrl:null,A=Nl(b.cMapUrl),w=b.cMapPacked!==!1,S=b.CMapReaderFactory||(Ee?Ky:Ng),E=Nl(b.iccUrl),x=Nl(b.standardFontDataUrl),C=b.StandardFontDataFactory||(Ee?$y:Og),T=Nl(b.wasmUrl),R=b.WasmFactory||(Ee?Qy:Lg),k=b.stopAtErrors!==!0,N=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,L=b.isEvalSupported!==!1,Y=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!Ee,$=typeof b.isImageDecoderSupported=="boolean"?b.isImageDecoderSupported:!Ee&&(he.platform.isFirefox||!globalThis.chrome),tt=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,Q=typeof b.disableFontFace=="boolean"?b.disableFontFace:Ee,ct=b.fontExtraProperties===!0,_t=b.enableXfa===!0,ut=b.ownerDocument||globalThis.document,Mt=b.disableRange===!0,z=b.disableStream===!0,G=b.disableAutoFetch===!0,Z=b.pdfBug===!0,mt=b.CanvasFactory||(Ee?Yy:qy),vt=b.FilterFactory||(Ee?Xy:Vy),D=b.enableHWA===!0,I=b.useWasm!==!1,K=d?d.length:b.length??NaN,W=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!Ee&&!Q,rt=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:!!(S===Ng&&C===Og&&R===Lg&&A&&x&&T&&Za(A,document.baseURI)&&Za(x,document.baseURI)&&Za(T,document.baseURI)),ht=null;dy(m);const lt={canvasFactory:new mt({ownerDocument:ut,enableHWA:D}),filterFactory:new vt({docId:i,ownerDocument:ut}),cMapReaderFactory:rt?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:rt?null:new C({baseUrl:x}),wasmFactory:rt?null:new R({baseUrl:T})};g||(g=sr.create({verbosity:m,port:Ks.workerPort}),t._worker=g);const Jt={docId:i,apiVersion:"5.4.530",data:r,password:u,disableAutoFetch:G,rangeChunkSize:f,length:K,docBaseUrl:y,enableXfa:_t,evaluatorOptions:{maxImageSize:N,disableFontFace:Q,ignoreErrors:k,isEvalSupported:L,isOffscreenCanvasSupported:Y,isImageDecoderSupported:$,canvasMaxAreaInBytes:tt,fontExtraProperties:ct,useSystemFonts:W,useWasm:I,useWorkerFetch:rt,cMapUrl:A,iccUrl:E,standardFontDataUrl:x,wasmUrl:T}},jt={ownerDocument:ut,pdfBug:Z,styleElement:ht,loadingParams:{disableAutoFetch:G,enableXfa:_t}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Tn=g.messageHandler.sendWithPromise("GetDocRequest",Jt,r?[r.buffer]:null);let $i;if(d)$i=new pv(d,{disableRange:Mt,disableStream:z});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Cn=Za(s)?yv:Ee?Mv:wv;$i=new Cn({url:s,length:K,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:Mt,disableStream:z})}return Tn.then(Cn=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Zs=new Wa(i,Cn,g.port),Ci=new Bv(Zs,t,$i,jt,lt,D);t._transport=Ci,Zs.send("Ready",null)})}).catch(t._capability.reject),t}class ih{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ih.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class ym{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){It("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Lv{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class kv{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new xg:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new mm,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new or({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:o=_n.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:y=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,m,y),{renderingIntent:E,cacheKey:x}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(E);let C=this._intentStates.get(x);C||(C=Object.create(null),this._intentStates.set(x,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(E&Ke.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),k=!this.recordedBBoxes&&(A||R),N=$=>{if(C.renderTasks.delete(L),k){const tt=L.gfx?.dependencyTracker.take();tt&&(L.stepper&&L.stepper.setOperatorBBoxes(tt,L.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=tt))}T&&(this.#t=!0),this.#e(),$?(L.capability.reject($),this._abortOperatorList({intentState:C,reason:$ instanceof Error?$:new Error($)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new qs({callback:N,params:{canvas:i,canvasContext:t,dependencyTracker:k?new Wy(i,C.operatorList.length,R):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:w});(C.renderTasks||=new Set).add(L);const Y=L.task;return Promise.all([C.displayReadyCapability.promise,d]).then(([$,tt])=>{if(this.destroyed){N();return}if(this._stats?.time("Rendering"),!(tt.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:$,optionalContentConfig:tt}),L.operatorListChanged()}).catch(N),Y}getOperatorList({intent:t="display",annotationMode:i=_n.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>nr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function o(){c.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new xg),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:c}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},c).getReader(),f=this._intentStates.get(i);f.streamReader=d;const g=()=>{d.read().then(({value:m,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),g())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Ku){let r=Ov;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new xn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var wn,gi,Ki,Yn,Vl,Kn,$n,Ce,jl,vm,Am,Ja,$s,Hl;const Yt=class Yt{constructor({name:t=null,port:i=null,verbosity:s=fy()}={}){Ai(this,Ce);Ai(this,wn,Promise.withResolvers());Ai(this,gi,null);Ai(this,Ki,null);Ai(this,Yn,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Xt(Yt,$n).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Xt(Yt,$n).set(i,this),Si(this,Ce,vm).call(this,i)}else Si(this,Ce,Am).call(this)}get promise(){return Xt(this,wn).promise}get port(){return Xt(this,Ki)}get messageHandler(){return Xt(this,gi)}destroy(){this.destroyed=!0,Xt(this,Yn)?.terminate(),Be(this,Yn,null),Xt(Yt,$n).delete(Xt(this,Ki)),Be(this,Ki,null),Xt(this,gi)?.destroy(),Be(this,gi,null)}static create(t){const i=Xt(this,$n).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Yt(t)}static get workerSrc(){if(Ks.workerSrc)return Ks.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return pt(this,"_setupFakeWorkerGlobal",(async()=>Xt(this,$s,Hl)?Xt(this,$s,Hl):(await import(this.workerSrc)).WorkerMessageHandler)())}};wn=new WeakMap,gi=new WeakMap,Ki=new WeakMap,Yn=new WeakMap,Vl=new WeakMap,Kn=new WeakMap,$n=new WeakMap,Ce=new WeakSet,jl=function(){Xt(this,wn).resolve(),Xt(this,gi).send("configure",{verbosity:this.verbosity})},vm=function(t){Be(this,Ki,t),Be(this,gi,new Wa("main","worker",t)),Xt(this,gi).on("ready",()=>{}),Si(this,Ce,jl).call(this)},Am=function(){if(Xt(Yt,Kn)||Xt(Yt,$s,Hl)){Si(this,Ce,Ja).call(this);return}let{workerSrc:t}=Yt;try{Yt._isSameOrigin(window.location,t)||(t=Yt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new Wa("main","worker",i),r=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?Xt(this,wn).reject(new Error("Worker was destroyed")):Si(this,Ce,Ja).call(this)},o=new AbortController;i.addEventListener("error",()=>{Xt(this,Yn)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Be(this,gi,s),Be(this,Ki,i),Be(this,Yn,i),Si(this,Ce,jl).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{Si(this,Ce,Ja).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{Kl("The worker has been disabled.")}Si(this,Ce,Ja).call(this)},Ja=function(){Xt(Yt,Kn)||(ft("Setting up fake worker."),Be(Yt,Kn,!0)),Yt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Xt(this,wn).reject(new Error("Worker was destroyed"));return}const i=new Gy;Be(this,Ki,i);const s=`fake${hg(Yt,Vl)._++}`,r=new Wa(s+"_worker",s,i);t.setup(r,i),Be(this,gi,new Wa(s,s+"_worker",i)),Si(this,Ce,jl).call(this)}).catch(t=>{Xt(this,wn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},$s=new WeakSet,Hl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ai(Yt,$s),Ai(Yt,Vl,0),Ai(Yt,Kn,!1),Ai(Yt,$n,new WeakMap),Ee&&(Be(Yt,Kn,!0),Ks.workerSrc||="./pdf.worker.mjs"),Yt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},Yt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Yt.fromPort=t=>{if(Ey("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Yt.create(t)};let sr=Yt;class Bv{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,r,o,c){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new mm,this.fontLoader=new zy({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return pt(this,"annotationStorage",new Wu)}getRenderingIntent(t,i=_n.ENABLE,s=null,r=!1,o=!1){let c=Ke.DISPLAY,u=Uu;switch(t){case"any":c=Ke.ANY;break;case"display":break;case"print":c=Ke.PRINT;break;default:ft(`getRenderingIntent - invalid intent: ${t}`)}const d=c&Ke.PRINT&&s instanceof sm?s:this.annotationStorage;switch(i){case _n.DISABLE:c+=Ke.ANNOTATIONS_DISABLE;break;case _n.ENABLE:break;case _n.ENABLE_FORMS:c+=Ke.ANNOTATIONS_FORMS;break;case _n.ENABLE_STORAGE:c+=Ke.ANNOTATIONS_STORAGE,u=d.serializable;break;default:ft(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=Ke.IS_EDITING),o&&(c+=Ke.OPLIST);const{ids:f,hash:g}=d.modifiedIds,m=[c,u.hash,g];return{renderingIntent:c,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),$e.cleanup(),this._networkStream?.cancelAllRequests(new xn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}Ct(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{Ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}Ct(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new Lv(s,this))}),t.on("DocException",s=>{i._capability.reject(ze(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw ze(s);const r=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};i.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const m=o.error;ft(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const c=new Ut(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,d=new Py(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Ct(f,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,y]of m.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new Fy(o));break;case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new pe(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ft("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const c=new kv(i,o,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#n.set(i,r),r}getPageIndex(t){return ju(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(i=>new fv(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new hv(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:r[2]}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),$e.cleanup()}}cachedPageNumber(t){if(!ju(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class zv{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class qs{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zv(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(qs.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");qs.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ys(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),qs.#e.delete(this._canvas),t||=new Ku(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),qs.#e.delete(this._canvas),this.callback())))}}const Pv="5.4.530",Fv="50cc4adac";class ci{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#s=null;#l;#c=null;#o=null;static#d=null;static get _keyboardManager(){return pt(this,"_keyboardManager",new ur([[["Escape","mac+Escape"],ci.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ci.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ci.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ci.prototype._moveToPrevious],[["Home","mac+Home"],ci.prototype._moveToBeginning],[["End","mac+End"],ci.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#o=t?._uiManager||i,this.#l=this.#o._eventBus,this.#n=t?.color?.toUpperCase()||this.#o?.highlightColors.values().next().value||"#FFFF98",ci.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#o._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#o._signal;t.addEventListener("contextmenu",ui,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#o.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",ci.#d[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.ariaSelected=r===this.#n,o.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:Tt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastElementChild?.focus()}#m(t){ci._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#o.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#o.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class ar{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,ar.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",ar.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Xg(b){return Math.floor(Math.max(0,Math.min(1,b))*255).toString(16).padStart(2,"0")}function $a(b){return Math.max(0,Math.min(255,255*b))}class Yg{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=$a(t),[t,t,t]}static G_HTML([t]){const i=Xg(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map($a)}static RGB_HTML(t){return`#${t.map(Xg).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[$a(1-Math.min(1,t+r)),$a(1-Math.min(1,s+r)),$a(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,o=1-i,c=1-s,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class Uv{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){It("Abstract method `_createSVG` called.")}}class ql extends Uv{_createSVG(t){return document.createElementNS(Xi,t)}}const jv=9,Zn=new WeakSet,Hv=new Date().getTimezoneOffset()*60*1e3;class Ou{static create(t){switch(t.data.annotationType){case oe.LINK:return new nh(t);case oe.TEXT:return new Gv(t);case oe.WIDGET:switch(t.data.fieldType){case"Tx":return new qv(t);case"Btn":return t.data.radioButton?new Sm(t):t.data.checkBox?new Xv(t):new Yv(t);case"Ch":return new Kv(t);case"Sig":return new Vv(t)}return new Jn(t);case oe.POPUP:return new Gu(t);case oe.FREETEXT:return new _m(t);case oe.LINE:return new Qv(t);case oe.SQUARE:return new Zv(t);case oe.CIRCLE:return new Wv(t);case oe.POLYLINE:return new wm(t);case oe.CARET:return new tA(t);case oe.INK:return new sh(t);case oe.POLYGON:return new Jv(t);case oe.HIGHLIGHT:return new xm(t);case oe.UNDERLINE:return new eA(t);case oe.SQUIGGLY:return new iA(t);case oe.STRIKEOUT:return new nA(t);case oe.STAMP:return new Em(t);case oe.FILEATTACHMENT:return new sA(t);default:return new $t(t)}}}class $t{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return $t._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let o=-1/0,c=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>c?(c=i[u+1],o=i[u+2]):i[u+1]===c&&(o=Math.max(o,i[u+2]));return[o,c]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>c?(c=u[d+1],o=u[d]):u[d+1]===c&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${er}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${er}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(c-t[3]+d)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof Jn)&&!(this instanceof nh)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof Gu){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,E=i.borderStyle.verticalCornerRadius;if(S>0||E>0){const C=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;c.borderRadius=C}else if(this instanceof Sm){const C=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=C}switch(i.borderStyle.style){case Us.SOLID:c.borderStyle="solid";break;case Us.DASHED:c.borderStyle="dashed";break;case Us.BEVELED:ft("Unimplemented border style: beveled");break;case Us.INSET:ft("Unimplemented border style: inset");break;case Us.UNDERLINE:c.borderBottomStyle="solid";break}const x=i.borderColor||null;x?(this.#e=!0,c.borderColor=J.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):c.borderWidth=0}const f=J.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:m,pageX:y,pageY:A}=r.rawDims;c.left=`${100*(f[0]-y)/g}%`,c.top=`${100*(f[1]-A)/m}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(c.width=`${100*u/g}%`,c.height=`${100*d/m}%`):this.setRotation(w,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const o=r.detail[i],c=o[0],u=o.slice(1);r.target.style[s]=Yg[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Yg[`${c}_rgb`](u)})};return pt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,o]of Object.entries(i)){const c=s[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,E,x,C]=t.subarray(2,6);if(r===S&&o===E&&i===x&&s===C)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:E}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=r-i,f=o-s,{svgFactory:g}=this,m=g.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=g.createElement("defs");m.append(y);const A=g.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),y.append(A);for(let S=2,E=t.length;S<E;S+=8){const x=t[S],C=t[S+1],T=t[S+2],R=t[S+3],k=g.createElement("rect"),N=(T-i)/d,L=(o-C)/f,Y=(x-T)/d,$=(C-R)/f;k.setAttribute("x",N),k.setAttribute("y",L),k.setAttribute("width",Y),k.setAttribute("height",$),A.append(k),u?.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${L}" width="${Y}" height="${$}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new Gu({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){It("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===i)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Zn.has(f)){ft(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:d,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==i&&Zn.has(r)&&s.push({id:c,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Iv extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class nh extends $t{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){ft('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:c}=i,u=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const m of r){const y=this._fieldObjects[m]||[];for(const{id:A}of y)g.add(A)}for(const m of Object.values(this._fieldObjects))for(const y of m)g.has(y.id)===c&&u.push(y)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,f=[];for(const g of u){const{id:m}=g;switch(f.push(m),g.type){case"text":{const A=g.defaultValue||"";d.setValue(m,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(m,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(m,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Zn.has(y)){ft(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class Gv extends $t{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Jn extends $t{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return he.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,i,s,r){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":J.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||jv,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(xu*r))||1,m=f/g;c=Math.min(r,d(m/xu))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(f/xu))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=J.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class qv extends Jn{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),o.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Zn.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:m}=this.data,y=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=w=>{const{formattedValue:S}=d;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:E}=S;if(y&&(E.type=g,m&&(E.step=m)),d.userValue){const x=d.userValue;if(y)if(g==="time"){const C=new Date(x),T=[C.getHours(),C.getMinutes(),C.getSeconds()];E.value=T.map(R=>R.toString().padStart(2,"0")).join(":")}else E.value=new Date(x-Hv).toISOString().split(g==="date"?"T":".",1)[0];else E.value=x}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const E={value(x){d.userValue=x.detail.value??"",y||t.setValue(i,{value:d.userValue.toString()}),x.target.value=d.userValue},formattedValue(x){const{formattedValue:C}=x.detail;d.formattedValue=C,C!=null&&x.target!==document.activeElement&&(x.target.value=C);const T={formattedValue:C};y&&(T.value=C),t.setValue(i,T)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{const{charLimit:C}=x.detail,{target:T}=x;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let R=d.userValue;!R||R.length<=C||(R=R.slice(0,C),T.value=d.userValue=R,t.setValue(i,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(E,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let E=-1;if(S.key==="Escape"?E=0:S.key==="Enter"&&!this.data.multiLine?E=2:S.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:x}=S.target;d.lastCommittedValue!==x&&(d.lastCommittedValue=x,d.userValue=x,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,willCommit:!0,commitKey:E,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=S;let{value:x}=E;if(y){if(x&&g==="time"){const C=x.split(":").map(T=>parseInt(T,10));x=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),E.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();E.type="text"}d.userValue=x,d.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:E,target:x}=S,{value:C,selectionStart:T,selectionEnd:R}=x;let k=T,N=R;switch(S.inputType){case"deleteWordBackward":{const L=C.substring(0,T).match(/\w*[^\w]*$/);L&&(k-=L[0].length);break}case"deleteWordForward":{const L=C.substring(T).match(/^[^\w]*\w*/);L&&(N+=L[0].length);break}case"deleteContentBackward":T===R&&(k-=1);break;case"deleteContentForward":T===R&&(N+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:C,change:E||"",willCommit:!1,selStart:k,selEnd:N}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Vv extends Jn{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Xv extends Jn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Zn.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,s)){const g=d&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Sm extends Jn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(Zn.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=c===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const y=g&&m.id===s;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Yv extends nh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Kv extends Jn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");Zn.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const m=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===m});for(const g of this.data.options){const m=document.createElement("option");m.textContent=g.displayValue,m.value=g.exportValue,s.value.includes(g.exportValue)&&(m.setAttribute("selected",!0),o=!1),r.append(m)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),c=()=>{g.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=g=>{const m=g?"value":"textContent",{options:y,multiple:A}=r;return A?Array.prototype.filter.call(y,w=>w.selected).map(w=>w[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let d=u(!1);const f=g=>{const m=g.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const m={value(y){c?.();const A=y.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(y){r.multiple=!0},remove(y){const A=r.options,w=y.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,E=>E.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},clear(y){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(y){const{index:A,displayValue:w,exportValue:S}=y.detail.insert,E=r.children[A],x=document.createElement("option");x.textContent=w,x.value=S,E?E.before(x):r.append(x),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},items(y){const{items:A}=y.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:S,exportValue:E}=w,x=document.createElement("option");x.textContent=S,x.value=E,r.append(x)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},indices(y){const A=new Set(y.detail.indices);for(const w of y.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,g)}),r.addEventListener("input",g=>{const m=u(!0),y=u(!1);t.setValue(i,{value:m}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Gu extends $t{constructor(t){const{data:i,elements:s,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&$t._hasPopupData(i)}),this.elements=s,o&&$t._hasPopupData(i)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new $v({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Is}${r}`).join(",")),this.container}}class $v{#t=null;#e=this.#q.bind(this);#n=this.#U.bind(this);#i=this.#L.bind(this);#r=this.#_.bind(this);#a=null;#s=null;#l=null;#c=null;#o=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#b=null;#v=null;#y=null;#E=null;#w=null;#S=null;#C=!1;#A=null;#x=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:g,open:m,commentManager:y=null}){this.#s=t,this.#w=r,this.#l=c,this.#E=u,this.#d=d,this.#a=i,this.#y=f,this.#h=g,this.#o=s,this.#t=y,this.#A=s[0],this.#c=zu.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),y||(this.#R(),this.#s.hidden=!0,m&&this.#_())}#R(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#o)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#o.find(i=>i.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#b||this.#M(),!this.#b)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#D(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}#D(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,i]=this.#b,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#P(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#x||=this.#A.commentText,this.#x}set comment(t){t!==this.comment&&(this.#A.commentText=this.#x=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:r,y:o,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/c,(i+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:c,width:u,height:d}=r;this.#t.showDialog(null,this,o+i*u,c+s*d,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=J.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}tm({html:this.#O||this.#l.str,dir:this.#l?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#E,i=this.#l;return t?.str&&(!i?.str||i.str===t.str)&&this.#E.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#x=null):i&&(i.deleted?this.remove():(this.#P(),this.#x=i.text)),t&&(this.#b=null,this.#M(),this.#D());return}if(s||i?.deleted){this.remove();return}this.#R(),this.#S||={contentsObj:this.#l,richText:this.#E},t&&(this.#u=null),i&&i.text&&(this.#E=this.#B(i.text),this.#c=zu.toDateObject(i.date),this.#l=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#l,richText:this.#E}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#y;for(const w of this.#o)if(!u||J.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const d=J.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,m=d[0]+g,y=d[1];this.#u=[100*(m-r)/i,100*(y-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#_(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#C&&(this.#m||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class _m extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=gt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class Qv extends $t{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Zv extends $t{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",i-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Wv extends $t{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class wm extends $t{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(o,c,!0);let d=[];for(let g=0,m=i.length;g<m;g+=2){const y=i[g]-t[0],A=t[3]-i[g+1];d.push(`${y},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jv extends wm{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class tA extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class sh extends $t{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?gt.HIGHLIGHT:gt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:c,width:u,height:d}=this.#n(i,t),f=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let m=0,y=s.length;m<y;m++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[m].join(",")),g.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:d}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xm extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=gt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class eA extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class iA extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class nA extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Em extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=gt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class sA extends $t{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=he.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ah{#t=null;#e=null;#n=null;#i=new Map;#r=null;#a=null;#s=[];#l=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#a=f||null,this.#n=g||new Wu,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;Qn(s,this.viewport);const r=new Map,o=[],c={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ql,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const d=u.annotationType===oe.POPUP;if(d){const m=r.get(u.id);if(!m)continue;if(!this._commentManager){o.push(u);continue}c.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Ou.create(c);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const m=r.get(u.popupRef);m?m.push(f):r.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=c.elements=r.get(u.id);c.data=u;const f=Ou.create(c);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Is}${u.id}`,u.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#o()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#l){this.#l=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const o=s.id=`${Is}${r}`;t.push(this.#r?.getAriaAttributes(o).then(c=>{if(c)for(const[u,d]of c)s.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[s,r,o,c]}},{data:{rect:[u,d,f,g]}})=>{if(s===o&&r===c)return 1;if(u===f&&d===g)return-1;const m=c,y=r,A=(r+c)/2,w=g,S=d,E=(d+g)/2;if(A>=w&&E<=y)return-1;if(E>=m&&A<=S)return 1;const x=(s+o)/2,C=(u+f)/2;return x-C});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#a,svgFactory:new ql,parent:this};for(const s of t){s.borderStyle||=ah._defaultBorderStyle,i.data=s;const r=Ou.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${Is}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,Qn(i,{rotation:t.rotation}),this.#o(),i.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,o=new Iv({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${Is}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return pt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Us.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Pl=/\r\n?|\n/g;class ge extends at{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ge.prototype,i=o=>o.isEmpty(),s=En.TRANSLATE_SMALL,r=En.TRANSLATE_BIG;return pt(this,"_keyboardManager",new ur([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=gt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||ge._defaultColor||at._defaultLineColor,this.#i=t.fontSize||ge._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){at.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Tt.FREETEXT_SIZE:ge._defaultFontSize=i;break;case Tt.FREETEXT_COLOR:ge._defaultColor=i;break}}updateParams(t,i){switch(t){case Tt.FREETEXT_SIZE:this.#r(i);break;case Tt.FREETEXT_COLOR:this.#a(i);break}}static get defaultPropertiesToUpdate(){return[[Tt.FREETEXT_SIZE,ge._defaultFontSize],[Tt.FREETEXT_COLOR,ge._defaultColor||at._defaultLineColor]]}get propertiesToUpdate(){return[[Tt.FREETEXT_SIZE,this.#i],[Tt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new ar(this),[["colorPicker",this._colorPicker]]}get colorType(){return Tt.FREETEXT_COLOR}#r(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#l()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-ge._internalPadding*t,-(ge._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ge.#c(s)),i=s);return t.join(`
`)}#l(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#o(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ge._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,g]=this.pageDimensions,[m,y]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(c[0]-m)/f,w=i+this.height-(c[1]-y)/g;break;case 90:A=t+(c[0]-m)/f,w=i-(c[1]-y)/g,[u,d]=[d,-u];break;case 180:A=t-this.width+(c[0]-m)/f,w=i-(c[1]-y)/g,[u,d]=[-u,-d];break;case 270:A=t+(c[0]-m-this.height*g)/f,w=i+(c[1]-y-this.width*f)/g,[u,d]=[-d,u];break}this.setAt(A*r,w*o,u,d)}else this._moveAfterPaste(t,i);this.#o(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Pl,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=ge.#h(i.getData("text")||"").replaceAll(Pl,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(Pl,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=g;continue}w.push(ge.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(Pl,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===d&&(A=g),A.push(ge.#c(S))}this.#t=`${f.join(`
`)}${r}${g.join(`
`)}`,this.#o();const m=new Range;let y=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(y<=w){m.setStart(A,y),m.setEnd(A,y);break}y-=w}o.removeAllRanges(),o.addRange(m)}#o(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ge._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof _m){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:f,id:g,popupRef:m,richText:y,contentsObj:A,creationDate:w,modificationDate:S},textContent:E,textPosition:x,parent:{page:{pageNumber:C}}}=t;if(!E||E.length===0)return null;r=t={annotationType:gt.FREETEXT,color:Array.from(u),fontSize:c,value:E.join(`
`),position:x,pageIndex:C-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:m,comment:A?.str||null,richText:y,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=J.makeHexColor(...t.color),o.#t=ge.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=at._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){It("Abstract method `toSVGPath` must be implemented.")}get box(){It("Abstract getter `box` must be implemented.")}serialize(t,i){It("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u]*r,c[u+1]=s+t[u+1]*o;return c}static _rescaleAndSwap(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u+1]*r,c[u+1]=s+t[u]*o;return c}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)r[o]=i+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,o){switch(o){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,o,c){return[(t+5*s)/6,(i+5*r)/6,(5*s+o)/6,(5*r+c)/6,(s+o)/2,(r+c)/2]}}class Xn{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#s;#l;#c;#o;#d;#h;#f=[];static#m=8;static#g=2;static#u=Xn.#m+Xn.#g;constructor({x:t,y:i},s,r,o,c,u=0){this.#t=s,this.#h=o*r,this.#i=c,this.#a.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#o=Xn.#m*r,this.#c=Xn.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[s,r,o,c]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/o,(this.#l+(t[1]-i[1])/2-r)/c,(this.#s+(i[0]-t[0])/2-s)/o,(this.#l+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#s=t,this.#l=i;const[s,r,o,c]=this.#t;let[u,d,f,g]=this.#a.subarray(8,12);const m=t-f,y=i-g,A=Math.hypot(m,y);if(A<this.#c)return!1;const w=A-this.#o,S=w/A,E=S*m,x=S*y;let C=u,T=d;u=f,d=g,f+=E,g+=x,this.#f?.push(t,i);const R=-x/w,k=E/w,N=R*this.#h,L=k*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+N,g+L],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-N,g-L],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+N,d+L],2),this.#r.push(NaN,NaN,NaN,NaN,(u+N-s)/o,(d+L-r)/c),this.#a.set([u-N,d-L],14),this.#e.push(NaN,NaN,NaN,NaN,(u-N-s)/o,(d-L-r)/c)),this.#a.set([C,T,u,d,f,g],6),!this.isEmpty()):(this.#a.set([C,T,u,d,f,g],6),Math.abs(Math.atan2(T-d,C-u)-Math.atan2(x,E))<Math.PI/2?([u,d,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+g)/2-r)/c),[u,d,C,T]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((C+u)/2-s)/o,((T+d)/2-r)/c),!0):([C,T,u,d,f,g]=this.#a.subarray(0,6),this.#r.push(((C+5*u)/6-s)/o,((T+5*d)/6-r)/c,((5*u+f)/6-s)/o,((5*d+g)/6-r)/c,((u+f)/2-s)/o,((d+g)/2-r)/c),[f,g,u,d,C,T]=this.#a.subarray(12,18),this.#e.push(((C+5*u)/6-s)/o,((T+5*d)/6-r)/c,((5*u+f)/6-s)/o,((5*d+g)/6-r)/c,((u+f)/2-s)/o,((d+g)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#y(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#b(){const[t,i,s,r]=this.#t,[o,c,u,d]=this.#p();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-i)/r} L${(this.#a[4]-t)/s} ${(this.#a[5]-i)/r} L${o} ${c} L${u} ${d} L${(this.#a[16]-t)/s} ${(this.#a[17]-i)/r} L${(this.#a[14]-t)/s} ${(this.#a[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#y(t){const[i,s,r,o]=this.#t,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[d,f,g,m]=this.#p();t.push(`L${(c[0]-i)/r} ${(c[1]-s)/o} L${d} ${f} L${g} ${m} L${(u[0]-i)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,r,o,c){return new Tm(t,i,s,r,o,c)}getOutlines(){const t=this.#r,i=this.#e,s=this.#a,[r,o,c,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,y=d.length-2;m<y;m+=2)d[m]=(this.#f[m]-r)/c,d[m+1]=(this.#f[m+1]-o)/u;if(d[d.length-2]=(this.#s-r)/c,d[d.length-1]=(this.#l-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#E(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let m=0;m<g;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}g=this.#S(f,g);for(let m=i.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(i[m+y])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[m+y],f[g+1]=i[m+y+1],g+=2}return this.#w(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#E(t){const i=this.#a,[s,r,o,c]=this.#t,[u,d,f,g]=this.#p(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-r)/c],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#n,this.#i)}#w(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[o,c,u,d]=this.#t,[f,g,m,y]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/d],i),i+=24}}class Tm extends et{#t;#e=new Float32Array(4);#n;#i;#r;#a;#s;constructor(t,i,s,r,o,c){super(),this.#s=t,this.#r=i,this.#t=s,this.#a=r,this.#n=o,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#l(c);const[u,d,f,g]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-u)/f,t[m+1]=(t[m+1]-d)/g;for(let m=0,y=i.length;m<y;m+=2)i[m]=(i[m]-u)/f,i[m+1]=(i[m+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const c=s-t,u=r-i;let d,f;switch(o){case 0:d=et._rescale(this.#s,t,r,c,-u),f=et._rescale(this.#r,t,r,c,-u);break;case 90:d=et._rescaleAndSwap(this.#s,t,i,c,u),f=et._rescaleAndSwap(this.#r,t,i,c,u);break;case 180:d=et._rescale(this.#s,s,i,-c,u),f=et._rescale(this.#r,s,i,-c,u);break;case 270:d=et._rescaleAndSwap(this.#s,s,r,-c,-u),f=et._rescaleAndSwap(this.#r,s,r,-c,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#l(t){const i=this.#s;let s=i[4],r=i[5];const o=[s,r,s,r];let c=s,u=r,d=s,f=r;const g=t?Math.max:Math.min,m=new Float32Array(4);for(let A=6,w=i.length;A<w;A+=6){const S=i[A+4],E=i[A+5];isNaN(i[A])?(J.pointBoundingBox(S,E,o),u>E?(c=S,u=E):u===E&&(c=g(c,S)),f<E?(d=S,f=E):f===E&&(d=g(d,S))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,J.bezierBoundingBox(s,r,...i.slice(A,A+6),m),J.rectBoundingBox(m[0],m[1],m[2],m[3],o),u>m[1]?(c=m[0],u=m[1]):u===m[1]&&(c=g(c,m[0])),f<m[3]?(d=m[2],f=m[3]):f===m[3]&&(d=g(d,m[2]))),s=S,r=E}const y=this.#e;y[0]=o[0]-this.#n,y[1]=o[1]-this.#n,y[2]=o[2]-o[0]+2*this.#n,y[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,i,s,r,o,c=0){return new Xn(t,i,s,r,o,c)}getNewOutline(t,i){const[s,r,o,c]=this.#e,[u,d,f,g]=this.#t,m=o*f,y=c*g,A=s*f+u,w=r*g+d,S=this.newOutliner({x:this.#r[0]*m+A,y:this.#r[1]*y+w},this.#t,this.#a,t,this.#i,i??this.#n);for(let E=2;E<this.#r.length;E+=2)S.add({x:this.#r[E]*m+A,y:this.#r[E+1]*y+w});return S.getOutlines()}}class qu{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:E,width:x,height:C}of t){const T=Math.floor((S-i)/c)*c,R=Math.ceil((S+x+i)/c)*c,k=Math.floor((E-i)/c)*c,N=Math.ceil((E+C+i)/c)*c,L=[T,k,N,!0],Y=[R,k,N,!1];this.#i.push(L,Y),J.rectBoundingBox(T,k,R,N,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let m=r?-1/0:1/0,y=1/0;const A=this.#i.at(r?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[E,x,C,T]=S;!T&&r?x<y?(y=x,m=E):x===y&&(m=Math.max(m,E)):T&&!r&&(x<y?(y=x,m=E):x===y&&(m=Math.min(m,E))),S[0]=(E-f)/u,S[1]=(x-g)/d,S[2]=(C-g)/d}this.#t=new Float32Array([f,g,u,d]),this.#e=[m,y],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#o(i)),this.#l(i)):(this.#c(i),t.push(...this.#o(i)));return this.#a(t)}#a(t){const i=[],s=new Set;for(const c of t){const[u,d,f]=c;i.push([u,d,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const d=i[c][2],f=i[c+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const r=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,d,f,g,m]=c;s.delete(c);let y=u,A=d;for(o=[u,f],r.push(o);;){let w;if(s.has(g))w=g;else if(s.has(m))w=m;else break;s.delete(w),[u,d,f,g,m]=w,y!==u&&(o.push(y,A,u,A===d?d:f),y=u),A=A===d?f:d}o.push(y,A)}return new aA(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#r;let s=0,r=i.length-1;for(;s<=r;){const o=s+r>>1,c=i[o][0];if(c===t)return o;c<t?s=o+1:r=o-1}return r+1}#l([,t,i]){const s=this.#s(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#r.length;r++){const[o,c]=this.#r[r];if(o!==t)break;if(o===t&&c===i){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,c]=this.#r[r];if(o!==t)break;if(o===t&&c===i){this.#r.splice(r,1);return}}}#o(t){const[i,s,r]=t,o=[[i,s,r]],c=this.#s(r);for(let u=0;u<c;u++){const[d,f]=this.#r[u];for(let g=0,m=o.length;g<m;g++){const[,y,A]=o[g];if(!(f<=y||A<=d)){if(y>=d){if(A>f)o[g][1]=f;else{if(m===1)return[];o.splice(g,1),g--,m--}continue}o[g][2]=d,A>f&&o.push([i,f,A])}}}return o}}class aA extends et{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const c=i[o],u=i[o+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const c=[],u=s-t,d=r-i;for(const f of this.#e){const g=new Array(f.length);for(let m=0;m<f.length;m+=2)g[m]=t+f[m]*u,g[m+1]=r-f[m+1]*d;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Vu extends Xn{newFreeDrawOutline(t,i,s,r,o,c){return new rA(t,i,s,r,o,c)}}class rA extends Tm{newOutliner(t,i,s,r,o,c=0){return new Vu(t,i,s,r,o,c)}}class ie extends at{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#s=null;#l=0;#c=null;#o=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=gt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ie.prototype;return pt(this,"_keyboardManager",new ur([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ie._defaultColor,this.#p=t.thickness||ie._defaultThickness,this.opacity=t.opacity||ie._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#l=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new qu(this.#n,.001);this.#o=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;const i=new qu(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=i.getOutlines();const{firstPoint:s}=this.#o;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#a;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#o=t;const r=1.5;if(this.#a=t.getNewOutline(this.#p/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ie.#x(this.#o.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ie.#x(this.#a.box,m),path:{d:this.#a.toSVGPath()}})}const[o,c,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*y/m,this.height=d*m/y;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*y/m,this.height=d*m/y;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-c)/d];const{lastPoint:g}=this.#a;this.#m=[(g[0]-o)/u,(g[1]-c)/d]}static initialize(t,i){at.initialize(t,i),ie._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Tt.HIGHLIGHT_COLOR:ie._defaultColor=i;break;case Tt.HIGHLIGHT_THICKNESS:ie._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Tt.HIGHLIGHT_COLOR:this.#E(i);break;case Tt.HIGHLIGHT_THICKNESS:this.#w(i);break}}static get defaultPropertiesToUpdate(){return[[Tt.HIGHLIGHT_COLOR,ie._defaultColor],[Tt.HIGHLIGHT_THICKNESS,ie._defaultThickness]]}get propertiesToUpdate(){return[[Tt.HIGHLIGHT_COLOR,this.color||ie._defaultColor],[Tt.HIGHLIGHT_THICKNESS,this.#p||ie._defaultThickness],[Tt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const i=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,ie._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const i=this.#p,s=r=>{this.#p=r,this.#S(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new ci({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#C():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#y({highlightOutlines:this.#o.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#o.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#x([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ie.#x(this.#o.box,t)):s=ie.#x([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:ie.#x(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),im(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(t){ie._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#l)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#P(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:g,height:m}of o){const y=d*t+s,A=(1-f)*i+r;c[u]=c[u+4]=y,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=y+g*t,c[u+5]=c[u+7]=A-m*i,u+=8}return c}#O(t){return this.#o.serialize(t,this.#D())}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:c,y:u,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,m=t.combinedSignal(g),y=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",Wt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ui,{signal:m}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:m}),this._freeHighlight=new Vu({x:r,y:o},[c,u,d,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof xm){const{data:{quadPoints:w,rect:S,rotation:E,id:x,color:C,opacity:T,popupRef:R,richText:k,contentsObj:N,creationDate:L,modificationDate:Y},parent:{page:{pageNumber:$}}}=t;r=t={annotationType:gt.HIGHLIGHT,color:Array.from(C),opacity:T,quadPoints:w,boxes:null,pageIndex:$-1,rect:S.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:R,richText:k,comment:N?.str||null,creationDate:L,modificationDate:Y}}else if(t instanceof sh){const{data:{inkLists:w,rect:S,rotation:E,id:x,color:C,borderStyle:{rawWidth:T},popupRef:R,richText:k,contentsObj:N,creationDate:L,modificationDate:Y},parent:{page:{pageNumber:$}}}=t;r=t={annotationType:gt.HIGHLIGHT,color:Array.from(C),thickness:T,inkLists:w,boxes:null,pageIndex:$-1,rect:S.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:R,richText:k,comment:N?.str||null,creationDate:L,modificationDate:Y}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,f=await super.deserialize(t,i,s);f.color=J.makeHexColor(...o),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[g,m]=f.pageDimensions,[y,A]=f.pageTranslation;if(c){const w=f.#n=[];for(let S=0;S<c.length;S+=8)w.push({x:(c[S]-y)/g,y:1-(c[S+1]-A)/m,width:(c[S+2]-c[S])/g,height:(c[S+1]-c[S+5])/m});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-y,y:m-(w[1]-A)},E=new Vu(S,[0,0,g,m],1,f.#p/2,!0,.001);for(let T=0,R=w.length;T<R;T+=2)S.x=w[T]-y,S.y=m-(w[T+1]-A),E.add(S);const{id:x,clipPathId:C}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);f.#y({highlightOutlines:E.getOutlines(),highlightId:x,clipPathId:C}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=at._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#P(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Cm{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){It("Not implemented")}}class Ot extends at{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(Ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){It("Not implemented")}static get typesMap(){It("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(Ot.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],c=u=>{r.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#l(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#l()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#l(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#o([t,i,s,r]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/o),r*(o/c)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(c/o),r*(o/c)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/c),r*(c/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/c),r*(c/o)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#o(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:c,parentDimensions:[u,d]}=this;switch((o*4+c)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/d),r*(d/u),s*(u/d)];case 5:return[1-i,t,s*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-i,r*(d/u),s*(u/d)];case 7:return[i-s*(u/d),1-t-r*(d/u),s*(u/d),r*(d/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(d/u),i,r*(d/u),s*(u/d)];case 13:return[1-i-s*(u/d),t-r*(d/u),s*(u/d),r*(d/u)];case 14:return[1-t,1-i-s*(u/d),r*(d/u),s*(u/d)];case 15:return[i,1-t,s*(u/d),r*(d/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){It("Not implemented")}static startDrawing(t,i,s,r){const{target:o,offsetX:c,offsetY:u,pointerId:d,pointerType:f}=r;if(Lt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:m,height:y}=o.getBoundingClientRect(),A=Ot.#i=new AbortController,w=t.combinedSignal(A);if(Lt.setPointer(f,d),window.addEventListener("pointerup",S=>{Lt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{Lt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{Lt.isSamePointerType(S.pointerType)&&(Lt.initializeAndAddPointerId(S.pointerId),Ot.#n.isCancellable()&&(Ot.#n.removeLastElement(),Ot.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ui,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{Lt.isSameTimeStamp(S.timeStamp)&&Wt(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),Ot.#n){t.drawLayer.updateProperties(this._currentDrawId,Ot.#n.startNew(c,u,m,y,g));return}i.updateUIForDefaultProperties(this),Ot.#n=this.createDrawerInstance(c,u,m,y,g),Ot.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Ot.#r.toSVGProperties(),Ot.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Lt.isSameTimeStamp(t.timeStamp),!Ot.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(Lt.isSamePointerId(r)){if(Lt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ot.#n.add(i,s)),Lt.setTimeStamp(t.timeStamp),Wt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Ot.#n=null,Ot.#r=null,Lt.clearTimeStamp()),Ot.#i&&(Ot.#i.abort(),Ot.#i=null,Lt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Ot.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Ot.#n,r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Tt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Tt.DRAW_STEP),!Ot.#n.isEmpty()){const{pageDimensions:[s,r],scale:o}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ot.#n.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:Ot.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,c){It("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}=i.viewport,d=this.deserializeDraw(c,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class lA{#t=new Float64Array(6);#e;#n;#i;#r;#a;#s="";#l=0;#c=new dr;#o;#d;constructor(t,i,s,r,o,c){this.#o=s,this.#d=r,this.#i=o,this.#r=c,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i],this.#n=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return et._normalizePoint(t,i,this.#o,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,o,c]=this.#t.subarray(2,6),u=t-o,d=i-c;return Math.hypot(this.#o*u,this.#d*d)<=2?null:(this.#a.push(t,i),isNaN(s)?(this.#t.set([o,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,c,t,i],0),this.#e.push(...et.createBezierPoints(s,r,o,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,o){this.#o=s,this.#d=r,this.#i=o,[t,i]=this.#h(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#a}),this.#t.set(c,0),this.#l=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#l=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#a=r,this.#l=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=et.svgRound(this.#e[4]),i=et.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#a.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#l=6}if(this.#a.length===4){const r=et.svgRound(this.#e[10]),o=et.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${o}`,this.#l=12,this.#s}const s=[];this.#l===0&&(s.push(`M ${t} ${i}`),this.#l=6);for(let r=this.#l,o=this.#e.length;r<o;r+=6){const[c,u,d,f,g,m]=this.#e.slice(r,r+6).map(et.svgRound);s.push(`C${c} ${u} ${d} ${f} ${g} ${m}`)}return this.#s+=s.join(" "),this.#l=this.#e.length,this.#s}getOutlines(t,i,s,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class dr extends et{#t;#e=0;#n;#i;#r;#a;#s;#l;#c;build(t,i,s,r,o,c,u){this.#r=i,this.#a=s,this.#s=r,this.#l=o,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${et.svgRound(i[4])} ${et.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${et.svgRound(i[10])} ${et.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,c,u,d,f,g]=i.subarray(s,s+6).map(et.svgRound);t.push(`C${o} ${c} ${u} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,r],o){const c=[],u=[],[d,f,g,m]=this.#d();let y,A,w,S,E,x,C,T,R;switch(this.#l){case 0:R=et._rescale,y=t,A=i+r,w=s,S=-r,E=t+d*s,x=i+(1-f-m)*r,C=t+(d+g)*s,T=i+(1-f)*r;break;case 90:R=et._rescaleAndSwap,y=t,A=i,w=s,S=r,E=t+f*s,x=i+d*r,C=t+(f+m)*s,T=i+(d+g)*r;break;case 180:R=et._rescale,y=t+s,A=i,w=-s,S=r,E=t+(1-d-g)*s,x=i+f*r,C=t+(1-d)*s,T=i+(f+m)*r;break;case 270:R=et._rescaleAndSwap,y=t+s,A=i+r,w=-s,S=-r,E=t+(1-f-m)*s,x=i+(1-d-g)*r,C=t+(1-f)*s,T=i+(1-d)*r;break}for(const{line:k,points:N}of this.#i)c.push(R(k,y,A,w,S,o?new Array(k.length):null)),u.push(R(N,y,A,w,S,o?new Array(N.length):null));return{lines:c,points:u,rect:[E,x,C,T]}}static deserialize(t,i,s,r,o,{paths:{lines:c,points:u},rotation:d,thickness:f}){const g=[];let m,y,A,w,S;switch(d){case 0:S=et._rescale,m=-t/s,y=i/r+1,A=1/s,w=-1/r;break;case 90:S=et._rescaleAndSwap,m=-i/r,y=-t/s,A=1/r,w=1/s;break;case 180:S=et._rescale,m=t/s+1,y=-i/r,A=-1/s,w=1/r;break;case 270:S=et._rescaleAndSwap,m=i/r+1,y=t/s+1,A=-1/r,w=-1/s;break}if(!c){c=[];for(const x of u){const C=x.length;if(C===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(C===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const T=new Float32Array(3*(C-2));c.push(T);let[R,k,N,L]=x.subarray(0,4);T.set([NaN,NaN,NaN,NaN,R,k],0);for(let Y=4;Y<C;Y+=2){const $=x[Y],tt=x[Y+1];T.set(et.createBezierPoints(R,k,N,L,$,tt),(Y-2)*3),[R,k,N,L]=[N,L,$,tt]}}}for(let x=0,C=c.length;x<C;x++)g.push({line:S(c[x].map(T=>T??NaN),m,y,A,w),points:S(u[x].map(T=>T??NaN),m,y,A,w)});const E=new this.prototype.constructor;return E.build(g,s,r,1,d,f,o),E}#o(t=this.#c){const i=this.#n+t/2*this.#s;return this.#l%180===0?[i/this.#r,i/this.#a]:[i/this.#a,i/this.#r]}#d(){const[t,i,s,r]=this.#t,[o,c]=this.#o(0);return[t+o,i+c,s-2*o,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)J.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],c=r[5];for(let u=6,d=r.length;u<d;u+=6){const[f,g,m,y,A,w]=r.subarray(u,u+6);J.bezierBoundingBox(o,c,f,g,m,y,A,w,t),o=A,c=w}}const[i,s]=this.#o();t[0]=Te(t[0]-i,0,1),t[1]=Te(t[1]-s,0,1),t[2]=Te(t[2]+i,0,1),t[3]=Te(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#o();this.#c=t;const[r,o]=this.#o(),[c,u]=[r-i,o-s],d=this.#t;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateParentDimensions([t,i],s){const[r,o]=this.#o();this.#r=t,this.#a=i,this.#s=s;const[c,u]=this.#o(),d=c-r,f=u-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,o=0,c=0,u=0,d=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,d=i;break;case 270:r=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${s} ${r} ${o} ${c} ${et.svgRound(u)} ${et.svgRound(d)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,c]=this.#o(),[u,d,f,g]=this.#t;if(Math.abs(f-o)<=et.PRECISION||Math.abs(g-c)<=et.PRECISION){const S=t+s/2-(u+f/2),E=i+r/2-(d+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${E})`}}}const m=(s-2*o)/(f-2*o),y=(r-2*c)/(g-2*c),A=f/s,w=g/r;return{path:{"transform-origin":`${et.svgRound(u)} ${et.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${et.svgRound(o)} ${et.svgRound(c)}) scale(${m} ${y}) translate(${et.svgRound(-o)} ${et.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,c]=this.#o(),u=this.#t,[d,f,g,m]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(g-o)<=et.PRECISION||Math.abs(m-c)<=et.PRECISION){const E=t+s/2-(d+g/2),x=i+r/2-(f+m/2);for(const{line:C,points:T}of this.#i)et._translate(C,E,x,C),et._translate(T,E,x,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*o)/(g-2*o),A=(r-2*c)/(m-2*c),w=-y*(d+o)+t+o,S=-A*(f+c)+i+c;if(y!==1||A!==1||w!==0||S!==0)for(const{line:E,points:x}of this.#i)et._rescale(E,w,S,y,A,E),et._rescale(x,w,S,y,A,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,c=this.#t,u=t-c[0],d=i-c[1];if(this.#r===r&&this.#a===o)for(const{line:f,points:g}of this.#i)et._translate(f,u,d,f),et._translate(g,u,d,g);else{const f=this.#r/r,g=this.#a/o;this.#r=r,this.#a=o;for(const{line:m,points:y}of this.#i)et._rescale(m,u,d,f,g,m),et._rescale(y,u,d,f,g,y);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Wl extends Cm{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:at._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Wl(this._viewParameters);return t.updateAll(this),t}}class rh extends Ot{static _type="ink";static _editorType=gt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){at.initialize(t,i),this._defaultDrawingOptions=new Wl(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return pt(this,"typesMap",new Map([[Tt.INK_THICKNESS,"stroke-width"],[Tt.INK_COLOR,"stroke"],[Tt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new lA(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,c){return dr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){let r=null;if(t instanceof sh){const{data:{inkLists:c,rect:u,rotation:d,id:f,color:g,opacity:m,borderStyle:{rawWidth:y},popupRef:A,richText:w,contentsObj:S,creationDate:E,modificationDate:x},parent:{page:{pageNumber:C}}}=t;r=t={annotationType:gt.INK,color:Array.from(g),thickness:y,opacity:m,paths:{points:c},boxes:null,pageIndex:C-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:E,modificationDate:x}}const o=await super.deserialize(t,i,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new ar(this),[["colorPicker",this._colorPicker]]}get colorType(){return Tt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=rh.getDefaultDrawingOptions({stroke:J.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:at._colorManager.convert(r),opacity:o,thickness:c,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class Xu extends dr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Fl=8,Qa=3;class Hs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,o,c,u){const d=this.#e(s,r,o,c);for(let f=0;f<8;f++){const g=(-f+d-u+16)%8,m=this.#n[2*g],y=this.#n[2*g+1];if(t[(s+m)*i+(r+y)]!==0)return g}return-1}static#r(t,i,s,r,o,c,u){const d=this.#e(s,r,o,c);for(let f=0;f<8;f++){const g=(f+d+u+16)%8,m=this.#n[2*g],y=this.#n[2*g+1];if(t[(s+m)*i+(r+y)]!==0)return g}return-1}static#a(t,i,s,r){const o=t.length,c=new Int32Array(o);for(let g=0;g<o;g++)c[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)c[g*i]=c[g*i+i-1]=0;for(let g=0;g<i;g++)c[g]=c[i*s-1-g]=0;let u=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let m=1;m<i-1;m++){const y=g*i+m,A=c[y];if(A===0)continue;let w=g,S=m;if(A===1&&c[y-1]===0)u+=1,S-=1;else if(A>=1&&c[y+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const E=[m,g],x=S===m+1,C={isHole:x,points:E,id:u,parent:0};f.push(C);let T;for(const Q of f)if(Q.id===d){T=Q;break}T?T.isHole?C.parent=x?T.parent:d:C.parent=x?d:T.parent:C.parent=x?d:0;const R=this.#i(c,i,g,m,w,S,0);if(R===-1){c[y]=-u,c[y]!==1&&(d=Math.abs(c[y]));continue}let k=this.#n[2*R],N=this.#n[2*R+1];const L=g+k,Y=m+N;w=L,S=Y;let $=g,tt=m;for(;;){const Q=this.#r(c,i,$,tt,w,S,1);k=this.#n[2*Q],N=this.#n[2*Q+1];const ct=$+k,_t=tt+N;E.push(_t,ct);const ut=$*i+tt;if(c[ut+1]===0?c[ut]=-u:c[ut]===1&&(c[ut]=u),ct===g&&_t===m&&$===L&&tt===Y){c[y]!==1&&(d=Math.abs(c[y]));break}else w=$,S=tt,$=ct,tt=_t}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let L=i;L<s-2;L+=2)r.push(t[L],t[L+1]);return}const o=t[i],c=t[i+1],u=t[s-4]-o,d=t[s-3]-c,f=Math.hypot(u,d),g=u/f,m=d/f,y=g*c-m*o,A=d/u,w=1/f,S=Math.atan(A),E=Math.cos(S),x=Math.sin(S),C=w*(Math.abs(E)+Math.abs(x)),T=w*(1-C+C**2),R=Math.max(Math.atan(Math.abs(x+E)*T),Math.atan(Math.abs(x-E)*T));let k=0,N=i;for(let L=i+2;L<s-2;L+=2){const Y=Math.abs(y-g*t[L+1]+m*t[L]);Y>k&&(N=L,k=Y)}k>(f*R)**2?(this.#s(t,i,N+2,r),this.#s(t,N,s,r)):r.push(o,c)}static#l(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,o,c){const u=new Float32Array(c**2),d=-2*r**2,f=c>>1;for(let S=0;S<c;S++){const E=(S-f)**2;for(let x=0;x<c;x++)u[S*c+x]=Math.exp((E+(x-f)**2)/d)}const g=new Float32Array(256),m=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/m);const y=t.length,A=new Uint8Array(y),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let E=0;E<i;E++){const x=S*i+E,C=t[x];let T=0,R=0;for(let N=0;N<c;N++){const L=S+N-f;if(!(L<0||L>=s))for(let Y=0;Y<c;Y++){const $=E+Y-f;if($<0||$>=i)continue;const tt=t[L*i+$],Q=u[N*c+Y]*g[Math.abs(tt-C)];T+=tt*Q,R+=Q}}const k=A[x]=Math.round(T/R);w[k]++}return[A,w]}static#o(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const c=255/(r-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*c;return s}static#h(t){let i,s=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let c=o,u=o;for(i=o;i<256;i++){const d=t[i];d>s&&(i-c>r&&(r=i-c,u=i-1),s=d,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let c=s,u=r;if(s>o||r>o){let y=s,A=r,w=Math.log2(Math.max(s,r)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let x=0;x<w;x++){c=Math.ceil(y/2),u=Math.ceil(A/2);const C=new OffscreenCanvas(c,u);C.getContext("2d").drawImage(t,0,0,y,A,0,0,c,u),y=c,A=u,t!==i&&t.close(),t=C.transferToImageBitmap()}const E=Math.min(o/c,o/u);c=Math.round(c*E),u=Math.round(u*E)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const g=f.getImageData(0,0,c,u).data;return[this.#d(g),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},o,c,u,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const m=200,y=g.font=`${s} ${r} ${m}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:x,fontBoundingBoxDescent:C,width:T}=g.measureText(t),R=1.5,k=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,T)*R),N=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||m,Math.abs(x)+Math.abs(C)||m)*R);f=new OffscreenCanvas(k,N),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=y,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,k,N),g.fillStyle="black",g.fillText(t,k*(R-1)/2,N*(3-R)/2);const L=this.#d(g.getImageData(0,0,k,N).data),Y=this.#o(L),$=this.#h(Y),tt=this.#a(L,k,N,$);return this.processDrawnLines({lines:{curves:tt,width:k,height:N},pageWidth:o,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,o){const[c,u,d]=this.#f(t),[f,g]=this.#c(c,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#h(g),y=this.#a(f,u,d,m);return this.processDrawnLines({lines:{curves:y,width:u,height:d},pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:c,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:d,width:f,height:g}=t,m=t.thickness??0,y=[],A=Math.min(i/f,s/g),w=A/i,S=A/s,E=[];for(const{points:C}of d){const T=c?this.#l(C):C;if(!T)continue;E.push(T);const R=T.length,k=new Float32Array(R),N=new Float32Array(3*(R===2?2:R-2));if(y.push({line:N,points:k}),R===2){k[0]=T[0]*w,k[1]=T[1]*S,N.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[L,Y,$,tt]=T;L*=w,Y*=S,$*=w,tt*=S,k.set([L,Y,$,tt],0),N.set([NaN,NaN,NaN,NaN,L,Y],0);for(let Q=4;Q<R;Q+=2){const ct=k[Q]=T[Q]*w,_t=k[Q+1]=T[Q+1]*S;N.set(et.createBezierPoints(L,Y,$,tt,ct,_t),(Q-2)*3),[L,Y,$,tt]=[$,tt,ct,_t]}}if(y.length===0)return null;const x=u?new Xu:new dr;return x.build(y,i,s,1,r,u?0:m,o),{outline:x,newCurves:E,areContours:u,thickness:m,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:o}){let c=1/0,u=-1/0,d=0;for(const T of t){d+=T.length;for(let R=2,k=T.length;R<k;R++){const N=T[R]-T[R-2];c=Math.min(c,N),u=Math.max(u,N)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,m=Fl+Qa*g,y=new Uint32Array(m);let A=0;y[A++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,y[A++]=0,y[A++]=r,y[A++]=o,y[A++]=i?0:1,y[A++]=Math.max(0,Math.floor(s??0)),y[A++]=g,y[A++]=f.BYTES_PER_ELEMENT;for(const T of t)y[A++]=T.length-2,y[A++]=T[0],y[A++]=T[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(y);const E=f.prototype.constructor;for(const T of t){const R=new E(T.length-2);for(let k=2,N=T.length;k<N;k++)R[k-2]=T[k]-T[k-2];S.write(R)}S.close();const x=await new Response(w.readable).arrayBuffer(),C=new Uint8Array(x);return Wg(C)}static async decompressSignature(t){try{const i=_y(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const T of s)c||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),c.set(T,u),u+=T.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],m=d[3],y=d[4]===0,A=d[5],w=d[6],S=d[7],E=[],x=(Fl+Qa*w)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(S){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(c.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(c.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(c.buffer,x);break}u=0;for(let T=0;T<w;T++){const R=d[Qa*T+Fl],k=new Float32Array(R+2);E.push(k);for(let N=0;N<Qa-1;N++)k[N]=d[Qa*T+Fl+N+1];for(let N=0;N<R;N++)k[N+2]=k[N]+C[u++]}return{areContours:y,thickness:A,outlines:E,width:g,height:m}}catch(i){return ft(`decompressSignature: ${i}`),null}}}class lh extends Cm{constructor(){super(),super.updateProperties({fill:at._defaultLineColor,"stroke-width":0})}clone(){const t=new lh;return t.updateAll(this),t}}class oh extends Wl{constructor(t){super(t),super.updateProperties({stroke:at._defaultLineColor,"stroke-width":1})}clone(){const t=new oh(this._viewParameters);return t.updateAll(this),t}}class xi extends Ot{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=gt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){at.initialize(t,i),this._defaultDrawingOptions=new lh,this._defaultDrawnSignatureOptions=new oh(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return pt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:c,description:u,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:m},rotation:y}=this.parent.viewport,A=Hs.processDrawnLines({lines:r,pageWidth:g,pageHeight:m,rotation:y,innerMargin:xi._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=this.#n,c=Math.max(r,o),u=Hs.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:r,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof Xu,this.description=s;let d;this.#t?d=xi.getDefaultDrawingOptions():(d=xi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Hs.process(t,i,s,r,xi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Hs.extractContoursFromText(t,i,s,r,o,xi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Hs.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:xi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=xi.getDefaultDrawingOptions():(this._drawingOptions=xi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,r,o,c){return c.areContours?Xu.deserialize(t,i,s,r,o,c):dr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class oA extends at{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#s=null;#l=!1;#c=null;#o=!1;#d=!1;static _type="stamp";static _editorType=gt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){at.initialize(t,i)}static isHandlingMimeForPasting(t){return Pu.includes(t)}static paste(t,i){i.pasteEditor({mode:gt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#o=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Pu.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#l)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#l||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#l=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>c*r||s>c*o){const d=Math.min(c*r/i,c*o/s);i*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new Ti;let u=this.#t,d=r,f=o,g=null;if(i){if(r>i||o>i){const N=Math.min(i/r,i/o);d=Math.floor(r*N),f=Math.floor(o*N)}g=document.createElement("canvas");const y=g.width=Math.ceil(d*c.sx),A=g.height=Math.ceil(f*c.sy);this.#o||(u=this.#u(y,A));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":My.isDarkMode&&(S="#8f8f9d",E="#42414d");const x=15,C=x*c.sx,T=x*c.sy,R=new OffscreenCanvas(C*2,T*2),k=R.getContext("2d");k.fillStyle=S,k.fillRect(0,0,C*2,T*2),k.fillStyle=E,k.fillRect(0,0,C,T),k.fillRect(C,T,C,T),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,y,A),w.drawImage(u,0,0,u.width,u.height,0,0,y,A)}let m=null;if(s){let y,A;if(c.symmetric&&u.width<t&&u.height<t)y=u.width,A=u.height;else if(u=this.#t,r>t||o>t){const E=Math.min(t/r,t/o);y=Math.floor(r*E),A=Math.floor(o*E),this.#o||(u=this.#u(y,A))}const S=new OffscreenCanvas(y,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,y,A),m={width:y,height:A,data:S.getImageData(0,0,y,A).data}}return{canvas:g,width:d,height:f,imageData:m}}#u(t,i){const{width:s,height:r}=this.#t;let o=s,c=r,u=this.#t;for(;o>2*t||c>2*i;){const d=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(o,c);g.getContext("2d").drawImage(u,0,0,d,f,0,0,o,c),u=g.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new Ti,c=Math.ceil(s*t*o.sx),u=Math.ceil(r*i*o.sy),d=this.#s;if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const f=this.#o?this.#t:this.#u(c,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#b(t){if(t){if(this.#o){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#o){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Qs.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Qs.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,o=!1;if(t instanceof Em){const{data:{rect:S,rotation:E,id:x,structParent:C,popupRef:T,richText:R,contentsObj:k,creationDate:N,modificationDate:L},container:Y,parent:{page:{pageNumber:$}},canvas:tt}=t;let Q,ct;tt?(delete t.canvas,{id:Q,bitmap:ct}=s.imageManager.getFromCanvas(Y.id,tt),tt.remove()):(o=!0,t._hasNoCanvas=!0);const _t=(await i._structTree.getAriaAttributes(`${Is}${x}`))?.get("aria-label")||"";r=t={annotationType:gt.STAMP,bitmapId:Q,bitmap:ct,pageIndex:$-1,rect:S.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:_t},isSvg:!1,structParent:C,popupRef:T,richText:R,comment:k?.str||null,creationDate:N,modificationDate:L}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:m,accessibilityData:y}=t;o?(s.addMissingCanvas(t.id,c),c.#l=!0):g&&s.imageManager.isValidId(g)?(c.#e=g,d&&(c.#t=d)):c.#i=f,c.#o=m;const[A,w]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/w,y&&(c.altTextData=y),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#o});if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const c=this.#o?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#b(!1);else if(this.#o){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Yi{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#s=!1;#l=!1;#c=!1;#o=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([ge,rh,oA,ie,xi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:g}){const m=[...Yi.#p.values()];if(!Yi._initialized){Yi._initialized=!0;for(const y of m)y.initialize(g,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=c,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===gt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case gt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case gt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case gt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===gt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of Yi.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#b(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#b)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#l=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(u,d);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let A;const w=new RegExp(`^${er}[0-9]+$`);for(const E of y)if(w.test(E.id)){A=E.id;break}if(!A)return;const S=this.#a.get(A);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,o=new Map;for(const u of this.#b){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of Yi.#p.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#l=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=he.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ie.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#l&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),at.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#a.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#y(){return Yi.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const i=this.#y;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#w(),o=this.getNextId(),c=this.#E({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await Yi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),o=this.#E({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,i+r),f=(o+u)/2-t,g=(c+d)/2-i,[m,y]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=he.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===gt.STAMP||s===gt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===gt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=he.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#o){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#o=new AbortController;const i=this.#u.combinedSignal(this.#o);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#o?(this.#u.setCurrentDrawingSession(null),this.#o.abort(),this.#o=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#o?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#o&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Qn(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Qn(this.div,{rotation:s}),i!==s)for(const r of this.#a.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class Se{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return pt(this,"_svgFactory",new ql)}static#r(t,[i,s,r,o]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#a(){const t=Se._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=Se._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Se._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#l(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=Se.#i++,o=this.#a(),c=Se._svgFactory.createElement("defs");o.append(c);const u=Se._svgFactory.createElement("path");c.append(u);const d=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(c,d):null,g=Se._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=Se.#i++,r=this.#a(),o=Se._svgFactory.createElement("defs");r.append(o);const c=Se._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const m=Se._svgFactory.createElement("mask");o.append(m),d=`mask_p${this.pageIndex}_${s}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const y=Se._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const A=Se._svgFactory.createElement("use");m.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Se._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return r.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:o,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#l(u,s),r&&Se.#r(u,r),o){const{classList:d}=u;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(c){const f=u.firstElementChild.firstElementChild;this.#l(f,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:qu};globalThis.pdfjsLib={AbortException:xn,AnnotationEditorLayer:Yi,AnnotationEditorParamsType:Tt,AnnotationEditorType:gt,AnnotationEditorUIManager:En,AnnotationLayer:ah,AnnotationMode:_n,AnnotationType:oe,applyOpacity:Ry,build:Fv,ColorPicker:ci,createValidAbsoluteUrl:Kg,CSSConstants:Dy,DOMSVGFactory:ql,DrawLayer:Se,FeatureTest:he,fetchData:lr,findContrastColor:Ny,getDocument:bm,getFilenameFromUrl:wy,getPdfFilenameFromUrl:xy,getRGB:cr,getUuid:Zg,getXfaPageViewport:Ty,GlobalWorkerOptions:Ks,ImageKind:Ul,InvalidPDFException:Bu,isDataScheme:$l,isPdfFile:$u,isValidExplicitDest:Iy,MathClamp:Te,noContextMenu:ui,normalizeUnicode:Ay,OPS:ir,OutputScale:Ti,PasswordResponses:hy,PDFDataRangeTransport:ym,PDFDateString:zu,PDFWorker:sr,PermissionFlag:uy,PixelsPerInch:Qs,RenderingCancelledException:Ku,renderRichText:tm,ResponseException:Il,setLayerDimensions:Qn,shadow:pt,SignatureExtractor:Hs,stopEvent:Wt,SupportedImageMimeTypes:Pu,TextLayer:$e,TouchManager:Ql,updateUrlHash:$g,Util:J,VerbosityLevel:Xl,version:Pv,XfaLayer:Jg};const cA="/resumeai-platform/assets/pdf.worker-DjmdXq8j.mjs";Ks.workerSrc=cA;const uA=({value:b})=>{const[t,i]=pi.useState(0);return pi.useEffect(()=>{let s=0;const r=parseInt(b),o=setInterval(()=>{s+=1,s>r?(i(r),clearInterval(o)):i(s)},20);return()=>clearInterval(o)},[b]),B.jsx("span",{children:t})};function hA(){const[b,t]=pi.useState("jobDescription"),[i,s]=pi.useState(""),[r,o]=pi.useState(""),[c,u]=pi.useState(!1),[d,f]=pi.useState(null),[g,m]=pi.useState(null),[y,A]=pi.useState([]),w=pi.useRef(null),S=C=>{const T=parseFloat(C);return isNaN(T)?0:T<=10?Math.round(T*10):Math.round(T)},E=()=>{if(!i.trim()){o("Please paste the job description");return}if(i.trim().length<50){o("Job description seems too short. Please provide more details.");return}o(""),t("upload")},x=async C=>{const T=C.target.files?.[0];if(!T||T.type!=="application/pdf"){alert("PDF Documents Only.");return}f(T),u(!0);try{const R=await T.arrayBuffer(),k=await bm({data:R}).promise,L=(await Promise.all(Array.from({length:k.numPages},(tt,Q)=>k.getPage(Q+1).then(ct=>ct.getTextContent().then(_t=>_t.items.map(ut=>ut.str).join(" ")))))).join(`
`).trim();A(cy(L));const Y=await window.puter.ai.chat([{role:"system",content:"Expert AI. Output valid JSON."},{role:"user",content:ly.ANALYZE_RESUME_PROMPT.replace("{{DOCUMENT_TEXT}}",L).replace("{{JOB_DESCRIPTION}}",i)}],{model:"gpt-4o"}),$=(typeof Y=="string"?Y:Y?.message?.content||"").match(/\{[\s\S]*\}/);m($?JSON.parse($[0]):{}),t("analysis")}catch{alert("Analysis timed out."),f(null)}finally{u(!1)}};return B.jsx("div",{className:"min-h-screen bg-black overflow-x-hidden selection:bg-cyan-500/30",children:b==="jobDescription"&&!c?B.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 animate-in fade-in duration-1000",children:B.jsxs("div",{className:"max-w-4xl w-full space-y-12",children:[B.jsxs("header",{className:"text-center space-y-6",children:[B.jsx("p",{className:"text-[10px] font-bold tracking-tesla text-cyan-500 uppercase opacity-80",children:"Next-Gen Career Intelligence Platform"}),B.jsxs("h1",{className:"text-8xl md:text-[120px] font-bold tracking-tighter text-white text-glow-white leading-none",children:["Resume",B.jsx("span",{className:"text-white/20",children:"AI"})]}),B.jsxs("p",{className:"text-lg md:text-xl text-slate-400 font-normal max-w-lg mx-auto leading-relaxed",children:["Precision engineered scoring for the ",B.jsx("span",{className:"text-white",children:"next generation"})," of talent."]})]}),B.jsx("div",{className:"space-y-8",children:B.jsxs("div",{className:"glass-panel rounded-[2.5rem] p-10 md:p-14 border border-white/[0.08]",children:[B.jsxs("div",{className:"mb-8",children:[B.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Step 1: Share Job Description"}),B.jsx("p",{className:"text-slate-400 text-base",children:"Paste the job description to analyze your resume against specific requirements"})]}),B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"relative",children:[B.jsx("textarea",{value:i,onChange:C=>{s(C.target.value),C.target.value.length>50&&o("")},placeholder:"Paste the complete job description here... Include title, responsibilities, required skills, experience level, and qualifications.",className:"w-full h-64 bg-[#080808]/60 border border-white/[0.1] rounded-2xl p-6 text-slate-100 placeholder:text-slate-600 focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/20 resize-none font-medium"}),B.jsxs("div",{className:"absolute right-4 bottom-4 text-xs text-slate-500",children:[i.length," characters"]})]}),r&&B.jsxs("div",{className:"bg-rose-500/10 border border-rose-500/30 rounded-xl p-4 flex items-start gap-3",children:[B.jsx("span",{className:"text-rose-400 text-xl mt-0.5",children:""}),B.jsx("p",{className:"text-rose-300 text-sm font-medium",children:r})]}),B.jsx("div",{className:"flex gap-4",children:B.jsx("button",{onClick:E,className:"flex-1 px-8 py-4 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 text-black text-base font-bold tracking-wide hover:from-cyan-400 hover:to-blue-400 transition-all shadow-lg shadow-cyan-500/20 hover:shadow-cyan-400/30",children:"Continue to Resume Upload"})}),B.jsx("p",{className:"text-xs text-slate-500 text-center",children:" Pro tip: Copy the entire job posting from LinkedIn, Indeed, or your target company's website"})]})]})})]})}):b==="upload"&&!c?B.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 animate-in fade-in duration-1000",children:B.jsxs("div",{className:"max-w-6xl w-full text-center space-y-16",children:[B.jsxs("header",{className:"space-y-6",children:[B.jsx("div",{className:"inline-block px-4 py-2 rounded-full border border-cyan-500/30 bg-cyan-500/5 mb-4",children:B.jsx("p",{className:"text-[10px] font-bold tracking-tesla text-cyan-500 uppercase",children:"Step 2 of 2"})}),B.jsx("h2",{className:"text-6xl md:text-7xl font-bold tracking-tighter text-white leading-none",children:"Upload Your Resume"}),B.jsx("p",{className:"text-lg md:text-xl text-slate-400 font-normal max-w-lg mx-auto leading-relaxed",children:"We'll analyze it against the job description you provided"})]}),B.jsx("div",{onClick:()=>w.current?.click(),className:"group relative cursor-pointer mx-auto w-full max-w-2xl",children:B.jsxs("div",{className:"relative h-72 bg-[#080808]/40 backdrop-blur-3xl border border-white/[0.05] rounded-[40px] flex flex-col items-center justify-center gap-8 hover:border-white/20 transition-all duration-700",children:[B.jsx("div",{className:"w-16 h-16 rounded-full border border-white/[0.08] flex items-center justify-center group-hover:bg-white/5 transition-all group-hover:scale-110",children:B.jsx("svg",{className:"w-6 h-6 text-white/40 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v12m6-6H6"})})}),B.jsxs("div",{className:"text-center",children:[B.jsxs("p",{className:"text-2xl font-medium text-slate-300",children:["Drop Resume ",B.jsx("span",{className:"text-slate-600 font-light",children:"or"})," Browse"]}),B.jsx("p",{className:"text-[9px] text-slate-600 tracking-[0.4em] uppercase font-bold pt-4",children:"PDF Standards Only"})]})]})}),B.jsx("button",{onClick:()=>{t("jobDescription"),s(""),f(null),m(null)},className:"px-8 py-3 rounded-full border border-white/10 text-white text-sm font-semibold hover:bg-white/5 transition-all",children:" Back to Job Description"}),B.jsx("input",{ref:w,type:"file",accept:".pdf",onChange:x,className:"hidden"})]})}):c?B.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center space-y-12",children:[B.jsx("div",{className:"relative w-72 h-[1px] bg-white/10 rounded-full overflow-hidden",children:B.jsx("div",{className:"absolute top-0 h-full bg-cyan-500 shadow-[0_0_25px_#06b6d4] animate-scan-bi"})}),B.jsxs("div",{className:"text-center space-y-3",children:[B.jsx("p",{className:"text-[10px] tracking-[0.8em] uppercase text-cyan-500 font-bold ml-[0.8em]",children:"Neural Scanning"}),B.jsx("p",{className:"text-[9px] text-slate-600 uppercase tracking-widest animate-pulse",children:"Analyzing Resume Against Job Requirements"})]})]}):(()=>{const C=parseInt(g.overallScore)||0,R=(N=>N===0?{title:"No Alignment Detected",subtitle:"This position is not a match",description:"Your resume shows no alignment with this job description. The role requires skills and experience that are not present in your current resume.",icon:"",color:"red",gradFrom:"from-red-600",gradTo:"to-red-700",borderColor:"border-red-500/30",accentColor:"text-red-400",bgColor:"bg-red-500/10",needsAction:!0,message:"Complete career pivot needed"}:N<=2?{title:"Minimal Alignment",subtitle:"Significant gaps exist",description:"Your resume has very little alignment with this job description. Major revisions and skill development would be needed to be competitive.",icon:"",color:"orange",gradFrom:"from-orange-600",gradTo:"to-orange-700",borderColor:"border-orange-500/30",accentColor:"text-orange-400",bgColor:"bg-orange-500/10",needsAction:!0,message:"Substantial resume overhaul required"}:N<=4?{title:"Partial Alignment",subtitle:"Major gaps to address",description:"Your resume shows some basic alignment, but there are major gaps between your qualifications and job requirements. Significant improvements needed.",icon:"",color:"amber",gradFrom:"from-amber-600",gradTo:"to-amber-700",borderColor:"border-amber-500/30",accentColor:"text-amber-400",bgColor:"bg-amber-500/10",needsAction:!0,message:"Focused improvements needed"}:N<=6?{title:"Moderate Alignment",subtitle:"Some gaps to close",description:"Your resume has moderate alignment with this role. While you have some relevant experience, there are noticeable gaps in key areas.",icon:"",color:"yellow",gradFrom:"from-yellow-600",gradTo:"to-yellow-700",borderColor:"border-yellow-500/30",accentColor:"text-yellow-400",bgColor:"bg-yellow-500/10",needsAction:!1,message:"Some targeted refinements"}:N<=7?{title:"Good Alignment",subtitle:"Strong candidate profile",description:"Your resume shows good alignment with this job description. You have most of the required qualifications and would be a competitive candidate.",icon:"",color:"green",gradFrom:"from-green-600",gradTo:"to-green-700",borderColor:"border-green-500/30",accentColor:"text-green-400",bgColor:"bg-green-500/10",needsAction:!1,message:"Minor polish recommended"}:{title:"Excellent Alignment",subtitle:"Ideal candidate match",description:"Your resume shows exceptional alignment with this job description. You're well-qualified and should strongly consider applying.",icon:"",color:"emerald",gradFrom:"from-emerald-600",gradTo:"to-emerald-700",borderColor:"border-emerald-500/30",accentColor:"text-emerald-400",bgColor:"bg-emerald-500/10",needsAction:!1,message:"Ready to apply!"})(C);return C<=6?B.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:B.jsxs("div",{className:"max-w-5xl w-full",children:[B.jsxs("div",{className:"text-center mb-16 animate-in fade-in duration-1000",children:[B.jsx("div",{className:"mb-6 inline-block text-8xl",children:R.icon}),B.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-4 leading-tight",children:[R.title," ",B.jsx("span",{className:`bg-gradient-to-r ${R.gradFrom} ${R.gradTo} bg-clip-text text-transparent`,children:R.subtitle})]}),B.jsxs("p",{className:"text-xl md:text-2xl text-slate-300 mb-6 max-w-2xl mx-auto",children:["Match Score: ",B.jsxs("span",{className:`font-bold ${R.accentColor}`,children:[C,"/10"]})]}),B.jsx("div",{className:"h-2 w-48 bg-gradient-to-r from-slate-700 to-slate-600 rounded-full mx-auto mb-8",children:B.jsx("div",{className:`h-full bg-gradient-to-r ${R.gradFrom} ${R.gradTo} rounded-full`,style:{width:`${C*10}%`}})}),B.jsx("p",{className:"text-slate-400 text-lg max-w-xl mx-auto",children:R.description}),B.jsx("div",{className:`mt-6 inline-block px-6 py-2 ${R.bgColor} border ${R.borderColor} rounded-full`,children:B.jsx("p",{className:`${R.accentColor} font-semibold`,children:R.message})})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[B.jsxs("div",{className:`glass-panel rounded-[2rem] p-8 border ${R.borderColor} hover:border-opacity-60 transition-all`,children:[B.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[B.jsx("span",{className:"text-3xl",children:""}),B.jsx("h2",{className:`text-2xl font-bold ${R.accentColor}`,children:"Critical Gaps"})]}),B.jsx("ul",{className:"space-y-4",children:g.improvements?.slice(0,5).map((N,L)=>B.jsxs("li",{className:"flex gap-3 text-sm text-slate-200",children:[B.jsx("span",{className:`${R.accentColor} font-bold text-xl leading-none`,children:""}),B.jsx("span",{className:"leading-relaxed",children:N})]},L))})]}),B.jsxs("div",{className:`glass-panel rounded-[2rem] p-8 border ${R.borderColor} hover:border-opacity-60 transition-all`,children:[B.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[B.jsx("span",{className:"text-3xl",children:""}),B.jsx("h2",{className:`text-2xl font-bold ${R.accentColor}`,children:"Action Items"})]}),B.jsx("ul",{className:"space-y-4",children:g.actionItems?.slice(0,5).map((N,L)=>B.jsxs("li",{className:"flex gap-3 text-sm text-slate-200",children:[B.jsx("span",{className:`${R.accentColor} font-bold text-xl leading-none`,children:"+"}),B.jsx("span",{className:"leading-relaxed",children:N})]},L))})]})]}),g.strengths&&g.strengths.length>0&&B.jsxs("div",{className:`glass-panel rounded-[2rem] p-8 ${R.bgColor} border ${R.borderColor} mb-12`,children:[B.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[B.jsx("span",{className:"text-3xl",children:""}),B.jsx("h2",{className:`text-2xl font-bold ${R.accentColor}`,children:"Your Existing Strengths"})]}),B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:g.strengths?.map((N,L)=>B.jsx("div",{className:`${R.bgColor} border ${R.borderColor} rounded-xl p-4 hover:border-opacity-60 transition-all`,children:B.jsx("p",{className:"text-slate-200 text-sm font-medium",children:N})},L))})]}),B.jsxs("div",{className:`glass-panel rounded-[2rem] p-10 border ${R.borderColor} mb-12 bg-gradient-to-br ${R.bgColor}`,children:[B.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[B.jsx("span",{className:"text-3xl",children:""}),B.jsx("h2",{className:`text-2xl font-bold ${R.accentColor}`,children:"Professional Tips"})]}),B.jsx("div",{className:"space-y-4",children:g.proTips?.map((N,L)=>B.jsxs("div",{className:"flex gap-4 items-start",children:[B.jsx("div",{className:`w-8 h-8 rounded-full ${R.bgColor} border ${R.borderColor} flex items-center justify-center flex-shrink-0 mt-1`,children:B.jsx("span",{className:`${R.accentColor} font-bold text-sm`,children:""})}),B.jsx("p",{className:"text-slate-200 text-sm leading-relaxed",children:N})]},L))})]}),B.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center",children:[B.jsx("button",{onClick:()=>{t("jobDescription"),s(""),f(null),m(null)},className:`px-10 py-4 rounded-full bg-gradient-to-r ${R.gradFrom} ${R.gradTo} text-white font-bold hover:opacity-90 transition-all shadow-lg`,children:"Try Different Job Description"}),B.jsx("button",{onClick:()=>window.print(),className:"px-10 py-4 rounded-full border border-white/20 text-white font-bold hover:bg-white/10 transition-all",children:"Download Full Report"})]})]})}):B.jsxs("div",{id:"printable-report",className:"min-h-screen p-6 md:p-12 lg:p-20 max-w-[1500px] mx-auto animate-in fade-in slide-in-from-bottom-4 duration-700",children:[C>=7&&B.jsx("div",{className:"mb-8 animate-in fade-in slide-in-from-top duration-500",children:B.jsxs("div",{className:"relative overflow-hidden rounded-[2rem] bg-gradient-to-r from-emerald-500/10 via-cyan-500/10 to-blue-500/10 border border-emerald-400/30 p-8 backdrop-blur-xl",children:[B.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 to-transparent opacity-50"}),B.jsxs("div",{className:"relative flex items-start gap-4",children:[B.jsx("div",{className:"text-4xl mt-1",children:""}),B.jsxs("div",{className:"flex-1",children:[B.jsx("h3",{className:"text-2xl font-bold text-emerald-300 mb-2",children:"Excellent Resume-Job Match!"}),B.jsxs("p",{className:"text-emerald-200/90 leading-relaxed text-lg",children:["Your resume demonstrates a strong ",B.jsxs("span",{className:"font-bold text-emerald-300",children:[C,"/10 match"]})," with this job description. You're well-positioned for this role and should consider applying!"]})]})]})]})}),B.jsxs("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-10 mb-16 no-print",children:[B.jsxs("div",{className:"space-y-2",children:[B.jsx("p",{className:"text-cyan-500 text-[9px] font-bold tracking-tesla uppercase",children:"Analysis Complete"}),B.jsx("h2",{className:"text-4xl md:text-6xl font-bold text-white tracking-tight",children:"Diagnostic Report"})]}),B.jsxs("div",{className:"flex gap-4",children:[B.jsx("button",{onClick:()=>window.print(),className:"px-8 py-3.5 rounded-full border border-white/10 text-white text-[10px] font-bold tracking-widest hover:bg-white hover:text-black transition-all",children:"DOWNLOAD REPORT"}),B.jsx("button",{onClick:()=>{t("jobDescription"),s(""),f(null),m(null)},className:"px-8 py-3.5 rounded-full bg-cyan-500 text-black text-[10px] font-bold tracking-widest hover:bg-cyan-400 transition-all shadow-lg shadow-cyan-500/20",children:"NEW ANALYSIS"})]})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-8",children:[B.jsxs("section",{className:"md:col-span-4 glass-panel rounded-[2.5rem] p-12 flex flex-col items-center justify-center text-center",children:[B.jsx("h3",{className:"text-lg font-bold text-cyan-300 uppercase tracking-wide mb-6",children:"Integrity Score"}),B.jsxs("div",{className:"relative flex items-center justify-center mb-4",children:[B.jsx("div",{className:"text-[120px] font-extrabold bg-gradient-to-r from-cyan-300 to-blue-300 bg-clip-text text-transparent tracking-tighter leading-none",children:B.jsx(uA,{value:S(g.overallScore)})}),B.jsx("span",{className:"text-5xl font-bold text-cyan-300 ml-2",children:"%"})]}),B.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"Resume-Job Match Quality"})]}),B.jsxs("section",{className:"md:col-span-8 glass-panel rounded-[2.5rem] p-12 flex flex-col justify-center",children:[B.jsxs("h3",{className:"text-lg font-bold text-blue-300 uppercase tracking-wide mb-8 flex items-center gap-3",children:[B.jsx("span",{className:"text-2xl",children:""}),"Executive Summary"]}),B.jsxs("p",{className:"text-lg md:text-2xl font-medium text-slate-100 leading-relaxed tracking-normal text-justify",children:[B.jsx("span",{className:"text-blue-400 text-2xl mr-2",children:'"'}),g.summary,B.jsx("span",{className:"text-blue-400 text-2xl ml-2",children:'"'})]})]}),B.jsxs("section",{className:"md:col-span-12",children:[B.jsxs("div",{className:"text-center mb-12",children:[B.jsx("h2",{className:"text-2xl font-extrabold bg-gradient-to-r from-cyan-400 via-blue-400 to-cyan-300 bg-clip-text text-transparent",children:"PERFORMANCE METRICS"}),B.jsx("div",{className:"h-1 w-16 bg-gradient-to-r from-cyan-400 to-blue-400 mx-auto mt-3 rounded-full"})]}),B.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-5",children:oy.map((N,L)=>{const Y=S(g.performanceMetrics?.[N.key]||0);return B.jsxs("div",{className:"glass-panel rounded-[2rem] p-7 group hover:border-cyan-500/30 transition-all",children:[B.jsxs("div",{className:"flex justify-between items-center mb-5",children:[B.jsx("span",{className:"text-2xl",children:N.icon}),B.jsxs("span",{className:"text-2xl font-extrabold bg-gradient-to-r from-cyan-300 to-blue-300 bg-clip-text text-transparent tabular-nums",children:[Y,"%"]})]}),B.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-widest font-semibold mb-5",children:N.label}),B.jsx("div",{className:"h-[3px] w-full bg-white/10 rounded-full overflow-hidden",children:B.jsx("div",{style:{width:`${Y}%`,animationDelay:`${L*.1}s`},className:"metric-fill-animated rounded-full"})})]},L)})})]}),B.jsxs("section",{className:"md:col-span-6 glass-panel rounded-[2.5rem] p-10",children:[B.jsxs("h3",{className:"text-lg font-bold text-cyan-300 uppercase tracking-wide mb-8 flex items-center gap-3",children:[B.jsx("span",{className:"text-2xl",children:""}),"Neural Strengths"]}),B.jsx("ul",{className:"space-y-4",children:g.strengths?.map((N,L)=>B.jsxs("li",{className:"flex gap-4 text-sm text-slate-200 leading-relaxed font-medium",children:[B.jsx("span",{className:"text-cyan-400 font-bold",children:""})," ",N]},L))})]}),B.jsxs("section",{className:"md:col-span-6 glass-panel rounded-[2.5rem] p-10",children:[B.jsxs("h3",{className:"text-lg font-bold text-rose-300 uppercase tracking-wide mb-8 flex items-center gap-3",children:[B.jsx("span",{className:"text-2xl",children:""}),"Structural Improvements"]}),B.jsx("ul",{className:"space-y-4",children:g.improvements?.map((N,L)=>B.jsxs("li",{className:"flex gap-4 text-sm text-slate-200 leading-relaxed font-medium",children:[B.jsx("span",{className:"text-rose-400 font-bold",children:""})," ",N]},L))})]}),B.jsxs("section",{className:"md:col-span-7 glass-panel rounded-[2.5rem] p-10",children:[B.jsxs("h3",{className:"text-lg font-bold text-violet-300 uppercase tracking-wide mb-10 flex items-center gap-3",children:[B.jsx("span",{className:"text-2xl",children:""}),"ATS Compatibility Matrix"]}),B.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-10 gap-y-5",children:y.map((N,L)=>B.jsxs("div",{className:"flex items-center justify-between border-b border-white/[0.05] pb-4 hover:border-violet-500/20 transition-colors",children:[B.jsx("span",{className:"text-sm text-slate-300 font-medium",children:N.label}),B.jsx("span",{className:`text-xs font-extrabold tracking-wider px-3 py-1 rounded-lg ${N.present?"text-cyan-300 bg-cyan-500/10":"text-rose-300 bg-rose-500/10"}`,children:N.present?" FOUND":" MISSING"})]},L))})]}),B.jsxs("section",{className:"md:col-span-5 glass-panel rounded-[2.5rem] p-10",children:[B.jsxs("h3",{className:"text-lg font-bold text-amber-300 uppercase tracking-wide mb-10 flex items-center gap-3",children:[B.jsx("span",{className:"text-2xl",children:""}),"Neural Keywords"]}),B.jsx("div",{className:"flex flex-wrap gap-3",children:g.keywords?.map((N,L)=>B.jsx("span",{className:"px-4 py-2.5 bg-gradient-to-br from-amber-500/10 to-amber-500/5 border border-amber-400/30 rounded-full text-xs font-semibold text-amber-200 hover:border-amber-400/60 hover:text-amber-100 transition-all",children:N},L))})]}),B.jsxs("section",{className:"md:col-span-6 glass-panel rounded-[2.5rem] p-10 border-orange-500/10",children:[B.jsxs("h3",{className:"text-lg font-bold text-orange-300 uppercase tracking-wide mb-8 flex items-center gap-3",children:[B.jsx("span",{className:"text-2xl",children:""}),"Urgent Action Items"]}),B.jsx("ul",{className:"space-y-5",children:g.actionItems?.map((N,L)=>B.jsxs("li",{className:"flex gap-4 text-sm text-slate-200 font-medium",children:[B.jsx("span",{className:"text-orange-400 font-bold text-lg min-w-fit",children:String(L+1).padStart(2,"0")}),B.jsx("span",{className:"text-slate-100",children:N})]},L))})]}),B.jsxs("section",{className:"md:col-span-6 glass-panel rounded-[2.5rem] p-10 border-emerald-500/10",children:[B.jsxs("h3",{className:"text-lg font-bold text-emerald-300 uppercase tracking-wide mb-8 flex items-center gap-3",children:[B.jsx("span",{className:"text-2xl",children:""}),"Strategic Pro Tips"]}),B.jsx("ul",{className:"space-y-5",children:g.proTips?.map((N,L)=>B.jsxs("li",{className:"flex gap-4 text-sm text-slate-200 font-medium leading-relaxed",children:[B.jsx("span",{className:"text-emerald-400 font-bold text-lg min-w-fit",children:""}),B.jsx("span",{className:"text-slate-100",children:N})]},L))})]})]})]})})()})}ry.createRoot(document.getElementById("root")).render(B.jsx(pi.StrictMode,{children:B.jsx(hA,{})}));
